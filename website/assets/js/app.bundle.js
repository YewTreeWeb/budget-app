(window.webpackJsonp=window.webpackJsonp||[]).push([["app"],{"+4zn":function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),o=n.n(a),s=n("yXPU"),c=n.n(s),r=n("lwsE"),i=n.n(r),l=n("W8MJ"),u=n.n(l),d=n("E4hX"),p=function(){function e(){i()(this,e),this.budgets=db.collection("budgets")}var t,n;return u()(e,[{key:"saveBudget",value:(n=c()(o.a.mark((function e(t){var n,a,s,c,r,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date,a=t.allItems,s=t.budget,c=t.percent,r=t.totals,i={budget:s,totalInc:r.inc,totalExp:r.exp,totalSav:r.sav,percentExp:c.exp,percentSav:c.sav,allItems:{inc:Object(d.arrayReassign)(a.inc),exp:Object(d.arrayReassign)(a.exp),sav:Object(d.arrayReassign)(a.sav)},created_at:firebase.firestore.Timestamp.fromDate(n)},e.next=5,this.budgets.add(i);case 5:return l=e.sent,e.abrupt("return",l);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"updateBudget",value:(t=c()(o.a.mark((function e(t,n){var a,s,c,r,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.allItems,s=t.budget,c=t.percent,r=t.totals,i={budget:s,totalInc:r.inc,totalExp:r.exp,totalSav:r.sav,percentExp:c.exp,percentSav:c.sav,allItems:{inc:Object(d.arrayReassign)(a.inc),exp:Object(d.arrayReassign)(a.exp),sav:Object(d.arrayReassign)(a.sav)}},e.next=4,this.budgets.doc(n).update(i);case 4:return l=e.sent,e.abrupt("return",l);case 6:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"getBudget",value:function(e){this.budgets.orderBy("created_at").onSnapshot((function(t){t.docChanges().forEach((function(t){"added"===t.type&&e(t.doc.data(),t.doc.id)}))}))}}]),e}();t.default=p},0:function(e,t,n){e.exports=n("kFay")},1:function(e,t){},E4hX:function(e,t,n){"use strict";n.r(t),function(e,a){n.d(t,"arrayReassign",(function(){return u}));for(var o,s=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],r=c.length,i=window.console=window.console||{};r--;)i[o=c[r]]||(i[o]=s);window.addEventListener("keydown",(function e(t){9===t.keyCode&&(document.body.classList.add("user-is-tabbing"),window.removeEventListener("keydown",e))})),document.querySelector("html").setAttribute("data-browser",e.name);var l=document.querySelector("body");a({xlarge:["1281px","1680px"],large:["981px","1280px"],medium:["737px","980px"],small:["481px","736px"],xsmall:[null,"480px"]}),e.mobile?l.classList.add("is-mobile"):(a.on(">medium",(function(){l.classList.remove("is-mobile"),l.classList.add("is-desktop")})),a.on("<=medium",(function(){l.classList.remove("is-desktop"),l.classList.add("is-mobile")}))),"localhost"===window.location.hostname&&console.log("localhost detected!");var u=function(e){return e.map((function(e){return Object.assign({},e)}))}}.call(this,n("txRt"),n("a6Qp"))},SEKM:function(e,t,n){"use strict";n.r(t);var a=n("lwsE"),o=n.n(a),s=n("W8MJ"),c=n.n(s),r=n("b/SL"),i=n("xVb/"),l=n("+4zn"),u=(n("E4hX"),new l.default),d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=Math.abs(e),s=(o=o.toFixed(2)).split("."),c=s[0],r=s[1];r=Number(r)>0?".".concat(r):"",c.length>3&&(c="".concat(c.substr(0,c.length-3),",").concat(c.substr(c.length-3,3)));var i=n?'<span class="currency">&pound;</span>':"";return"".concat(a?"exp"===t?'<span class="sign">&#45;</span> ':'<span class="sign">&#43;</span> ':"").concat(i).concat(c).concat(r)},p=function(){function e(t,n,a){o()(this,e),this.inputType=t,this.inputDesc=n,this.inputVal=a}return c()(e,[{key:"getInput",value:function(){return{type:this.inputType.value,description:this.inputDesc.value,value:Number(this.inputVal.value)}}},{key:"render",value:function(e,t){var n,a="exp"===t?"expenses":"sav"===t?"savings":"income",o=document.querySelector(".".concat(a,"__list"));n="\n    <li class='".concat(a,"__item' id='").concat(t,"-").concat(e.id,"'>\n      <div class='item-desc'><p>").concat(e.desc,"</p></div>\n      <div class=\"items\">\n        <div class='items__value'><p>").concat(d(e.val,t,!0,!1),"</p></div>\n    "),"exp"!==t&&"sav"!==t||(n+='<div class="items__percent"><p>0&#37;</p></div>'),n+='\n        <button class=\'btn btn--clear items__del\'>\n          <svg id="delete" class="icon" width="20" height="20" aria-hidden="true">\n            <use xlink:href="/assets/images/icons.svg#icon-delete"></use>\n          </svg>\n        </button>\n      </div>\n    </li>\n    ',o.innerHTML+=n}},{key:"loadedRender",value:function(e,t){var n=this,a=e.allItems,o=document.querySelector("#chosen-ID"),s=i.default.getData(),c=document.querySelector(".budget__title");if(t===o.value){var l=e.created_at.toDate(),u=Object(r.format)(new Date(l),"do MMMM yyyy");c.textContent="Available budget saved on ".concat(u),this.displayBudget(e),this.displayPercentage(e.percentExp,"exp"),this.displayPercentage(e.percentSav,"sav"),s.budget=e.budget,s.totals.inc=e.totalInc,s.totals.exp=e.totalExp,s.totals.sav=e.totalSav,s.percent.exp=e.percentExp,s.percent.sav=e.percentSav,a.inc.forEach((function(e){n.render(e,"inc"),i.default.addItem("inc",e.desc,e.val)})),a.exp.forEach((function(e){n.render(e,"exp"),i.default.addItem("exp",e.desc,e.val),n.updatePercentages("exp")})),a.sav.forEach((function(e){n.render(e,"sav"),i.default.addItem("sav",e.desc,e.val),n.updatePercentages("sav")})),console.log(s)}}},{key:"getBudget",value:function(e){return{budget:e.budget,totalInc:e.totals.inc,totalExp:e.totals.exp,totalSav:e.totals.sav,percentExp:e.percent.exp,percentSav:e.percent.sav}}},{key:"displayBudget",value:function(e){var t=e.budget>0?"inc":"exp",n=document.querySelector(".budget__value"),a=document.querySelector(".budget__income .budget__amount"),o=document.querySelector(".budget__expenses .budget__amount"),s=document.querySelector(".budget__savings .budget__amount");n.innerHTML=d(e.budget,t,!0),a.innerHTML=d(e.totalInc,"inc"),o.innerHTML=d(e.totalExp,"exp"),s.innerHTML=d(e.totalSav,"exp")}},{key:"displayPercentage",value:function(e,t){var n="exp"===t?"expenses":"savings",a=document.querySelector(".budget__".concat(n," .budget__percentage"));e>0?(a.classList.add("show"),a.innerHTML="".concat(e,"&#37;")):a.classList.remove("show"),console.log(a)}},{key:"updateBudget",value:function(){var e=i.default.calculateBudget(),t=this.getBudget(e);console.log(t),this.displayBudget(t),this.displayPercentage(t.percentExp,"exp"),this.displayPercentage(t.percentSav,"sav")}},{key:"displayPercentages",value:function(e,t){var n="exp"===t?"expenses":"savings";!function(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}(document.querySelectorAll(".".concat(n," .items__percent")),(function(t,n){e[n]>0?(t.classList.add("show"),t.innerHTML="".concat(e[n],"&#37;")):(t.classList.remove("show"),t.innerHTML="0&#37;")}))}},{key:"updatePercentages",value:function(e){var t=e||this.inputType.value;i.default.calculatePercentages(t);var n=i.default.getPercentages(t);this.displayPercentages(n,t)}},{key:"displayDate",value:function(){var e=document.querySelector(".budget__date"),t=new Date;e.textContent="".concat(["January","February","March","April","May","June","July","August","Sepetember","October","November","December"][t.getMonth()]," ").concat(t.getFullYear())}},{key:"changeType",value:function(){var e=this.inputType,t=document.querySelector("#check");e.addEventListener("change",(function(n){var a=Array.from(e.options);console.log(n),console.log(e.attributes,e.options,e.options.selectedIndex,a,a[1]),a.forEach((function(e){e.selected?(e.setAttribute("selected","selected"),t.classList.remove("exp","sav"),"exp"===e.value?t.classList.add("exp"):"sav"===e.value&&t.classList.add("sav")):e.removeAttribute("selected","selected"),console.log("Value ".concat(e.value))}))}))}},{key:"deleteItem",value:function(){var e=this;document.querySelector(".income-expenses").addEventListener("click",(function(t){if("delete"===t.target.id){var n=t.target.closest(".items").parentElement,a=n.id.split("-"),o=a[0],s=Number(a[1]);console.log(t.target,n,a,o,s),i.default.removeItem(o,s),n.remove(),e.updateBudget(),e.updatePercentages()}}))}},{key:"saving",value:function(){var e=document.querySelector("#save"),t=i.default.getData();e.addEventListener("click",(function(){var n=document.querySelector("#chosen-ID"),a=n.value||null,o=!1;n.classList.contains("chosen")&&(o=!0),console.log(t,t.allItems.inc,a),o&&a?u.updateBudget(t,a).then((function(){console.log("updated"),e.textContent="Updated",e.classList.remove("btn--ghost"),setTimeout((function(){e.textContent="Save",e.classList.add("btn--ghost")}),2e3)})).catch((function(e){console.error(e)})):u.saveBudget(t).then((function(){console.log("saved"),e.textContent="Saved",e.classList.remove("btn--ghost"),setTimeout((function(){e.textContent="Save",e.classList.add("btn--ghost")}),2e3)})).catch((function(e){console.error(e)}))}))}},{key:"styledDropdown",value:function(){var e=document.querySelector("#chosen-date"),t=document.querySelector("#chosen-ID"),n=document.querySelector(".date-list");e.addEventListener("focus",(function(){e.placeholder="Type to filter",n.classList.add("open")})),e.addEventListener("blur",(function(){n.classList.remove("open"),e.placeholder="Choose a date"})),e.addEventListener("input",(function(t){var a=e.value.trim().toLowerCase();!function(e,t){Array.from(e.children).filter((function(e){return!e.textContent.toLowerCase().includes(t)})).forEach((function(e){return e.classList.add("filtered")})),Array.from(e.children).filter((function(e){return e.textContent.toLowerCase().includes(t)})).forEach((function(e){return e.classList.remove("filtered")}))}(n,a),console.log(t)})),n.addEventListener("click",(function(a){if(console.log(a,a.target),t.classList.add("chosen"),Array.from(n.children).forEach((function(e){e.classList.remove("selected")})),"LI"===a.target.tagName){var o=a.target.textContent,s=a.target.getAttribute("data-id");e.setAttribute("value",o),e.placeholder=o,t.setAttribute("value",s),a.target.classList.add("selected")}}))}},{key:"Loaded",value:function(){var e=this,t=document.querySelector(".load-budgets"),n=(i.default.getData(),document.querySelectorAll(".income__list",".expenses__list",".savings__list"));t.addEventListener("submit",(function(a){a.preventDefault(),Array.from(n).forEach((function(e){console.log(e),console.log(e.children)})),u.getBudget((function(t,n){return e.loadedRender(t,n)})),t.reset()}))}},{key:"loading",value:function(){var e=document.querySelector(".date-list"),t=document.querySelector(".date-list li");u.getBudget((function(n,a){var o=n.created_at.toDate();if(o){var s=Object(r.format)(new Date(o),"dd/MM/yyyy"),c='<li class="date-list__item" data-id="'.concat(a,'">').concat(s,"</li>");"No saved dates"===t.textContent&&t.remove(),e.innerHTML+=c}})),this.styledDropdown(),this.Loaded()}}]),e}();t.default=p},a6Qp:function(e,t){e.exports=breakpoints},kFay:function(e,t,n){"use strict";n.r(t);var a=n("cDf5"),o=n.n(a),s=(n("OuUZ"),n("E4hX"),n("xVb/")),c=n("SEKM"),r=n("+4zn"),i=document.querySelector("body");window.onload=function(){window.setTimeout((function(){i.classList.remove("is-loading")}),100)};!function(e){var t=document.querySelector(".add__form"),n=document.querySelector(".add__type"),a=document.querySelector(".add__description"),s=document.querySelector(".add__value"),i=new c.default(n,a,s),l=new r.default;i.displayDate(),i.changeType(),i.loading(),i.saving();var u=e.getData().allItems.inc;t.addEventListener("submit",(function(n){n.preventDefault();var a=i.getInput();if(console.log(a),console.log(o()(a.value)),t.reset(),""!==a.desc&&!isNaN(a.value)&&a.value>0){var s=e.addItem(a.type,a.description,a.value);i.render(s,a.type),i.updateBudget(),i.updatePercentages(),console.log("form submitted!"),console.log(s)}console.log(u)})),i.deleteItem(),l.getBudget((function(e,t){console.log(e,t)}))}(s.default)},txRt:function(e,t){e.exports=browser},"xVb/":function(e,t,n){"use strict";n.r(t);var a,o,s,c=n("cDf5"),r=n.n(c),i=n("lwsE"),l=n.n(i),u=n("W8MJ"),d=n.n(u),p=(a=function(){function e(t,n,a){l()(this,e),this.id=t,this.desc=n,this.val=a,this.percentage=-1}return d()(e,[{key:"calcPercentage",value:function(e){this.percentage=e>0?Math.round(this.val/e*100):-1,console.log("this value is ".concat(r()(this.val)),"the totalIncome ".concat(r()(e)))}},{key:"getPercentage",value:function(){return this.percentage}}]),e}(),o={allItems:{exp:[],inc:[],sav:[]},totals:{exp:0,inc:0,sav:0},percent:{exp:-1,sav:-1},budget:0},s=function(e){var t=0;o.allItems[e].forEach((function(e){t+=e.val})),o.totals[e]=t},{addItem:function(e,t,n){var s=o.allItems[e].length>0?o.allItems[e][o.allItems[e].length-1].id+1:0,c=new a(s,t,n);return o.allItems[e].push(c),c},calculateBudget:function(){return s("exp"),s("inc"),s("sav"),o.budget=o.totals.inc-(o.totals.exp+o.totals.sav),o.totals.inc>0?(o.percent.exp=Math.round(o.totals.exp/o.totals.inc*100),o.percent.sav=Math.round(o.totals.sav/o.totals.inc*100)):(o.percent.exp=-1,o.percent.sav=-1),console.log(o.totals.exp,o.totals.inc),console.log(o.budget,o.percent.exp,o.percent.sav),o},calculatePercentages:function(e){o.allItems[e].forEach((function(e){e.calcPercentage(o.totals.inc)}))},getPercentages:function(e){return o.allItems[e].map((function(e){return e.getPercentage()}))},removeItem:function(e,t){var n=o.allItems[e].map((function(e){return e.id})).indexOf(t);-1!==n&&o.allItems[e].splice(n,1)},getData:function(){return o}});t.default=p}},[[0,"runtime","vendors"]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWJzaXRlL3NyYy9qcy9tb2R1bGVzL3Bhc3RidWRnZXQuanMiLCJ3ZWJwYWNrOi8vLy4vd2Vic2l0ZS9zcmMvanMvbW9kdWxlcy9oZWxwZXJzLmpzIiwid2VicGFjazovLy8uL3dlYnNpdGUvc3JjL2pzL21vZHVsZXMvdWljb250cm9sbGVyLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcImJyZWFrcG9pbnRzXCIiLCJ3ZWJwYWNrOi8vLy4vd2Vic2l0ZS9zcmMvanMvYXBwLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcImJyb3dzZXJcIiIsIndlYnBhY2s6Ly8vLi93ZWJzaXRlL3NyYy9qcy9tb2R1bGVzL2J1ZGdldGNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiUGFzdEJ1ZGdldCIsInRoaXMiLCJidWRnZXRzIiwiZGIiLCJjb2xsZWN0aW9uIiwib2JqIiwibm93IiwiRGF0ZSIsImFsbEl0ZW1zIiwiYnVkZ2V0IiwicGVyY2VudCIsInRvdGFscyIsImJ1ZGdldERhdGEiLCJ0b3RhbEluYyIsImluYyIsInRvdGFsRXhwIiwiZXhwIiwidG90YWxTYXYiLCJzYXYiLCJwZXJjZW50RXhwIiwicGVyY2VudFNhdiIsImFycmF5UmVhc3NpZ24iLCJjcmVhdGVkX2F0IiwiZmlyZWJhc2UiLCJmaXJlc3RvcmUiLCJUaW1lc3RhbXAiLCJmcm9tRGF0ZSIsImFkZCIsInJlc3BvbnNlIiwiaWQiLCJkb2MiLCJ1cGRhdGUiLCJjYiIsIm9yZGVyQnkiLCJvblNuYXBzaG90Iiwic25hcHNob3QiLCJkb2NDaGFuZ2VzIiwiZm9yRWFjaCIsImNoYW5nZSIsInR5cGUiLCJkYXRhIiwibWV0aG9kIiwibm9vcCIsIm1ldGhvZHMiLCJsZW5ndGgiLCJjb25zb2xlIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZUZpcnN0VGFiIiwiZSIsImtleUNvZGUiLCJkb2N1bWVudCIsImJvZHkiLCJjbGFzc0xpc3QiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicXVlcnlTZWxlY3RvciIsInNldEF0dHJpYnV0ZSIsImJyb3dzZXIiLCJuYW1lIiwiYnJlYWtwb2ludHMiLCJ4bGFyZ2UiLCJsYXJnZSIsIm1lZGl1bSIsInNtYWxsIiwieHNtYWxsIiwibW9iaWxlIiwib24iLCJyZW1vdmUiLCJsb2NhdGlvbiIsImhvc3RuYW1lIiwibG9nIiwiYXIiLCJtYXAiLCJPYmplY3QiLCJhc3NpZ24iLCJwYXN0YnVkZ2V0IiwiZm9ybWF0TnVtYmVyIiwibnVtYmVyIiwibW9uZXkiLCJjYWxjIiwibnVtIiwiTWF0aCIsImFicyIsIm51bVNwbGl0IiwidG9GaXhlZCIsInNwbGl0IiwiaW50IiwiZGVjaW1hbCIsIk51bWJlciIsInN1YnN0ciIsImN1cnJlbmN5IiwiVUlDb250cm9sbGVyIiwiY29zdCIsImRlc2NyaXB0aW9uIiwidmFsdWUiLCJpbnB1dFR5cGUiLCJpbnB1dERlc2MiLCJpbnB1dFZhbCIsImh0bWwiLCJpdGVtIiwibGlzdCIsImRlc2MiLCJ2YWwiLCJpbm5lckhUTUwiLCJpbnB1dCIsImxvY2FsRGF0YSIsImJ1ZGdldENvbnRyb2xsZXIiLCJnZXREYXRhIiwiYnVkZ2V0RGF0ZSIsImRhdGUiLCJ0b0RhdGUiLCJwYXN0IiwiZm9ybWF0IiwidGV4dENvbnRlbnQiLCJkaXNwbGF5QnVkZ2V0IiwiZGlzcGxheVBlcmNlbnRhZ2UiLCJyZW5kZXIiLCJhZGRJdGVtIiwidXBkYXRlUGVyY2VudGFnZXMiLCJwZXJjZW50YWdlIiwidHlwZXMiLCJjYWxjdWxhdGVCdWRnZXQiLCJuZXdCdWRnZXQiLCJnZXRCdWRnZXQiLCJwZXJjZW50YWdlcyIsImkiLCJub2RlTGlzdEZvckVhY2giLCJxdWVyeVNlbGVjdG9yQWxsIiwiY3VycmVudCIsImluZGV4IiwiY2FsY3VsYXRlUGVyY2VudGFnZXMiLCJnZXRQZXJjZW50YWdlcyIsImRpc3BsYXlQZXJjZW50YWdlcyIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJjaGVjayIsIm9wdGlvbnMiLCJBcnJheSIsImZyb20iLCJhdHRyaWJ1dGVzIiwic2VsZWN0ZWRJbmRleCIsIm9wdGlvbiIsInNlbGVjdGVkIiwicmVtb3ZlQXR0cmlidXRlIiwidGFyZ2V0IiwiY2xvc2VzdCIsInBhcmVudEVsZW1lbnQiLCJzcGxpdElEIiwiSUQiLCJyZW1vdmVJdGVtIiwidXBkYXRlQnVkZ2V0IiwiYnV0dG9uIiwiY29udGFpbnMiLCJ0aGVuIiwic2V0VGltZW91dCIsImVyciIsImVycm9yIiwic2F2ZUJ1ZGdldCIsImlucHV0SUQiLCJkcm9wZG93biIsInBsYWNlaG9sZGVyIiwidGVybSIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsImVsIiwiY2hpbGRyZW4iLCJmaWx0ZXIiLCJpbmNsdWRlcyIsImZpbHRlclRlcm1zIiwiY2hpbGQiLCJ0YWdOYW1lIiwidGFyZ2V0VHh0IiwidGFyZ2V0SUQiLCJnZXRBdHRyaWJ1dGUiLCJmb3JtIiwibGlzdHMiLCJwcmV2ZW50RGVmYXVsdCIsImxvYWRlZFJlbmRlciIsInJlc2V0IiwiZHJvcGRvd25MaXN0Iiwid2hlbiIsInN0eWxlZERyb3Bkb3duIiwiTG9hZGVkIiwibW9kdWxlIiwiZXhwb3J0cyIsIm9ubG9hZCIsImJ1ZGdldEN0cmwiLCJVSUN0cmwiLCJkaXNwbGF5RGF0ZSIsImNoYW5nZVR5cGUiLCJsb2FkaW5nIiwic2F2aW5nIiwiZ2V0SW5wdXQiLCJpc05hTiIsIm5ld0l0ZW0iLCJkZWxldGVJdGVtIiwiQnVkZ2V0IiwiY2FsY3VsYXRlVG90YWxzIiwidG90YWxJbmNvbWUiLCJyb3VuZCIsInN1bSIsImN1ciIsInB1c2giLCJjYWxjUGVyY2VudGFnZSIsImdldFBlcmNlbnRhZ2UiLCJpbmRleE9mIiwic3BsaWNlIl0sIm1hcHBpbmdzIjoiNE1BT01BLEUsV0FDSixhQUFjLFlBQ1pDLEtBQUtDLFFBQVVDLEdBQUdDLFdBQVcsVywwRUFHZEMsRywwRkFDVEMsRUFBTSxJQUFJQyxLQUNSQyxFQUFzQ0gsRUFBdENHLFNBQVVDLEVBQTRCSixFQUE1QkksT0FBUUMsRUFBb0JMLEVBQXBCSyxRQUFTQyxFQUFX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K0IsR0FBTXVLLE9BQU83RSxFQUFPLElBR3RDdEIsUUFBUyxXQUNQLE9BQU9uRSxLQUtFa0UsYyIsImZpbGUiOiJhcHAuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLW9iamVjdC1zcHJlYWQgKi9cbi8vIHRvZG86IHNhdmUgYnVkZ2V0IGRhdGEgdG8gZmlyZWJhc2Vcbi8vIHRvZG86IGdldCBhbGxJdGVtcyBkYXRhIHRvIHNhdmUgc28gdGhleSBjYW4gYmUgcmVwb3B1bGF0ZWQgd2hlbiBsb2FkZWQuXG4vLyB0b2RvOiBnZXQgdGhlIGRhdGEgZnJvbSBmaXJlYmFzZSB3aGVuIGEgZGF0ZSBoYXMgYmVlbiBjaG9zZW4gZnJvbSB0aGUgc2VsZWN0IG9wdGlvbnMgYW5kIHVwZGF0ZSB0aGUgVUlcblxuaW1wb3J0IHsgYXJyYXlSZWFzc2lnbiB9IGZyb20gJy4vaGVscGVycydcblxuY2xhc3MgUGFzdEJ1ZGdldCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYnVkZ2V0cyA9IGRiLmNvbGxlY3Rpb24oJ2J1ZGdldHMnKVxuICB9XG5cbiAgYXN5bmMgc2F2ZUJ1ZGdldChvYmopIHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXG4gICAgY29uc3QgeyBhbGxJdGVtcywgYnVkZ2V0LCBwZXJjZW50LCB0b3RhbHMgfSA9IG9ialxuICAgIGNvbnN0IGJ1ZGdldERhdGEgPSB7XG4gICAgICBidWRnZXQsXG4gICAgICB0b3RhbEluYzogdG90YWxzLmluYyxcbiAgICAgIHRvdGFsRXhwOiB0b3RhbHMuZXhwLFxuICAgICAgdG90YWxTYXY6IHRvdGFscy5zYXYsXG4gICAgICBwZXJjZW50RXhwOiBwZXJjZW50LmV4cCxcbiAgICAgIHBlcmNlbnRTYXY6IHBlcmNlbnQuc2F2LFxuICAgICAgYWxsSXRlbXM6IHtcbiAgICAgICAgaW5jOiBhcnJheVJlYXNzaWduKGFsbEl0ZW1zLmluYyksXG4gICAgICAgIGV4cDogYXJyYXlSZWFzc2lnbihhbGxJdGVtcy5leHApLFxuICAgICAgICBzYXY6IGFycmF5UmVhc3NpZ24oYWxsSXRlbXMuc2F2KSxcbiAgICAgIH0sXG4gICAgICBjcmVhdGVkX2F0OiBmaXJlYmFzZS5maXJlc3RvcmUuVGltZXN0YW1wLmZyb21EYXRlKG5vdyksXG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5idWRnZXRzLmFkZChidWRnZXREYXRhKVxuICAgIHJldHVybiByZXNwb25zZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQnVkZ2V0KG9iaiwgaWQpIHtcbiAgICBjb25zdCB7IGFsbEl0ZW1zLCBidWRnZXQsIHBlcmNlbnQsIHRvdGFscyB9ID0gb2JqXG4gICAgY29uc3QgYnVkZ2V0RGF0YSA9IHtcbiAgICAgIGJ1ZGdldCxcbiAgICAgIHRvdGFsSW5jOiB0b3RhbHMuaW5jLFxuICAgICAgdG90YWxFeHA6IHRvdGFscy5leHAsXG4gICAgICB0b3RhbFNhdjogdG90YWxzLnNhdixcbiAgICAgIHBlcmNlbnRFeHA6IHBlcmNlbnQuZXhwLFxuICAgICAgcGVyY2VudFNhdjogcGVyY2VudC5zYXYsXG4gICAgICBhbGxJdGVtczoge1xuICAgICAgICBpbmM6IGFycmF5UmVhc3NpZ24oYWxsSXRlbXMuaW5jKSxcbiAgICAgICAgZXhwOiBhcnJheVJlYXNzaWduKGFsbEl0ZW1zLmV4cCksXG4gICAgICAgIHNhdjogYXJyYXlSZWFzc2lnbihhbGxJdGVtcy5zYXYpLFxuICAgICAgfSxcbiAgICB9XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmJ1ZGdldHMuZG9jKGlkKS51cGRhdGUoYnVkZ2V0RGF0YSlcbiAgICByZXR1cm4gcmVzcG9uc2VcbiAgfVxuXG4gIGdldEJ1ZGdldChjYikge1xuICAgIHRoaXMuYnVkZ2V0cy5vcmRlckJ5KCdjcmVhdGVkX2F0Jykub25TbmFwc2hvdCgoc25hcHNob3QpID0+IHtcbiAgICAgIHNuYXBzaG90LmRvY0NoYW5nZXMoKS5mb3JFYWNoKChjaGFuZ2UpID0+IHtcbiAgICAgICAgaWYgKGNoYW5nZS50eXBlID09PSAnYWRkZWQnKSB7XG4gICAgICAgICAgY2IoY2hhbmdlLmRvYy5kYXRhKCksIGNoYW5nZS5kb2MuaWQpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQYXN0QnVkZ2V0XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcGx1c3BsdXMgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLW11bHRpLWFzc2lnbiAqL1xuXG4vLyBBdm9pZCBgY29uc29sZWAgZXJyb3JzIGluIGJyb3dzZXJzIHRoYXQgbGFjayBhIGNvbnNvbGUuXG57XG4gIGxldCBtZXRob2RcbiAgY29uc3Qgbm9vcCA9ICgpID0+IHt9XG4gIGNvbnN0IG1ldGhvZHMgPSBbXG4gICAgJ2Fzc2VydCcsXG4gICAgJ2NsZWFyJyxcbiAgICAnY291bnQnLFxuICAgICdkZWJ1ZycsXG4gICAgJ2RpcicsXG4gICAgJ2RpcnhtbCcsXG4gICAgJ2Vycm9yJyxcbiAgICAnZXhjZXB0aW9uJyxcbiAgICAnZ3JvdXAnLFxuICAgICdncm91cENvbGxhcHNlZCcsXG4gICAgJ2dyb3VwRW5kJyxcbiAgICAnaW5mbycsXG4gICAgJ2xvZycsXG4gICAgJ21hcmtUaW1lbGluZScsXG4gICAgJ3Byb2ZpbGUnLFxuICAgICdwcm9maWxlRW5kJyxcbiAgICAndGFibGUnLFxuICAgICd0aW1lJyxcbiAgICAndGltZUVuZCcsXG4gICAgJ3RpbWVsaW5lJyxcbiAgICAndGltZWxpbmVFbmQnLFxuICAgICd0aW1lU3RhbXAnLFxuICAgICd0cmFjZScsXG4gICAgJ3dhcm4nLFxuICBdXG4gIGxldCB7IGxlbmd0aCB9ID0gbWV0aG9kc1xuICBjb25zdCBjb25zb2xlID0gKHdpbmRvdy5jb25zb2xlID0gd2luZG93LmNvbnNvbGUgfHwge30pXG5cbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgbWV0aG9kID0gbWV0aG9kc1tsZW5ndGhdXG5cbiAgICAvLyBPbmx5IHN0dWIgdW5kZWZpbmVkIG1ldGhvZHMuXG4gICAgaWYgKCFjb25zb2xlW21ldGhvZF0pIHtcbiAgICAgIGNvbnNvbGVbbWV0aG9kXSA9IG5vb3BcbiAgICB9XG4gIH1cbn1cblxuLy8gQWRkIHRhYmJpbmcgaW5kaWNhdG9yIHRvIHdpbmRvd1xuY29uc3QgaGFuZGxlRmlyc3RUYWIgPSAoZSkgPT4ge1xuICBpZiAoZS5rZXlDb2RlID09PSA5KSB7XG4gICAgLy8gdGhlIFwiSSBhbSBhIGtleWJvYXJkIHVzZXJcIiBrZXlcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3VzZXItaXMtdGFiYmluZycpXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVGaXJzdFRhYilcbiAgfVxufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUZpcnN0VGFiKVxuXG4vLyBBZGQgYSBicm93ZXIgaW5kaWNhdG9yIHRvIHRoZSBIVE1MIGVsZW1lbnQuXG5jb25zdCBodG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpXG5odG1sLnNldEF0dHJpYnV0ZSgnZGF0YS1icm93c2VyJywgYnJvd3Nlci5uYW1lKVxuXG4vLyBEZXRlY3QgaWYgbW9iaWxlIG9yIGRlc2t0b3AuXG5jb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpXG5cbmJyZWFrcG9pbnRzKHtcbiAgeGxhcmdlOiBbJzEyODFweCcsICcxNjgwcHgnXSxcbiAgbGFyZ2U6IFsnOTgxcHgnLCAnMTI4MHB4J10sXG4gIG1lZGl1bTogWyc3MzdweCcsICc5ODBweCddLFxuICBzbWFsbDogWyc0ODFweCcsICc3MzZweCddLFxuICB4c21hbGw6IFtudWxsLCAnNDgwcHgnXSxcbn0pXG5cbmlmIChicm93c2VyLm1vYmlsZSkge1xuICBib2R5LmNsYXNzTGlzdC5hZGQoJ2lzLW1vYmlsZScpXG59IGVsc2Uge1xuICBicmVha3BvaW50cy5vbignPm1lZGl1bScsICgpID0+IHtcbiAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLW1vYmlsZScpXG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKCdpcy1kZXNrdG9wJylcbiAgfSlcbiAgYnJlYWtwb2ludHMub24oJzw9bWVkaXVtJywgKCkgPT4ge1xuICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZGVza3RvcCcpXG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKCdpcy1tb2JpbGUnKVxuICB9KVxufVxuXG4vLyBMb2cgaWYgcnVubmluZyBpbiBsb2NhbGhvc3Qgd2hlbiBpbiBkZXZlbG9wbWVudCBtb2RlLlxuaWYgKFxuICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnICYmXG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbidcbikge1xuICBjb25zb2xlLmxvZygnbG9jYWxob3N0IGRldGVjdGVkIScpXG59XG5cbi8vIFJlYXNzaWduIGFuIGFycmF5IGFzIGFuIE9iamVjdFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnRcbmV4cG9ydCBjb25zdCBhcnJheVJlYXNzaWduID0gKGFyKSA9PiB7XG4gIHJldHVybiBhci5tYXAoKG9iaikgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItb2JqZWN0LXNwcmVhZFxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBvYmopXG4gIH0pXG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzICovXG5pbXBvcnQgeyBmb3JtYXQgfSBmcm9tICdkYXRlLWZucydcbmltcG9ydCBidWRnZXRDb250cm9sbGVyIGZyb20gJy4vYnVkZ2V0Y29udHJvbGxlcidcbmltcG9ydCBQYXN0QnVkZ2V0IGZyb20gJy4vcGFzdGJ1ZGdldCdcbmltcG9ydCB7IGFycmF5UmVhc3NpZ24gfSBmcm9tICcuL2hlbHBlcnMnXG5cbmNvbnN0IHBhc3RidWRnZXQgPSBuZXcgUGFzdEJ1ZGdldCgpXG5cbmNvbnN0IGZvcm1hdE51bWJlciA9IChudW1iZXIsIHR5cGUsIG1vbmV5ID0gZmFsc2UsIGNhbGMgPSB0cnVlKSA9PiB7XG4gIC8qKlxuICAgKiArIG9yIC0gYmVmb3JlIHRoZSBudW1iZXJcbiAgICogZXhhY3RseSAyIGRlY2ltYWwgcG9pbnRzXG4gICAqIGNvbW1hIHNlcGVyYXRpbmcgdGhlIHRob3VzYW5kc1xuICAgKlxuICAgKiAyMzEwLjQ1NjcgPSArIDIsMzEwLjQ2XG4gICAqL1xuICBsZXQgbnVtID0gTWF0aC5hYnMobnVtYmVyKVxuICBudW0gPSBudW0udG9GaXhlZCgyKVxuXG4gIGNvbnN0IG51bVNwbGl0ID0gbnVtLnNwbGl0KCcuJykgLy8gbm93IGEgc3RyaW5nIGFuZCB3aWxsIHNwbGl0IHRoZSAuIHRvIHJlcGxhY2Ugd2l0aCBhICxcbiAgbGV0IGludCA9IG51bVNwbGl0WzBdXG4gIGxldCBkZWNpbWFsID0gbnVtU3BsaXRbMV1cbiAgZGVjaW1hbCA9IE51bWJlcihkZWNpbWFsKSA+IDAgPyBgLiR7ZGVjaW1hbH1gIDogJydcblxuICBpZiAoaW50Lmxlbmd0aCA+IDMpIHtcbiAgICAvLyBzdWJzdHIgYWxsb3dzIGZvciBvbmx5IHBhcnQgb2YgdGhlIHN0cmluZyB0byBiZSB0YWtlblxuICAgIGludCA9IGAke2ludC5zdWJzdHIoMCwgaW50Lmxlbmd0aCAtIDMpfSwke2ludC5zdWJzdHIoaW50Lmxlbmd0aCAtIDMsIDMpfWAgLy8gaW5wdXQgMjMxMCwgb3V0cHV0IDIsMzEwXG4gIH1cblxuICBsZXQgc2lnblxuICBpZiAoY2FsYykge1xuICAgIHNpZ24gPVxuICAgICAgdHlwZSA9PT0gJ2V4cCdcbiAgICAgICAgPyAnPHNwYW4gY2xhc3M9XCJzaWduXCI+JiM0NTs8L3NwYW4+ICdcbiAgICAgICAgOiAnPHNwYW4gY2xhc3M9XCJzaWduXCI+JiM0Mzs8L3NwYW4+ICdcbiAgfSBlbHNlIHtcbiAgICBzaWduID0gJydcbiAgfVxuICBjb25zdCBjdXJyZW5jeSA9IG1vbmV5ID8gJzxzcGFuIGNsYXNzPVwiY3VycmVuY3lcIj4mcG91bmQ7PC9zcGFuPicgOiAnJ1xuXG4gIC8vIFJldHVybiB0aGUgZm9ybWF0dGVkIHN0cmluZ1xuICByZXR1cm4gYCR7c2lnbn0ke2N1cnJlbmN5fSR7aW50fSR7ZGVjaW1hbH1gXG59XG5cbi8vIEdyYWIgc2VhcmNoIHRlcm0gYW5kIGZpbHRlci5cbmNvbnN0IGZpbHRlclRlcm1zID0gKGVsLCB0ZXJtKSA9PiB7XG4gIEFycmF5LmZyb20oZWwuY2hpbGRyZW4pXG4gICAgLmZpbHRlcigoaXRlbSkgPT4gIWl0ZW0udGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0ZXJtKSlcbiAgICAuZm9yRWFjaCgoaXRlbSkgPT4gaXRlbS5jbGFzc0xpc3QuYWRkKCdmaWx0ZXJlZCcpKVxuICBBcnJheS5mcm9tKGVsLmNoaWxkcmVuKVxuICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0ZXJtKSlcbiAgICAuZm9yRWFjaCgoaXRlbSkgPT4gaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdmaWx0ZXJlZCcpKVxufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSBwcmVmZXItZGVzdHJ1Y3R1cmluZyAqL1xuY2xhc3MgVUlDb250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IoY29zdCwgZGVzY3JpcHRpb24sIHZhbHVlKSB7XG4gICAgdGhpcy5pbnB1dFR5cGUgPSBjb3N0XG4gICAgdGhpcy5pbnB1dERlc2MgPSBkZXNjcmlwdGlvblxuICAgIHRoaXMuaW5wdXRWYWwgPSB2YWx1ZVxuICB9XG5cbiAgZ2V0SW5wdXQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IHRoaXMuaW5wdXRUeXBlLnZhbHVlLCAvLyBXaWxsIGJlIGVpdGhlciBpbmMgb3IgZXhwXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5pbnB1dERlc2MudmFsdWUsXG4gICAgICB2YWx1ZTogTnVtYmVyKHRoaXMuaW5wdXRWYWwudmFsdWUpLFxuICAgIH1cbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXG4gIHJlbmRlcihvYmosIHR5cGUpIHtcbiAgICBjb25zdCBpdGVtID1cbiAgICAgIHR5cGUgPT09ICdleHAnID8gJ2V4cGVuc2VzJyA6IHR5cGUgPT09ICdzYXYnID8gJ3NhdmluZ3MnIDogJ2luY29tZSdcbiAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aXRlbX1fX2xpc3RgKVxuICAgIGxldCBodG1sXG5cbiAgICAvLyBDcmVhdGUgSFRNTCBzdHJpbmcgd2l0aCBwbGFjZWhvbGRlclxuICAgIGh0bWwgPSBgXG4gICAgPGxpIGNsYXNzPScke2l0ZW19X19pdGVtJyBpZD0nJHt0eXBlfS0ke29iai5pZH0nPlxuICAgICAgPGRpdiBjbGFzcz0naXRlbS1kZXNjJz48cD4ke29iai5kZXNjfTwvcD48L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJpdGVtc1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPSdpdGVtc19fdmFsdWUnPjxwPiR7Zm9ybWF0TnVtYmVyKFxuICAgICAgICAgIG9iai52YWwsXG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIGZhbHNlXG4gICAgICAgICl9PC9wPjwvZGl2PlxuICAgIGBcblxuICAgIGlmICh0eXBlID09PSAnZXhwJyB8fCB0eXBlID09PSAnc2F2Jykge1xuICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cIml0ZW1zX19wZXJjZW50XCI+PHA+MCYjMzc7PC9wPjwvZGl2PidcbiAgICB9XG5cbiAgICBodG1sICs9IGBcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz0nYnRuIGJ0bi0tY2xlYXIgaXRlbXNfX2RlbCc+XG4gICAgICAgICAgPHN2ZyBpZD1cImRlbGV0ZVwiIGNsYXNzPVwiaWNvblwiIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxuICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPVwiL2Fzc2V0cy9pbWFnZXMvaWNvbnMuc3ZnI2ljb24tZGVsZXRlXCI+PC91c2U+XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9saT5cbiAgICBgXG5cbiAgICAvLyBJbnNlcnQgSFRNTCBpbnRvIHRoZSBET01cbiAgICBsaXN0LmlubmVySFRNTCArPSBodG1sXG4gIH1cblxuICBsb2FkZWRSZW5kZXIoZGF0YSwgaWQpIHtcbiAgICBjb25zdCB7IGFsbEl0ZW1zIH0gPSBkYXRhXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hvc2VuLUlEJylcbiAgICBjb25zdCBsb2NhbERhdGEgPSBidWRnZXRDb250cm9sbGVyLmdldERhdGEoKVxuICAgIGNvbnN0IGJ1ZGdldERhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVkZ2V0X190aXRsZScpXG5cbiAgICBpZiAoaWQgPT09IGlucHV0LnZhbHVlKSB7XG4gICAgICAvLyBDaGFuZ2UgdGhlIGRhdGUgZm9yIHRoZSBhdmFpbGFibGUgYnVkZ2V0IGZyb20gdG9kYXkncyBkYXRlXG4gICAgICBjb25zdCBkYXRlID0gZGF0YS5jcmVhdGVkX2F0LnRvRGF0ZSgpXG4gICAgICBjb25zdCBwYXN0ID0gZm9ybWF0KG5ldyBEYXRlKGRhdGUpLCAnZG8gTU1NTSB5eXl5JylcbiAgICAgIGJ1ZGdldERhdGUudGV4dENvbnRlbnQgPSBgQXZhaWxhYmxlIGJ1ZGdldCBzYXZlZCBvbiAke3Bhc3R9YFxuXG4gICAgICAvLyBEaXNwbGF5IHRoZSBzYXZlZCBkYXRhXG4gICAgICB0aGlzLmRpc3BsYXlCdWRnZXQoZGF0YSlcbiAgICAgIHRoaXMuZGlzcGxheVBlcmNlbnRhZ2UoZGF0YS5wZXJjZW50RXhwLCAnZXhwJylcbiAgICAgIHRoaXMuZGlzcGxheVBlcmNlbnRhZ2UoZGF0YS5wZXJjZW50U2F2LCAnc2F2JylcblxuICAgICAgLy8gUHVzaCB0aGUgc2F2ZWQgRmlyZWJhc2UgZGF0YSB0byB0aGUgYnVkZ2V0Y29udHJvbGxlciBkYXRhIG9iamVjdFxuICAgICAgbG9jYWxEYXRhLmJ1ZGdldCA9IGRhdGEuYnVkZ2V0XG4gICAgICBsb2NhbERhdGEudG90YWxzLmluYyA9IGRhdGEudG90YWxJbmNcbiAgICAgIGxvY2FsRGF0YS50b3RhbHMuZXhwID0gZGF0YS50b3RhbEV4cFxuICAgICAgbG9jYWxEYXRhLnRvdGFscy5zYXYgPSBkYXRhLnRvdGFsU2F2XG4gICAgICBsb2NhbERhdGEucGVyY2VudC5leHAgPSBkYXRhLnBlcmNlbnRFeHBcbiAgICAgIGxvY2FsRGF0YS5wZXJjZW50LnNhdiA9IGRhdGEucGVyY2VudFNhdlxuXG4gICAgICAvLyBMb29wIHRocm91Z2ggdGhlIEZpcmViYXNlIGFsbEl0ZW1zIG9iamVjdCwgcmVuZGVyIGl0IGluIHRoZSBVSSBhbmQgcHVzaCB0byB0aGUgYnVkZ2V0Y29udHJvbGxlciBkYXRhIG9iamVjdFxuICAgICAgYWxsSXRlbXMuaW5jLmZvckVhY2goKGluYykgPT4ge1xuICAgICAgICB0aGlzLnJlbmRlcihpbmMsICdpbmMnKVxuICAgICAgICBidWRnZXRDb250cm9sbGVyLmFkZEl0ZW0oJ2luYycsIGluYy5kZXNjLCBpbmMudmFsKVxuICAgICAgfSlcbiAgICAgIGFsbEl0ZW1zLmV4cC5mb3JFYWNoKChleHApID0+IHtcbiAgICAgICAgdGhpcy5yZW5kZXIoZXhwLCAnZXhwJylcbiAgICAgICAgYnVkZ2V0Q29udHJvbGxlci5hZGRJdGVtKCdleHAnLCBleHAuZGVzYywgZXhwLnZhbClcbiAgICAgICAgdGhpcy51cGRhdGVQZXJjZW50YWdlcygnZXhwJylcbiAgICAgIH0pXG4gICAgICBhbGxJdGVtcy5zYXYuZm9yRWFjaCgoc2F2KSA9PiB7XG4gICAgICAgIHRoaXMucmVuZGVyKHNhdiwgJ3NhdicpXG4gICAgICAgIGJ1ZGdldENvbnRyb2xsZXIuYWRkSXRlbSgnc2F2Jywgc2F2LmRlc2MsIHNhdi52YWwpXG4gICAgICAgIHRoaXMudXBkYXRlUGVyY2VudGFnZXMoJ3NhdicpXG4gICAgICB9KVxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgLy8gaWQsXG4gICAgICAgICAgLy8gZGF0YS5idWRnZXQsXG4gICAgICAgICAgLy8gZGF0YS50b3RhbEluYyxcbiAgICAgICAgICAvLyBkYXRhLnRvdGFsRXhwLFxuICAgICAgICAgIC8vIGFsbEl0ZW1zLFxuICAgICAgICAgIC8vIGFsbEl0ZW1zLmhhc093blByb3BlcnR5KCdpbmMnKSxcbiAgICAgICAgICAvLyB0eXBlb2YgYWxsSXRlbXMuaW5jLFxuICAgICAgICAgIC8vIGFsbEl0ZW1zLmV4cCxcbiAgICAgICAgICBsb2NhbERhdGFcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldEJ1ZGdldChkYXRhKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJ1ZGdldDogZGF0YS5idWRnZXQsXG4gICAgICB0b3RhbEluYzogZGF0YS50b3RhbHMuaW5jLFxuICAgICAgdG90YWxFeHA6IGRhdGEudG90YWxzLmV4cCxcbiAgICAgIHRvdGFsU2F2OiBkYXRhLnRvdGFscy5zYXYsXG4gICAgICBwZXJjZW50RXhwOiBkYXRhLnBlcmNlbnQuZXhwLFxuICAgICAgcGVyY2VudFNhdjogZGF0YS5wZXJjZW50LnNhdixcbiAgICB9XG4gIH1cblxuICBkaXNwbGF5QnVkZ2V0KG9iaikge1xuICAgIGNvbnN0IHR5cGUgPSBvYmouYnVkZ2V0ID4gMCA/ICdpbmMnIDogJ2V4cCdcbiAgICBjb25zdCBidWRnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVkZ2V0X192YWx1ZScpXG4gICAgY29uc3QgaW5jID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmJ1ZGdldF9faW5jb21lIC5idWRnZXRfX2Ftb3VudGApXG4gICAgY29uc3QgZXhwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmJ1ZGdldF9fZXhwZW5zZXMgLmJ1ZGdldF9fYW1vdW50YClcbiAgICBjb25zdCBzYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuYnVkZ2V0X19zYXZpbmdzIC5idWRnZXRfX2Ftb3VudGApXG5cbiAgICBidWRnZXQuaW5uZXJIVE1MID0gZm9ybWF0TnVtYmVyKG9iai5idWRnZXQsIHR5cGUsIHRydWUpXG4gICAgaW5jLmlubmVySFRNTCA9IGZvcm1hdE51bWJlcihvYmoudG90YWxJbmMsICdpbmMnKVxuICAgIGV4cC5pbm5lckhUTUwgPSBmb3JtYXROdW1iZXIob2JqLnRvdGFsRXhwLCAnZXhwJylcbiAgICBzYXYuaW5uZXJIVE1MID0gZm9ybWF0TnVtYmVyKG9iai50b3RhbFNhdiwgJ2V4cCcpXG4gIH1cblxuICBkaXNwbGF5UGVyY2VudGFnZShwZXJjZW50YWdlLCB0eXBlKSB7XG4gICAgY29uc3QgdHlwZXMgPSB0eXBlID09PSAnZXhwJyA/ICdleHBlbnNlcycgOiAnc2F2aW5ncydcbiAgICBjb25zdCBwZXJjZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuYnVkZ2V0X18ke3R5cGVzfSAuYnVkZ2V0X19wZXJjZW50YWdlYFxuICAgIClcblxuICAgIGlmIChwZXJjZW50YWdlID4gMCkge1xuICAgICAgcGVyY2VudC5jbGFzc0xpc3QuYWRkKCdzaG93JylcbiAgICAgIHBlcmNlbnQuaW5uZXJIVE1MID0gYCR7cGVyY2VudGFnZX0mIzM3O2BcbiAgICB9IGVsc2Uge1xuICAgICAgcGVyY2VudC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93JylcbiAgICB9XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgY29uc29sZS5sb2cocGVyY2VudClcbiAgICB9XG4gIH1cblxuICB1cGRhdGVCdWRnZXQoKSB7XG4gICAgLy8gMS4gQ2hlY2sgbG9jYWxTdG9yYWdlIGZvciBzYXZlIGJ1ZGdldCBkYXRhLCBlbHNlIGdldCBuZXcgZGF0YVxuICAgIGNvbnN0IGdldERhdGEgPSBidWRnZXRDb250cm9sbGVyLmNhbGN1bGF0ZUJ1ZGdldCgpXG5cbiAgICAvLyAyLiBSZXR1cm4gdGhlIGJ1ZGdldFxuICAgIGNvbnN0IG5ld0J1ZGdldCA9IHRoaXMuZ2V0QnVkZ2V0KGdldERhdGEpXG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgY29uc29sZS5sb2cobmV3QnVkZ2V0KVxuICAgIH1cblxuICAgIC8vIDMuIERpc3BsYXkgdGhlIHVwZGF0ZWQgYnVkZ2V0XG4gICAgdGhpcy5kaXNwbGF5QnVkZ2V0KG5ld0J1ZGdldClcblxuICAgIC8vIDQuIERpc3BsYXkgdGhlIG5ldyBvdmVyYWxsIGJ1ZGdldCBwZXJjZW50YWdlXG4gICAgdGhpcy5kaXNwbGF5UGVyY2VudGFnZShuZXdCdWRnZXQucGVyY2VudEV4cCwgJ2V4cCcpXG4gICAgdGhpcy5kaXNwbGF5UGVyY2VudGFnZShuZXdCdWRnZXQucGVyY2VudFNhdiwgJ3NhdicpXG4gIH1cblxuICBkaXNwbGF5UGVyY2VudGFnZXMocGVyY2VudGFnZXMsIHR5cGUpIHtcbiAgICBjb25zdCB0eXBlcyA9IHR5cGUgPT09ICdleHAnID8gJ2V4cGVuc2VzJyA6ICdzYXZpbmdzJ1xuICAgIGNvbnN0IGZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke3R5cGVzfSAuaXRlbXNfX3BlcmNlbnRgKVxuICAgIGNvbnN0IG5vZGVMaXN0Rm9yRWFjaCA9IChsaXN0LCBjYikgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNiKGxpc3RbaV0sIGkpXG4gICAgICB9XG4gICAgfVxuICAgIG5vZGVMaXN0Rm9yRWFjaChmaWVsZHMsIChjdXJyZW50LCBpbmRleCkgPT4ge1xuICAgICAgaWYgKHBlcmNlbnRhZ2VzW2luZGV4XSA+IDApIHtcbiAgICAgICAgY3VycmVudC5jbGFzc0xpc3QuYWRkKCdzaG93JylcbiAgICAgICAgY3VycmVudC5pbm5lckhUTUwgPSBgJHtwZXJjZW50YWdlc1tpbmRleF19JiMzNztgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKVxuICAgICAgICBjdXJyZW50LmlubmVySFRNTCA9ICcwJiMzNzsnXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHVwZGF0ZVBlcmNlbnRhZ2VzKGRhdGEpIHtcbiAgICBjb25zdCBpbnB1dCA9IGRhdGEgfHwgdGhpcy5pbnB1dFR5cGUudmFsdWVcbiAgICAvLyAxLiBDYWx1bGF0ZSBwZXJjZW50YWdlc1xuICAgIGJ1ZGdldENvbnRyb2xsZXIuY2FsY3VsYXRlUGVyY2VudGFnZXMoaW5wdXQpXG5cbiAgICAvLyAyLiBSZWFkIHBlcmNlbnRhZ2VzIGZyb20gYnVkZ2V0IGNvbnRyb2xsZXJcbiAgICBjb25zdCBwZXJjZW50YWdlcyA9IGJ1ZGdldENvbnRyb2xsZXIuZ2V0UGVyY2VudGFnZXMoaW5wdXQpXG5cbiAgICAvLyAzLiBVcGRhdGUgVUkgdG8gc2hvdyBuZXcgcGVyY2VudGFnZXNcbiAgICB0aGlzLmRpc3BsYXlQZXJjZW50YWdlcyhwZXJjZW50YWdlcywgaW5wdXQpXG4gIH1cblxuICBkaXNwbGF5RGF0ZSgpIHtcbiAgICBjb25zdCBidWRnZXREYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1ZGdldF9fZGF0ZScpXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKClcbiAgICBjb25zdCBtb250aHMgPSBbXG4gICAgICAnSmFudWFyeScsXG4gICAgICAnRmVicnVhcnknLFxuICAgICAgJ01hcmNoJyxcbiAgICAgICdBcHJpbCcsXG4gICAgICAnTWF5JyxcbiAgICAgICdKdW5lJyxcbiAgICAgICdKdWx5JyxcbiAgICAgICdBdWd1c3QnLFxuICAgICAgJ1NlcGV0ZW1iZXInLFxuICAgICAgJ09jdG9iZXInLFxuICAgICAgJ05vdmVtYmVyJyxcbiAgICAgICdEZWNlbWJlcicsXG4gICAgXVxuICAgIGJ1ZGdldERhdGUudGV4dENvbnRlbnQgPSBgJHttb250aHNbZGF0ZS5nZXRNb250aCgpXX0gJHtkYXRlLmdldEZ1bGxZZWFyKCl9YFxuICB9XG5cbiAgY2hhbmdlVHlwZSgpIHtcbiAgICBjb25zdCB0eXBlID0gdGhpcy5pbnB1dFR5cGVcbiAgICBjb25zdCBjaGVjayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaGVjaycpXG5cbiAgICAvLyBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIC8vICAgY29uc29sZS5sb2coZmllbGRzKVxuICAgIC8vIH1cblxuICAgIHR5cGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSBBcnJheS5mcm9tKHR5cGUub3B0aW9ucylcblxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgdHlwZS5hdHRyaWJ1dGVzLFxuICAgICAgICAgIHR5cGUub3B0aW9ucyxcbiAgICAgICAgICB0eXBlLm9wdGlvbnMuc2VsZWN0ZWRJbmRleCxcbiAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgIG9wdGlvbnNbMV1cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBvcHRpb25zLmZvckVhY2goKG9wdGlvbikgPT4ge1xuICAgICAgICBpZiAob3B0aW9uLnNlbGVjdGVkKSB7XG4gICAgICAgICAgb3B0aW9uLnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKVxuICAgICAgICAgIGNoZWNrLmNsYXNzTGlzdC5yZW1vdmUoJ2V4cCcsICdzYXYnKVxuICAgICAgICAgIGlmIChvcHRpb24udmFsdWUgPT09ICdleHAnKSB7XG4gICAgICAgICAgICBjaGVjay5jbGFzc0xpc3QuYWRkKCdleHAnKVxuICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9uLnZhbHVlID09PSAnc2F2Jykge1xuICAgICAgICAgICAgY2hlY2suY2xhc3NMaXN0LmFkZCgnc2F2JylcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3B0aW9uLnJlbW92ZUF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFZhbHVlICR7b3B0aW9uLnZhbHVlfWApXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGRlbGV0ZUl0ZW0oKSB7XG4gICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmNvbWUtZXhwZW5zZXMnKVxuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgaWYgKGUudGFyZ2V0LmlkID09PSAnZGVsZXRlJykge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldC5jbG9zZXN0KCcuaXRlbXMnKS5wYXJlbnRFbGVtZW50XG4gICAgICAgIGNvbnN0IHNwbGl0SUQgPSB0YXJnZXQuaWQuc3BsaXQoJy0nKVxuICAgICAgICBjb25zdCB0eXBlID0gc3BsaXRJRFswXVxuICAgICAgICBjb25zdCBJRCA9IE51bWJlcihzcGxpdElEWzFdKVxuXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQsIHRhcmdldCwgc3BsaXRJRCwgdHlwZSwgSUQpXG4gICAgICAgIH1cblxuICAgICAgICAvLyAxLiBEZWxldGUgdGhlIGl0ZW0gZnJvbSB0aGUgZGF0YSBzdHJ1Y3R1cmVcbiAgICAgICAgYnVkZ2V0Q29udHJvbGxlci5yZW1vdmVJdGVtKHR5cGUsIElEKVxuXG4gICAgICAgIC8vIDIuIERlbGV0ZSB0aGUgaXRlbSBmcm9tIHRoZSBVSVxuICAgICAgICB0YXJnZXQucmVtb3ZlKClcblxuICAgICAgICAvLyAzLiBVcGRhdGUgYW5kIHNob3cgdGhlIG5ldyBidWRnZXRcbiAgICAgICAgdGhpcy51cGRhdGVCdWRnZXQoKVxuXG4gICAgICAgIC8vIDQuIFVwZGF0ZSBhbmQgc2hvdyB0aGUgbmV3IHBlcmNlbnRhZ2VzXG4gICAgICAgIHRoaXMudXBkYXRlUGVyY2VudGFnZXMoKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBzYXZpbmcoKSB7XG4gICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NhdmUnKVxuICAgIGNvbnN0IGRhdGEgPSBidWRnZXRDb250cm9sbGVyLmdldERhdGEoKVxuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIC8vIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0ZS1saXN0JylcbiAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nob3Nlbi1JRCcpXG4gICAgICBjb25zdCBJRCA9IGlucHV0LnZhbHVlIHx8IG51bGxcbiAgICAgIGxldCBzZWxlY3RlZCA9IGZhbHNlXG5cbiAgICAgIC8vIEFycmF5LmZyb20obGlzdC5jaGlsZHJlbikuZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgIC8vICAgaWYgKGNoaWxkLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgLy8gICAgIC8vIElEID0gY2hpbGQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJylcbiAgICAgIC8vICAgICBzZWxlY3RlZCA9IHRydWVcbiAgICAgIC8vICAgfVxuICAgICAgLy8gfSlcblxuICAgICAgaWYgKGlucHV0LmNsYXNzTGlzdC5jb250YWlucygnY2hvc2VuJykpIHtcbiAgICAgICAgc2VsZWN0ZWQgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEsIGRhdGEuYWxsSXRlbXMuaW5jLCBJRClcbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGVjdGVkICYmIElEKSB7XG4gICAgICAgIHBhc3RidWRnZXRcbiAgICAgICAgICAudXBkYXRlQnVkZ2V0KGRhdGEsIElEKVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1cGRhdGVkJylcbiAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdVcGRhdGVkJ1xuICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi0tZ2hvc3QnKVxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdTYXZlJ1xuICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuLS1naG9zdCcpXG4gICAgICAgICAgICB9LCAyMDAwKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXN0YnVkZ2V0XG4gICAgICAgICAgLnNhdmVCdWRnZXQoZGF0YSlcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2F2ZWQnKVxuICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1NhdmVkJ1xuICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi0tZ2hvc3QnKVxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdTYXZlJ1xuICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuLS1naG9zdCcpXG4gICAgICAgICAgICB9LCAyMDAwKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIHNhdmluZygpIHtcbiAgLy8gICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2F2ZScpXG4gIC8vICAgY29uc3QgZGF0YSA9IGJ1ZGdldENvbnRyb2xsZXIuZ2V0RGF0YSgpXG4gIC8vICAgY29uc3Qgbm93ID0gZm9ybWF0KG5ldyBEYXRlKCksICdkZC9NTS95eXl5JylcbiAgLy8gICBjb25zdCBpdGVtcyA9IFtdXG4gIC8vICAgbGV0IGZvdW5kID0gZmFsc2VcblxuICAvLyAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgLy8gICAgIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0ZS1saXN0ID4gbGknKVxuICAvLyAgICAgY29uc3QgbGlzdEl0ZW1zID0gQXJyYXkuZnJvbShsaXN0KVxuICAvLyAgICAgbGlzdEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgLy8gICAgICAgaXRlbXMucHVzaCh7IGRhdGU6IGl0ZW0udGV4dENvbnRlbnQsIGlkOiBpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpIH0pXG4gIC8vICAgICB9KVxuICAvLyAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgLy8gICAgICAgY29uc29sZS5sb2coZGF0YSwgZGF0YS5hbGxJdGVtcy5pbmMsIGl0ZW1zKVxuICAvLyAgICAgfVxuICAvLyAgICAgLy8gQ2hlY2sgaWYgaXRlbXMgYXJyYXkgaGFzIHRoZSBjdXJyZW50IGRhdGVcbiAgLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgLy8gICAgICAgaWYgKGl0ZW1zW2ldLmRhdGUgPT09IG5vdykge1xuICAvLyAgICAgICAgIGZvdW5kID0gdHJ1ZVxuICAvLyAgICAgICAgIGJyZWFrXG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH1cblxuICAvLyAgICAgLy8gVXBkYXRlIGJ1ZGdldCBpZiBpdCBhbHJlYWR5IGV4aXN0cyBvciBzYXZlIGEgbmV3IGJ1ZGdldFxuICAvLyAgICAgaWYgKGZvdW5kKSB7XG4gIC8vICAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgLy8gICAgICAgICBpZiAoaXRlbS5kYXRlID09PSBub3cpIHtcbiAgLy8gICAgICAgICAgIHBhc3RidWRnZXRcbiAgLy8gICAgICAgICAgICAgLnVwZGF0ZUJ1ZGdldChkYXRhLCBpdGVtLmlkKVxuICAvLyAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gIC8vICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VwZGF0ZWQnKVxuICAvLyAgICAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdVcGRhdGVkJ1xuICAvLyAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdidG4tLWdob3N0JylcbiAgLy8gICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgLy8gICAgICAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdTYXZlJ1xuICAvLyAgICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bi0tZ2hvc3QnKVxuICAvLyAgICAgICAgICAgICAgIH0sIDQwMDApXG4gIC8vICAgICAgICAgICAgIH0pXG4gIC8vICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gIC8vICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gIC8vICAgICAgICAgICAgIH0pXG4gIC8vICAgICAgICAgfVxuICAvLyAgICAgICB9KVxuICAvLyAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCdoYXMgdG9kYXlzIGRhdGUnKVxuICAvLyAgICAgICB9XG4gIC8vICAgICB9IGVsc2Uge1xuICAvLyAgICAgICBwYXN0YnVkZ2V0XG4gIC8vICAgICAgICAgLnNhdmVCdWRnZXQoZGF0YSlcbiAgLy8gICAgICAgICAudGhlbigoKSA9PiB7XG4gIC8vICAgICAgICAgICBjb25zb2xlLmxvZygnc2F2ZWQnKVxuICAvLyAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1NhdmVkJ1xuICAvLyAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi0tZ2hvc3QnKVxuICAvLyAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gIC8vICAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdTYXZlJ1xuICAvLyAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuLS1naG9zdCcpXG4gIC8vICAgICAgICAgICB9LCA0MDAwKVxuICAvLyAgICAgICAgIH0pXG4gIC8vICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgLy8gICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAvLyAgICAgICAgIH0pXG4gIC8vICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIC8vICAgICAgICAgY29uc29sZS5sb2coJ2RvZXMgbm90IGhhdmUgdG9kYXlzIGRhdGUnKVxuICAvLyAgICAgICB9XG4gIC8vICAgICB9XG4gIC8vICAgfSlcbiAgLy8gfVxuXG4gIHN0eWxlZERyb3Bkb3duKCkge1xuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nob3Nlbi1kYXRlJylcbiAgICBjb25zdCBpbnB1dElEID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nob3Nlbi1JRCcpXG4gICAgY29uc3QgZHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0ZS1saXN0JylcblxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4ge1xuICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSAnVHlwZSB0byBmaWx0ZXInXG4gICAgICBkcm9wZG93bi5jbGFzc0xpc3QuYWRkKCdvcGVuJylcbiAgICB9KVxuXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IHtcbiAgICAgIGRyb3Bkb3duLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKVxuICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSAnQ2hvb3NlIGEgZGF0ZSdcbiAgICB9KVxuXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgY29uc3QgdGVybSA9IGlucHV0LnZhbHVlLnRyaW0oKS50b0xvd2VyQ2FzZSgpXG4gICAgICBmaWx0ZXJUZXJtcyhkcm9wZG93biwgdGVybSlcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBjb25zb2xlLmxvZyhlKVxuICAgIH0pXG5cbiAgICBkcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgY29uc29sZS5sb2coZSwgZS50YXJnZXQpXG4gICAgICBpbnB1dElELmNsYXNzTGlzdC5hZGQoJ2Nob3NlbicpXG4gICAgICBBcnJheS5mcm9tKGRyb3Bkb3duLmNoaWxkcmVuKS5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICBjaGlsZC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpXG4gICAgICB9KVxuICAgICAgaWYgKGUudGFyZ2V0LnRhZ05hbWUgPT09ICdMSScpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0VHh0ID0gZS50YXJnZXQudGV4dENvbnRlbnRcbiAgICAgICAgY29uc3QgdGFyZ2V0SUQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKVxuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgdGFyZ2V0VHh0KVxuICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHRhcmdldFR4dFxuICAgICAgICBpbnB1dElELnNldEF0dHJpYnV0ZSgndmFsdWUnLCB0YXJnZXRJRClcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBMb2FkZWQoKSB7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkLWJ1ZGdldHMnKVxuICAgIGNvbnN0IGxvY2FsRGF0YSA9IGJ1ZGdldENvbnRyb2xsZXIuZ2V0RGF0YSgpXG4gICAgY29uc3QgbGlzdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgJy5pbmNvbWVfX2xpc3QnLFxuICAgICAgJy5leHBlbnNlc19fbGlzdCcsXG4gICAgICAnLnNhdmluZ3NfX2xpc3QnXG4gICAgKVxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgLy8gaWYgKGxpc3RzLmNoaWxkcmVuID4gMCkge1xuICAgICAgLy8gICBsb2NhbERhdGEuYWxsSXRlbXMuaW5jID0gW11cbiAgICAgIC8vICAgbG9jYWxEYXRhLmFsbEl0ZW1zLmV4cCA9IFtdXG4gICAgICAvLyAgIGxvY2FsRGF0YS5hbGxJdGVtcy5zYXYgPSBbXVxuXG4gICAgICAvLyB9XG4gICAgICBBcnJheS5mcm9tKGxpc3RzKS5mb3JFYWNoKChsaXN0KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGxpc3QpXG4gICAgICAgIGNvbnNvbGUubG9nKGxpc3QuY2hpbGRyZW4pXG4gICAgICB9KVxuICAgICAgcGFzdGJ1ZGdldC5nZXRCdWRnZXQoKGRhdGEsIGlkKSA9PiB0aGlzLmxvYWRlZFJlbmRlcihkYXRhLCBpZCkpXG4gICAgICBmb3JtLnJlc2V0KClcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGxpc3RzKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhsb2NhbERhdGEpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGxvYWRpbmcoKSB7XG4gICAgY29uc3QgZHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0ZS1saXN0JylcbiAgICBjb25zdCBkcm9wZG93bkxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0ZS1saXN0IGxpJylcblxuICAgIC8vIEdldCBzYXZlZCBlbnRyeSBkYXRlcyBmcm9tIEZpcmViYXNlXG4gICAgcGFzdGJ1ZGdldC5nZXRCdWRnZXQoKGJ1ZGdldHMsIGlkKSA9PiB7XG4gICAgICBjb25zdCBkYXRlID0gYnVkZ2V0cy5jcmVhdGVkX2F0LnRvRGF0ZSgpXG4gICAgICBpZiAoZGF0ZSkge1xuICAgICAgICBjb25zdCB3aGVuID0gZm9ybWF0KG5ldyBEYXRlKGRhdGUpLCAnZGQvTU0veXl5eScpXG4gICAgICAgIGNvbnN0IGxpc3QgPSBgPGxpIGNsYXNzPVwiZGF0ZS1saXN0X19pdGVtXCIgZGF0YS1pZD1cIiR7aWR9XCI+JHt3aGVufTwvbGk+YFxuICAgICAgICBpZiAoZHJvcGRvd25MaXN0LnRleHRDb250ZW50ID09PSAnTm8gc2F2ZWQgZGF0ZXMnKSBkcm9wZG93bkxpc3QucmVtb3ZlKClcbiAgICAgICAgZHJvcGRvd24uaW5uZXJIVE1MICs9IGxpc3RcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gQWRkIGZ1bmN0aW9uYWxpdHkgdG8gZHJvcGRvd24gc2VhcmNoXG4gICAgdGhpcy5zdHlsZWREcm9wZG93bigpXG4gICAgLy8gTG9hZCB0aGUgZGF0YSBmcm9tIEZpcmViYXNlIG9uY2UgZGF0ZSBpcyBjaG9zZW5cbiAgICB0aGlzLkxvYWRlZCgpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVUlDb250cm9sbGVyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IGJyZWFrcG9pbnRzOyIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cblxuLy8gRXh0ZXJuYWxcbmltcG9ydCAnYWlyYm5iLWJyb3dzZXItc2hpbXMnXG5cbi8vIEludGVybmFsXG5pbXBvcnQgJy4vbW9kdWxlcy9oZWxwZXJzJ1xuaW1wb3J0IGJ1ZGdldENvbnRyb2xsZXIgZnJvbSAnLi9tb2R1bGVzL2J1ZGdldGNvbnRyb2xsZXInXG5pbXBvcnQgVUlDb250cm9sbGVyIGZyb20gJy4vbW9kdWxlcy91aWNvbnRyb2xsZXInXG5pbXBvcnQgUGFzdEJ1ZGdldCBmcm9tICcuL21vZHVsZXMvcGFzdGJ1ZGdldCdcblxuLy8gUmVtb3ZlIGxvYWRpbmcgY2xhc3MgZnJvbSBib2R5IG9uIHdpbmRvdyBsb2FkLlxuY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKVxuXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xuICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1sb2FkaW5nJylcbiAgfSwgMTAwKVxufVxuXG4vLyBDcmVhdGUgdGhlIG1haW4gY29udHJvbGxlciBmb3IgdGhlIGFwcFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG5jb25zdCBjb250cm9sbGVyID0gKChidWRnZXRDdHJsKSA9PiB7XG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkX19mb3JtJylcbiAgY29uc3QgdHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGRfX3R5cGUnKVxuICBjb25zdCBkZXNjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZF9fZGVzY3JpcHRpb24nKVxuICBjb25zdCB2YWx1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGRfX3ZhbHVlJylcblxuICBjb25zdCBVSUN0cmwgPSBuZXcgVUlDb250cm9sbGVyKHR5cGUsIGRlc2MsIHZhbHVlKVxuICBjb25zdCBwYXN0YnVkZ2V0ID0gbmV3IFBhc3RCdWRnZXQoKVxuXG4gIC8vIFNob2UgdGhlIGxhdGVzdCBkYXRlXG4gIFVJQ3RybC5kaXNwbGF5RGF0ZSgpXG5cbiAgLy8gVG9nZ2xlIHRoZSBzdWJtaXQgbmV3IGNvc3QgZnJvbSBlaXRoZXIgaW5jb21lIG9yIGV4cGVuc2UuXG4gIFVJQ3RybC5jaGFuZ2VUeXBlKClcblxuICAvLyBMb2FkIGJ1ZGdldHMgZnJvbSBGaXJlYmFzZVxuICBVSUN0cmwubG9hZGluZygpXG5cbiAgLy8gU2F2ZSBidWRnZXRzIHRvIEZpcmViYXNlXG4gIFVJQ3RybC5zYXZpbmcoKVxuXG4gIGNvbnN0IHRlc3QgPSBidWRnZXRDdHJsLmdldERhdGEoKVxuICBjb25zdCB7IGluYyB9ID0gdGVzdC5hbGxJdGVtc1xuXG4gIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcblxuICAgIC8vIEdldCBmaWxlZCBpbnB1dCBkYXRhXG4gICAgY29uc3QgaW5wdXQgPSBVSUN0cmwuZ2V0SW5wdXQoKVxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmxvZyhpbnB1dClcbiAgICAgIGNvbnNvbGUubG9nKHR5cGVvZiBpbnB1dC52YWx1ZSlcbiAgICB9XG5cbiAgICAvLyBDbGVhciB0aGUgZm9ybSBmaWVsZHNcbiAgICBmb3JtLnJlc2V0KClcblxuICAgIC8vIE9ubHkgcnVuIGNhbGN1bGF0aW9ucyBpZiB2YWxpZCBpbnB1dHMgYXJlIGVudGVyZWRcbiAgICBpZiAoaW5wdXQuZGVzYyAhPT0gJycgJiYgIWlzTmFOKGlucHV0LnZhbHVlKSAmJiBpbnB1dC52YWx1ZSA+IDApIHtcbiAgICAgIC8vIEFkZCB0aGUgaXRlbSB0byB0aGUgYnVkZ2V0XG4gICAgICBjb25zdCBuZXdJdGVtID0gYnVkZ2V0Q3RybC5hZGRJdGVtKFxuICAgICAgICBpbnB1dC50eXBlLFxuICAgICAgICBpbnB1dC5kZXNjcmlwdGlvbixcbiAgICAgICAgaW5wdXQudmFsdWVcbiAgICAgIClcblxuICAgICAgLy8gQ2FsY3VsYWUgdGhlIGJ1ZGdldCBhbmQgdXBkYXRlIHRoZSBVSVxuICAgICAgVUlDdHJsLnJlbmRlcihuZXdJdGVtLCBpbnB1dC50eXBlKSAvLyBBZGQgaXRlbXMgdG8gaW5jb21lIG9yIGV4cGVuc2VzIGxpc3RcbiAgICAgIFVJQ3RybC51cGRhdGVCdWRnZXQoKSAvLyBPdXRwdXQgdGhlIG5ldyBidWRnZXRcbiAgICAgIFVJQ3RybC51cGRhdGVQZXJjZW50YWdlcygpIC8vIE91dHB1dCB0aGUgbmV3IHBlcmNlbnRhZ2VzXG5cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdmb3JtIHN1Ym1pdHRlZCEnKVxuICAgICAgICBjb25zb2xlLmxvZyhuZXdJdGVtKVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhpbmMpXG4gIH0pXG4gIC8vIERlbGV0ZSBhbiBhZGRlZCBpbmNvbWUgb3IgZXhwZW5zZVxuICBVSUN0cmwuZGVsZXRlSXRlbSgpXG5cbiAgcGFzdGJ1ZGdldC5nZXRCdWRnZXQoKGRhdGEsIGlkKSA9PiB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEsIGlkKVxuICAgIH1cbiAgfSlcbn0pKGJ1ZGdldENvbnRyb2xsZXIpXG4iLCJtb2R1bGUuZXhwb3J0cyA9IGJyb3dzZXI7IiwiY29uc3QgYnVkZ2V0Q29udHJvbGxlciA9ICgoKSA9PiB7XG4gIGNsYXNzIEJ1ZGdldCB7XG4gICAgY29uc3RydWN0b3IoaWQsIGRlc2NyaXB0aW9uLCB2YWx1ZSkge1xuICAgICAgdGhpcy5pZCA9IGlkXG4gICAgICB0aGlzLmRlc2MgPSBkZXNjcmlwdGlvblxuICAgICAgdGhpcy52YWwgPSB2YWx1ZVxuICAgICAgdGhpcy5wZXJjZW50YWdlID0gLTFcbiAgICB9XG5cbiAgICBjYWxjUGVyY2VudGFnZSh0b3RhbEluY29tZSkge1xuICAgICAgaWYgKHRvdGFsSW5jb21lID4gMCkge1xuICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSBNYXRoLnJvdW5kKCh0aGlzLnZhbCAvIHRvdGFsSW5jb21lKSAqIDEwMClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGVyY2VudGFnZSA9IC0xXG4gICAgICB9XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgdGhpcyB2YWx1ZSBpcyAke3R5cGVvZiB0aGlzLnZhbH1gLFxuICAgICAgICAgIGB0aGUgdG90YWxJbmNvbWUgJHt0eXBlb2YgdG90YWxJbmNvbWV9YFxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgZ2V0UGVyY2VudGFnZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLnBlcmNlbnRhZ2VcbiAgICB9XG4gIH1cblxuICBjb25zdCBkYXRhID0ge1xuICAgIGFsbEl0ZW1zOiB7XG4gICAgICBleHA6IFtdLFxuICAgICAgaW5jOiBbXSxcbiAgICAgIHNhdjogW10sXG4gICAgfSxcbiAgICB0b3RhbHM6IHtcbiAgICAgIGV4cDogMCxcbiAgICAgIGluYzogMCxcbiAgICAgIHNhdjogMCxcbiAgICB9LFxuICAgIHBlcmNlbnQ6IHtcbiAgICAgIGV4cDogLTEsXG4gICAgICBzYXY6IC0xLFxuICAgIH0sXG4gICAgYnVkZ2V0OiAwLFxuICB9XG5cbiAgY29uc3QgY2FsY3VsYXRlVG90YWxzID0gKHR5cGUpID0+IHtcbiAgICBsZXQgc3VtID0gMFxuICAgIGRhdGEuYWxsSXRlbXNbdHlwZV0uZm9yRWFjaCgoY3VyKSA9PiB7XG4gICAgICBzdW0gKz0gY3VyLnZhbFxuICAgIH0pXG4gICAgZGF0YS50b3RhbHNbdHlwZV0gPSBzdW1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYWRkSXRlbTogKHR5cGUsIGRlc2MsIHZhbCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIG5ldyBJRFxuICAgICAgY29uc3QgSUQgPVxuICAgICAgICBkYXRhLmFsbEl0ZW1zW3R5cGVdLmxlbmd0aCA+IDBcbiAgICAgICAgICA/IGRhdGEuYWxsSXRlbXNbdHlwZV1bZGF0YS5hbGxJdGVtc1t0eXBlXS5sZW5ndGggLSAxXS5pZCArIDFcbiAgICAgICAgICA6IDBcblxuICAgICAgLy8gU2V0IG5ldyBpdGVtIHRvIHVzZSBvYmplY3RcbiAgICAgIGNvbnN0IG5ld0l0ZW0gPSBuZXcgQnVkZ2V0KElELCBkZXNjLCB2YWwpXG5cbiAgICAgIC8vIFB1c2ggaXQgaW50byBkYXRhIHN0cnVjdHVyZVxuICAgICAgZGF0YS5hbGxJdGVtc1t0eXBlXS5wdXNoKG5ld0l0ZW0pXG5cbiAgICAgIC8vIGNyZWF0ZSBuZXcgaXRlbVxuICAgICAgcmV0dXJuIG5ld0l0ZW1cbiAgICB9LFxuICAgIGNhbGN1bGF0ZUJ1ZGdldDogKCkgPT4ge1xuICAgICAgLy8gMS4gQ2FsY3VsYXRlIHRoZSBidWRnZXRcbiAgICAgIGNhbGN1bGF0ZVRvdGFscygnZXhwJylcbiAgICAgIGNhbGN1bGF0ZVRvdGFscygnaW5jJylcbiAgICAgIGNhbGN1bGF0ZVRvdGFscygnc2F2JylcblxuICAgICAgLy8gMi4gQ2FsY3VsYXRlIHRoZSBidWRnZXQ6IGluY29tZSAtIGV4cGVuc2VzXG4gICAgICBkYXRhLmJ1ZGdldCA9IGRhdGEudG90YWxzLmluYyAtIChkYXRhLnRvdGFscy5leHAgKyBkYXRhLnRvdGFscy5zYXYpXG5cbiAgICAgIC8vIDMuIENhbGN1bGF0ZSB0aGUgcGVyY2VudGFnZSBvZiBpbmNvbWUgdGhhdCB3ZSBzcGVudFxuICAgICAgaWYgKGRhdGEudG90YWxzLmluYyA+IDApIHtcbiAgICAgICAgZGF0YS5wZXJjZW50LmV4cCA9IE1hdGgucm91bmQoKGRhdGEudG90YWxzLmV4cCAvIGRhdGEudG90YWxzLmluYykgKiAxMDApXG4gICAgICAgIGRhdGEucGVyY2VudC5zYXYgPSBNYXRoLnJvdW5kKChkYXRhLnRvdGFscy5zYXYgLyBkYXRhLnRvdGFscy5pbmMpICogMTAwKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YS5wZXJjZW50LmV4cCA9IC0xXG4gICAgICAgIGRhdGEucGVyY2VudC5zYXYgPSAtMVxuICAgICAgfVxuXG4gICAgICAvLyAzLiBSZXR1cm4gdGhlIGJ1ZGdldFxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YS50b3RhbHMuZXhwLCBkYXRhLnRvdGFscy5pbmMpXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEuYnVkZ2V0LCBkYXRhLnBlcmNlbnQuZXhwLCBkYXRhLnBlcmNlbnQuc2F2KVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YVxuICAgIH0sXG4gICAgY2FsY3VsYXRlUGVyY2VudGFnZXM6ICh0eXBlKSA9PiB7XG4gICAgICBkYXRhLmFsbEl0ZW1zW3R5cGVdLmZvckVhY2goKGN1cikgPT4ge1xuICAgICAgICBjdXIuY2FsY1BlcmNlbnRhZ2UoZGF0YS50b3RhbHMuaW5jKVxuICAgICAgfSlcbiAgICB9LFxuICAgIGdldFBlcmNlbnRhZ2VzOiAodHlwZSkgPT4ge1xuICAgICAgY29uc3QgYWxsUGVyYyA9IGRhdGEuYWxsSXRlbXNbdHlwZV0ubWFwKChjdXIpID0+IHtcbiAgICAgICAgcmV0dXJuIGN1ci5nZXRQZXJjZW50YWdlKClcbiAgICAgIH0pXG4gICAgICByZXR1cm4gYWxsUGVyY1xuICAgIH0sXG4gICAgcmVtb3ZlSXRlbTogKHR5cGUsIGlkKSA9PiB7XG4gICAgICBjb25zdCBpZHMgPSBkYXRhLmFsbEl0ZW1zW3R5cGVdLm1hcCgoY3VycmVudCkgPT4ge1xuICAgICAgICByZXR1cm4gY3VycmVudC5pZFxuICAgICAgfSlcbiAgICAgIGNvbnN0IGluZGV4ID0gaWRzLmluZGV4T2YoaWQpXG5cbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgZGF0YS5hbGxJdGVtc1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICB9XG4gICAgfSxcbiAgICBnZXREYXRhOiAoKSA9PiB7XG4gICAgICByZXR1cm4gZGF0YVxuICAgIH0sXG4gIH1cbn0pKClcblxuZXhwb3J0IGRlZmF1bHQgYnVkZ2V0Q29udHJvbGxlclxuIl0sInNvdXJjZVJvb3QiOiIifQ==