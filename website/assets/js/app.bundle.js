(window.webpackJsonp=window.webpackJsonp||[]).push([["app"],{"+4zn":function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),o=n.n(a),s=n("yXPU"),c=n.n(s),i=n("lwsE"),l=n.n(i),r=n("W8MJ"),u=n.n(r),d=function(e){return e.map((function(e){return Object.assign({},e)}))},p=function(){function e(){l()(this,e),this.budgets=db.collection("budgets")}var t,n;return u()(e,[{key:"saveBudget",value:(n=c()(o.a.mark((function e(t){var n,a,s,c,i,l,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date,a=t.allItems,s=t.budget,c=t.percent,i=t.totals,l={budget:s,totalInc:i.inc,totalExp:i.exp,totalSav:i.sav,percentExp:c.exp,percentSav:c.sav,allItems:{inc:d(a.inc),exp:d(a.exp),sav:d(a.sav)},created_at:firebase.firestore.Timestamp.fromDate(n)},e.next=5,this.budgets.add(l);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"updateBudget",value:(t=c()(o.a.mark((function e(t,n){var a,s,c,i,l,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.allItems,s=t.budget,c=t.percent,i=t.totals,l={budget:s,totalInc:i.inc,totalExp:i.exp,totalSav:i.sav,percentExp:c.exp,percentSav:c.sav,allItems:{inc:d(a.inc),exp:d(a.exp),sav:d(a.sav)}},e.next=4,this.budgets.doc(n).update(l);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"getBudget",value:function(e){this.budgets.orderBy("created_at").onSnapshot((function(t){t.docChanges().forEach((function(t){"added"===t.type&&e(t.doc.data(),t.doc.id)}))}))}}]),e}();t.default=p},0:function(e,t,n){e.exports=n("kFay")},1:function(e,t){},E4hX:function(e,t,n){(function(e,t){for(var n,a=function(){},o=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],s=o.length,c=window.console=window.console||{};s--;)c[n=o[s]]||(c[n]=a);window.addEventListener("keydown",(function e(t){9===t.keyCode&&(document.body.classList.add("user-is-tabbing"),window.removeEventListener("keydown",e))})),document.querySelector("html").setAttribute("data-browser",e.name);var i=document.querySelector("body");t({xlarge:["1281px","1680px"],large:["981px","1280px"],medium:["737px","980px"],small:["481px","736px"],xsmall:[null,"480px"]}),e.mobile?i.classList.add("is-mobile"):(t.on(">medium",(function(){i.classList.remove("is-mobile"),i.classList.add("is-desktop")})),t.on("<=medium",(function(){i.classList.remove("is-desktop"),i.classList.add("is-mobile")}))),"localhost"===window.location.hostname&&console.log("localhost detected!")}).call(this,n("txRt"),n("a6Qp"))},SEKM:function(e,t,n){"use strict";n.r(t);var a=n("lwsE"),o=n.n(a),s=n("W8MJ"),c=n.n(s),i=n("b/SL"),l=n("xVb/"),r=new(n("+4zn").default),u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=Math.abs(e),s=(o=o.toFixed(2)).split("."),c=s[0],i=s[1];i=Number(i)>0?".".concat(i):"",c.length>3&&(c="".concat(c.substr(0,c.length-3),",").concat(c.substr(c.length-3,3)));var l=n?'<span class="currency">&pound;</span>':"";return"".concat(a?"exp"===t?'<span class="sign">&#45;</span> ':'<span class="sign">&#43;</span> ':"").concat(l).concat(c).concat(i)},d=function(){function e(t,n,a){o()(this,e),this.inputType=t,this.inputDesc=n,this.inputVal=a}return c()(e,[{key:"getInput",value:function(){return{type:this.inputType.value,description:this.inputDesc.value,value:Number(this.inputVal.value)}}},{key:"render",value:function(e,t){var n,a="exp"===t?"expenses":"sav"===t?"savings":"income",o=document.querySelector(".".concat(a,"__list"));n="\n    <li class='".concat(a,"__item' id='").concat(t,"-").concat(e.id,"'>\n      <div class='item-desc'><p>").concat(e.desc,"</p></div>\n      <div class=\"items\">\n        <div class='items__value'><p>").concat(u(e.val,t,!0,!1),"</p></div>\n    "),"exp"!==t&&"sav"!==t||(n+='<div class="items__percent"><p>0&#37;</p></div>'),n+='\n        <button class=\'btn btn--clear items__del\'>\n          <svg id="delete" class="icon" width="20" height="20" aria-hidden="true">\n            <use xlink:href="/assets/images/icons.svg#icon-delete"></use>\n          </svg>\n        </button>\n      </div>\n    </li>\n    ',o.innerHTML+=n}},{key:"getBudget",value:function(e){return{budget:e.budget,totalInc:e.totals.inc,totalExp:e.totals.exp,totalSav:e.totals.sav,percentExp:e.percent.exp,percentSav:e.percent.sav}}},{key:"displayBudget",value:function(e){var t=e.budget>0?"inc":"exp",n="exp"===t?"expenses":"income",a=document.querySelector(".budget__value"),o=document.querySelector(".budget__income .budget__amount"),s=document.querySelector(".budget__expenses .budget__amount"),c=document.querySelector(".budget__savings .budget__amount");a.innerHTML=u(e.budget,t,!0),o.innerHTML=u(e.totalInc,"inc"),s.innerHTML=u(e.totalExp,"exp"),c.innerHTML=u(e.totalSav,"exp"),console.log("The ".concat(n," is/are ").concat(e.budget)),console.log(o,s)}},{key:"displayPercentage",value:function(e,t){var n="exp"===t?"expenses":"savings",a=document.querySelector(".budget__".concat(n," .budget__percentage"));e>0?(a.classList.add("show"),a.innerHTML="".concat(e,"&#37;")):a.classList.remove("show"),console.log(a)}},{key:"updateBudget",value:function(){var e=l.default.calculateBudget(),t=this.getBudget(e);console.log(t),this.displayBudget(t),this.displayPercentage(t.percentExp,"exp"),this.displayPercentage(t.percentSav,"sav")}},{key:"displayPercentages",value:function(e,t){var n="exp"===t?"expenses":"savings";!function(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}(document.querySelectorAll(".".concat(n," .items__percent")),(function(t,n){e[n]>0?(t.classList.add("show"),t.innerHTML="".concat(e[n],"&#37;")):(t.classList.remove("show"),t.innerHTML="0&#37;")}))}},{key:"updatePercentages",value:function(){l.default.calculatePercentages(this.inputType.value);var e=l.default.getPercentages(this.inputType.value);this.displayPercentages(e,this.inputType.value)}},{key:"displayDate",value:function(){var e=document.querySelector(".budget__date"),t=new Date;e.textContent="".concat(["January","February","March","April","May","June","July","August","Sepetember","October","November","December"][t.getMonth()]," ").concat(t.getFullYear())}},{key:"changeType",value:function(){var e=this.inputType,t=document.querySelector("#check");e.addEventListener("change",(function(n){var a=Array.from(e.options);console.log(n),console.log(e.attributes,e.options,e.options.selectedIndex,a,a[1]),a.forEach((function(e){e.selected?(e.setAttribute("selected","selected"),t.classList.remove("exp","sav"),"exp"===e.value?t.classList.add("exp"):"sav"===e.value&&t.classList.add("sav")):e.removeAttribute("selected","selected"),console.log("Value ".concat(e.value))}))}))}},{key:"deleteItem",value:function(){var e=this;document.querySelector(".income-expenses").addEventListener("click",(function(t){if("delete"===t.target.id){var n=t.target.closest(".items").parentElement,a=n.id.split("-"),o=a[0],s=Number(a[1]);console.log(t.target,n,a,o,s),l.default.removeItem(o,s),n.remove(),e.updateBudget(),e.updatePercentages()}}))}},{key:"saving",value:function(){var e=document.querySelector("#save"),t=l.default.getData();e.addEventListener("click",(function(){var n=document.querySelector("#chosen-ID"),a=n.value||null,o=!1;n.classList.contains("chosen")&&(o=!0),console.log(t,t.allItems.inc,a),o&&a?r.updateBudget(t,a).then((function(){console.log("updated"),e.textContent="Updated",e.classList.remove("btn--ghost"),setTimeout((function(){e.textContent="Save",e.classList.add("btn--ghost")}),2e3)})).catch((function(e){console.error(e)})):r.saveBudget(t).then((function(){console.log("saved"),e.textContent="Saved",e.classList.remove("btn--ghost"),setTimeout((function(){e.textContent="Save",e.classList.add("btn--ghost")}),2e3)})).catch((function(e){console.error(e)}))}))}},{key:"styledDropdown",value:function(){var e=document.querySelector("#chosen-date"),t=document.querySelector("#chosen-ID"),n=document.querySelector(".date-list");e.addEventListener("focus",(function(){e.placeholder="Type to filter",n.classList.add("open")})),e.addEventListener("blur",(function(){n.classList.remove("open"),e.placeholder="Choose a date"})),n.addEventListener("click",(function(a){if(console.log(a,a.target),t.classList.add("chosen"),Array.from(n.children).forEach((function(e){e.classList.remove("selected")})),"LI"===a.target.tagName){var o=a.target.textContent,s=a.target.getAttribute("data-id");e.setAttribute("value",o),e.placeholder=o,t.setAttribute("value",s),a.target.classList.add("selected")}}))}},{key:"loading",value:function(){var e=document.querySelector(".date-list"),t=document.querySelector(".date-list li");r.getBudget((function(n,a){var o=n.created_at.toDate();if(o){var s=Object(i.format)(new Date(o),"dd/MM/yyyy"),c='<li class="date-list__item" data-id="'.concat(a,'">').concat(s,"</li>");"No saved dates"===t.textContent&&t.remove(),e.innerHTML+=c}})),this.styledDropdown()}}]),e}();t.default=d},a6Qp:function(e,t){e.exports=breakpoints},kFay:function(e,t,n){"use strict";n.r(t);var a=n("cDf5"),o=n.n(a),s=(n("OuUZ"),n("E4hX"),n("xVb/")),c=n("SEKM"),i=n("+4zn"),l=document.querySelector("body");window.onload=function(){window.setTimeout((function(){l.classList.remove("is-loading")}),100)};!function(e){var t=document.querySelector(".add__form"),n=document.querySelector(".add__type"),a=document.querySelector(".add__description"),s=document.querySelector(".add__value"),l=new c.default(n,a,s),r=new i.default;l.displayDate(),l.changeType(),l.loading(),l.saving();var u=e.getData().allItems.inc;t.addEventListener("submit",(function(n){n.preventDefault();var a=l.getInput();if(console.log(a),console.log(o()(a.value)),t.reset(),""!==a.desc&&!isNaN(a.value)&&a.value>0){var s=e.addItem(a.type,a.description,a.value);l.render(s,a.type),l.updateBudget(),l.updatePercentages(),console.log("form submitted!"),console.log(s)}console.log(u)})),l.deleteItem(),r.getBudget((function(e,t){console.log(e,t)}))}(s.default)},txRt:function(e,t){e.exports=browser},"xVb/":function(e,t,n){"use strict";n.r(t);var a,o,s,c=n("cDf5"),i=n.n(c),l=n("lwsE"),r=n.n(l),u=n("W8MJ"),d=n.n(u),p=(a=function(){function e(t,n,a){r()(this,e),this.id=t,this.desc=n,this.val=a,this.percentage=-1}return d()(e,[{key:"calcPercentage",value:function(e){this.percentage=e>0?Math.round(this.val/e*100):-1,console.log("this value is ".concat(i()(this.val)),"the totalIncome ".concat(i()(e)))}},{key:"getPercentage",value:function(){return this.percentage}}]),e}(),o={allItems:{exp:[],inc:[],sav:[]},totals:{exp:0,inc:0,sav:0},percent:{exp:-1,sav:-1},budget:0},s=function(e){var t=0;o.allItems[e].forEach((function(e){t+=e.val})),o.totals[e]=t},{addItem:function(e,t,n){var s=o.allItems[e].length>0?o.allItems[e][o.allItems[e].length-1].id+1:0,c=new a(s,t,n);return o.allItems[e].push(c),c},calculateBudget:function(){return s("exp"),s("inc"),s("sav"),o.budget=o.totals.inc-(o.totals.exp+o.totals.sav),o.totals.inc>0?(o.percent.exp=Math.round(o.totals.exp/o.totals.inc*100),o.percent.sav=Math.round(o.totals.sav/o.totals.inc*100)):(o.percent.exp=-1,o.percent.sav=-1),console.log(o.totals.exp,o.totals.inc),console.log(o.budget,o.percent.exp,o.percent.sav),o},calculatePercentages:function(e){o.allItems[e].forEach((function(e){e.calcPercentage(o.totals.inc)}))},getPercentages:function(e){return o.allItems[e].map((function(e){return e.getPercentage()}))},removeItem:function(e,t){var n=o.allItems[e].map((function(e){return e.id})).indexOf(t);-1!==n&&o.allItems[e].splice(n,1)},getData:function(){return o}});t.default=p}},[[0,"runtime","vendors"]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWJzaXRlL3NyYy9qcy9tb2R1bGVzL3Bhc3RidWRnZXQuanMiLCJ3ZWJwYWNrOi8vLy4vd2Vic2l0ZS9zcmMvanMvbW9kdWxlcy9oZWxwZXJzLmpzIiwid2VicGFjazovLy8uL3dlYnNpdGUvc3JjL2pzL21vZHVsZXMvdWljb250cm9sbGVyLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcImJyZWFrcG9pbnRzXCIiLCJ3ZWJwYWNrOi8vLy4vd2Vic2l0ZS9zcmMvanMvYXBwLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcImJyb3dzZXJcIiIsIndlYnBhY2s6Ly8vLi93ZWJzaXRlL3NyYy9qcy9tb2R1bGVzL2J1ZGdldGNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiYXJyYXlSZWFzc2lnbiIsImFyIiwibWFwIiwib2JqIiwiT2JqZWN0IiwiYXNzaWduIiwiUGFzdEJ1ZGdldCIsInRoaXMiLCJidWRnZXRzIiwiZGIiLCJjb2xsZWN0aW9uIiwibm93IiwiRGF0ZSIsImFsbEl0ZW1zIiwiYnVkZ2V0IiwicGVyY2VudCIsInRvdGFscyIsImJ1ZGdldERhdGEiLCJ0b3RhbEluYyIsImluYyIsInRvdGFsRXhwIiwiZXhwIiwidG90YWxTYXYiLCJzYXYiLCJwZXJjZW50RXhwIiwicGVyY2VudFNhdiIsImNyZWF0ZWRfYXQiLCJmaXJlYmFzZSIsImZpcmVzdG9yZSIsIlRpbWVzdGFtcCIsImZyb21EYXRlIiwiYWRkIiwicmVzcG9uc2UiLCJpZCIsImRvYyIsInVwZGF0ZSIsImNiIiwib3JkZXJCeSIsIm9uU25hcHNob3QiLCJzbmFwc2hvdCIsImRvY0NoYW5nZXMiLCJmb3JFYWNoIiwiY2hhbmdlIiwidHlwZSIsImRhdGEiLCJtZXRob2QiLCJub29wIiwibWV0aG9kcyIsImxlbmd0aCIsImNvbnNvbGUiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlRmlyc3RUYWIiLCJlIiwia2V5Q29kZSIsImRvY3VtZW50IiwiYm9keSIsImNsYXNzTGlzdCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJxdWVyeVNlbGVjdG9yIiwic2V0QXR0cmlidXRlIiwiYnJvd3NlciIsIm5hbWUiLCJicmVha3BvaW50cyIsInhsYXJnZSIsImxhcmdlIiwibWVkaXVtIiwic21hbGwiLCJ4c21hbGwiLCJtb2JpbGUiLCJvbiIsInJlbW92ZSIsImxvY2F0aW9uIiwiaG9zdG5hbWUiLCJsb2ciLCJwYXN0YnVkZ2V0IiwiZm9ybWF0TnVtYmVyIiwibnVtYmVyIiwibW9uZXkiLCJjYWxjIiwibnVtIiwiTWF0aCIsImFicyIsIm51bVNwbGl0IiwidG9GaXhlZCIsInNwbGl0IiwiaW50IiwiZGVjaW1hbCIsIk51bWJlciIsInN1YnN0ciIsImN1cnJlbmN5IiwiVUlDb250cm9sbGVyIiwiY29zdCIsImRlc2NyaXB0aW9uIiwidmFsdWUiLCJpbnB1dFR5cGUiLCJpbnB1dERlc2MiLCJpbnB1dFZhbCIsImh0bWwiLCJpdGVtIiwibGlzdCIsImRlc2MiLCJ2YWwiLCJpbm5lckhUTUwiLCJ0eXBlcyIsInBlcmNlbnRhZ2UiLCJnZXREYXRhIiwiYnVkZ2V0Q29udHJvbGxlciIsImNhbGN1bGF0ZUJ1ZGdldCIsIm5ld0J1ZGdldCIsImdldEJ1ZGdldCIsImRpc3BsYXlCdWRnZXQiLCJkaXNwbGF5UGVyY2VudGFnZSIsInBlcmNlbnRhZ2VzIiwiaSIsIm5vZGVMaXN0Rm9yRWFjaCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjdXJyZW50IiwiaW5kZXgiLCJjYWxjdWxhdGVQZXJjZW50YWdlcyIsImdldFBlcmNlbnRhZ2VzIiwiZGlzcGxheVBlcmNlbnRhZ2VzIiwiYnVkZ2V0RGF0ZSIsImRhdGUiLCJ0ZXh0Q29udGVudCIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJjaGVjayIsIm9wdGlvbnMiLCJBcnJheSIsImZyb20iLCJhdHRyaWJ1dGVzIiwic2VsZWN0ZWRJbmRleCIsIm9wdGlvbiIsInNlbGVjdGVkIiwicmVtb3ZlQXR0cmlidXRlIiwidGFyZ2V0IiwiY2xvc2VzdCIsInBhcmVudEVsZW1lbnQiLCJzcGxpdElEIiwiSUQiLCJyZW1vdmVJdGVtIiwidXBkYXRlQnVkZ2V0IiwidXBkYXRlUGVyY2VudGFnZXMiLCJidXR0b24iLCJpbnB1dCIsImNvbnRhaW5zIiwidGhlbiIsInNldFRpbWVvdXQiLCJlcnIiLCJlcnJvciIsInNhdmVCdWRnZXQiLCJpbnB1dElEIiwiZHJvcGRvd24iLCJwbGFjZWhvbGRlciIsImNoaWxkcmVuIiwiY2hpbGQiLCJ0YWdOYW1lIiwidGFyZ2V0VHh0IiwidGFyZ2V0SUQiLCJnZXRBdHRyaWJ1dGUiLCJkcm9wZG93bkxpc3QiLCJ0b0RhdGUiLCJ3aGVuIiwiZm9ybWF0Iiwic3R5bGVkRHJvcGRvd24iLCJtb2R1bGUiLCJleHBvcnRzIiwib25sb2FkIiwiYnVkZ2V0Q3RybCIsImZvcm0iLCJVSUN0cmwiLCJkaXNwbGF5RGF0ZSIsImNoYW5nZVR5cGUiLCJsb2FkaW5nIiwic2F2aW5nIiwicHJldmVudERlZmF1bHQiLCJnZXRJbnB1dCIsInJlc2V0IiwiaXNOYU4iLCJuZXdJdGVtIiwiYWRkSXRlbSIsInJlbmRlciIsImRlbGV0ZUl0ZW0iLCJCdWRnZXQiLCJjYWxjdWxhdGVUb3RhbHMiLCJ0b3RhbEluY29tZSIsInJvdW5kIiwic3VtIiwiY3VyIiwicHVzaCIsImNhbGNQZXJjZW50YWdlIiwiZ2V0UGVyY2VudGFnZSIsImluZGV4T2YiLCJzcGxpY2UiXSwibWFwcGluZ3MiOiJnTUFLTUEsRUFBZ0IsU0FBQ0MsR0FDckIsT0FBT0EsRUFBR0MsS0FBSSxTQUFDQyxHQUNiLE9BQU9DLE9BQU9DLE9BQU8sR0FBSUYsT0FJdkJHLEUsV0FDSixhQUFjLFlBQ1pDLEtBQUtDLFFBQVVDLEdBQUdDLFdBQVcsVywwRUFHZFAsRywwRkFDVFEsRUFBTSxJQUFJQyxLQUNSQyxFQUFzQ1YsRUFBdENVLFNBQVVDLEVBQTRCWCxFQUE1QlcsT0FBUUMsRUFBb0JaLEVBQXBCWSxRQUFTQyxFQUFXYixFQUFYYSxPQUM3QkMsRUFBYSxDQUNqQkgsU0FDQUksU0FBVUYsRUFB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RUFBTVYsR0FDakIsSUFHTXFGLEVBSE0xRSxFQUFLL0IsU0FBUzhCLEdBQU16QyxLQUFJLFNBQUNtSCxHQUNuQyxPQUFPQSxFQUFRcEYsTUFFQ2dLLFFBQVFoSyxJQUVYLElBQVhxRixHQUNGMUUsRUFBSy9CLFNBQVM4QixHQUFNdUosT0FBTzVFLEVBQU8sSUFHdENaLFFBQVMsV0FDUCxPQUFPOUQsS0FLRStELGMiLCJmaWxlIjoiYXBwLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIHByZWZlci1vYmplY3Qtc3ByZWFkICovXG4vLyB0b2RvOiBzYXZlIGJ1ZGdldCBkYXRhIHRvIGZpcmViYXNlXG4vLyB0b2RvOiBnZXQgYWxsSXRlbXMgZGF0YSB0byBzYXZlIHNvIHRoZXkgY2FuIGJlIHJlcG9wdWxhdGVkIHdoZW4gbG9hZGVkLlxuLy8gdG9kbzogZ2V0IHRoZSBkYXRhIGZyb20gZmlyZWJhc2Ugd2hlbiBhIGRhdGUgaGFzIGJlZW4gY2hvc2VuIGZyb20gdGhlIHNlbGVjdCBvcHRpb25zIGFuZCB1cGRhdGUgdGhlIFVJXG5cbmNvbnN0IGFycmF5UmVhc3NpZ24gPSAoYXIpID0+IHtcbiAgcmV0dXJuIGFyLm1hcCgob2JqKSA9PiB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIG9iailcbiAgfSlcbn1cblxuY2xhc3MgUGFzdEJ1ZGdldCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYnVkZ2V0cyA9IGRiLmNvbGxlY3Rpb24oJ2J1ZGdldHMnKVxuICB9XG5cbiAgYXN5bmMgc2F2ZUJ1ZGdldChvYmopIHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXG4gICAgY29uc3QgeyBhbGxJdGVtcywgYnVkZ2V0LCBwZXJjZW50LCB0b3RhbHMgfSA9IG9ialxuICAgIGNvbnN0IGJ1ZGdldERhdGEgPSB7XG4gICAgICBidWRnZXQsXG4gICAgICB0b3RhbEluYzogdG90YWxzLmluYyxcbiAgICAgIHRvdGFsRXhwOiB0b3RhbHMuZXhwLFxuICAgICAgdG90YWxTYXY6IHRvdGFscy5zYXYsXG4gICAgICBwZXJjZW50RXhwOiBwZXJjZW50LmV4cCxcbiAgICAgIHBlcmNlbnRTYXY6IHBlcmNlbnQuc2F2LFxuICAgICAgYWxsSXRlbXM6IHtcbiAgICAgICAgaW5jOiBhcnJheVJlYXNzaWduKGFsbEl0ZW1zLmluYyksXG4gICAgICAgIGV4cDogYXJyYXlSZWFzc2lnbihhbGxJdGVtcy5leHApLFxuICAgICAgICBzYXY6IGFycmF5UmVhc3NpZ24oYWxsSXRlbXMuc2F2KSxcbiAgICAgIH0sXG4gICAgICBjcmVhdGVkX2F0OiBmaXJlYmFzZS5maXJlc3RvcmUuVGltZXN0YW1wLmZyb21EYXRlKG5vdyksXG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5idWRnZXRzLmFkZChidWRnZXREYXRhKVxuICAgIHJldHVybiByZXNwb25zZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQnVkZ2V0KG9iaiwgaWQpIHtcbiAgICBjb25zdCB7IGFsbEl0ZW1zLCBidWRnZXQsIHBlcmNlbnQsIHRvdGFscyB9ID0gb2JqXG4gICAgY29uc3QgYnVkZ2V0RGF0YSA9IHtcbiAgICAgIGJ1ZGdldCxcbiAgICAgIHRvdGFsSW5jOiB0b3RhbHMuaW5jLFxuICAgICAgdG90YWxFeHA6IHRvdGFscy5leHAsXG4gICAgICB0b3RhbFNhdjogdG90YWxzLnNhdixcbiAgICAgIHBlcmNlbnRFeHA6IHBlcmNlbnQuZXhwLFxuICAgICAgcGVyY2VudFNhdjogcGVyY2VudC5zYXYsXG4gICAgICBhbGxJdGVtczoge1xuICAgICAgICBpbmM6IGFycmF5UmVhc3NpZ24oYWxsSXRlbXMuaW5jKSxcbiAgICAgICAgZXhwOiBhcnJheVJlYXNzaWduKGFsbEl0ZW1zLmV4cCksXG4gICAgICAgIHNhdjogYXJyYXlSZWFzc2lnbihhbGxJdGVtcy5zYXYpLFxuICAgICAgfSxcbiAgICB9XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmJ1ZGdldHMuZG9jKGlkKS51cGRhdGUoYnVkZ2V0RGF0YSlcbiAgICByZXR1cm4gcmVzcG9uc2VcbiAgfVxuXG4gIGdldEJ1ZGdldChjYikge1xuICAgIHRoaXMuYnVkZ2V0cy5vcmRlckJ5KCdjcmVhdGVkX2F0Jykub25TbmFwc2hvdCgoc25hcHNob3QpID0+IHtcbiAgICAgIHNuYXBzaG90LmRvY0NoYW5nZXMoKS5mb3JFYWNoKChjaGFuZ2UpID0+IHtcbiAgICAgICAgaWYgKGNoYW5nZS50eXBlID09PSAnYWRkZWQnKSB7XG4gICAgICAgICAgY2IoY2hhbmdlLmRvYy5kYXRhKCksIGNoYW5nZS5kb2MuaWQpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQYXN0QnVkZ2V0XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcGx1c3BsdXMgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLW11bHRpLWFzc2lnbiAqL1xuXG4vLyBBdm9pZCBgY29uc29sZWAgZXJyb3JzIGluIGJyb3dzZXJzIHRoYXQgbGFjayBhIGNvbnNvbGUuXG57XG4gIGxldCBtZXRob2RcbiAgY29uc3Qgbm9vcCA9ICgpID0+IHt9XG4gIGNvbnN0IG1ldGhvZHMgPSBbXG4gICAgJ2Fzc2VydCcsXG4gICAgJ2NsZWFyJyxcbiAgICAnY291bnQnLFxuICAgICdkZWJ1ZycsXG4gICAgJ2RpcicsXG4gICAgJ2RpcnhtbCcsXG4gICAgJ2Vycm9yJyxcbiAgICAnZXhjZXB0aW9uJyxcbiAgICAnZ3JvdXAnLFxuICAgICdncm91cENvbGxhcHNlZCcsXG4gICAgJ2dyb3VwRW5kJyxcbiAgICAnaW5mbycsXG4gICAgJ2xvZycsXG4gICAgJ21hcmtUaW1lbGluZScsXG4gICAgJ3Byb2ZpbGUnLFxuICAgICdwcm9maWxlRW5kJyxcbiAgICAndGFibGUnLFxuICAgICd0aW1lJyxcbiAgICAndGltZUVuZCcsXG4gICAgJ3RpbWVsaW5lJyxcbiAgICAndGltZWxpbmVFbmQnLFxuICAgICd0aW1lU3RhbXAnLFxuICAgICd0cmFjZScsXG4gICAgJ3dhcm4nLFxuICBdXG4gIGxldCB7IGxlbmd0aCB9ID0gbWV0aG9kc1xuICBjb25zdCBjb25zb2xlID0gKHdpbmRvdy5jb25zb2xlID0gd2luZG93LmNvbnNvbGUgfHwge30pXG5cbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgbWV0aG9kID0gbWV0aG9kc1tsZW5ndGhdXG5cbiAgICAvLyBPbmx5IHN0dWIgdW5kZWZpbmVkIG1ldGhvZHMuXG4gICAgaWYgKCFjb25zb2xlW21ldGhvZF0pIHtcbiAgICAgIGNvbnNvbGVbbWV0aG9kXSA9IG5vb3BcbiAgICB9XG4gIH1cbn1cblxuLy8gQWRkIHRhYmJpbmcgaW5kaWNhdG9yIHRvIHdpbmRvd1xuY29uc3QgaGFuZGxlRmlyc3RUYWIgPSAoZSkgPT4ge1xuICBpZiAoZS5rZXlDb2RlID09PSA5KSB7XG4gICAgLy8gdGhlIFwiSSBhbSBhIGtleWJvYXJkIHVzZXJcIiBrZXlcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3VzZXItaXMtdGFiYmluZycpXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVGaXJzdFRhYilcbiAgfVxufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUZpcnN0VGFiKVxuXG4vLyBBZGQgYSBicm93ZXIgaW5kaWNhdG9yIHRvIHRoZSBIVE1MIGVsZW1lbnQuXG5jb25zdCBodG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpXG5odG1sLnNldEF0dHJpYnV0ZSgnZGF0YS1icm93c2VyJywgYnJvd3Nlci5uYW1lKVxuXG4vLyBEZXRlY3QgaWYgbW9iaWxlIG9yIGRlc2t0b3AuXG5jb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpXG5cbmJyZWFrcG9pbnRzKHtcbiAgeGxhcmdlOiBbJzEyODFweCcsICcxNjgwcHgnXSxcbiAgbGFyZ2U6IFsnOTgxcHgnLCAnMTI4MHB4J10sXG4gIG1lZGl1bTogWyc3MzdweCcsICc5ODBweCddLFxuICBzbWFsbDogWyc0ODFweCcsICc3MzZweCddLFxuICB4c21hbGw6IFtudWxsLCAnNDgwcHgnXSxcbn0pXG5cbmlmIChicm93c2VyLm1vYmlsZSkge1xuICBib2R5LmNsYXNzTGlzdC5hZGQoJ2lzLW1vYmlsZScpXG59IGVsc2Uge1xuICBicmVha3BvaW50cy5vbignPm1lZGl1bScsICgpID0+IHtcbiAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLW1vYmlsZScpXG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKCdpcy1kZXNrdG9wJylcbiAgfSlcbiAgYnJlYWtwb2ludHMub24oJzw9bWVkaXVtJywgKCkgPT4ge1xuICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZGVza3RvcCcpXG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKCdpcy1tb2JpbGUnKVxuICB9KVxufVxuXG4vLyBMb2cgaWYgcnVubmluZyBpbiBsb2NhbGhvc3Qgd2hlbiBpbiBkZXZlbG9wbWVudCBtb2RlLlxuaWYgKFxuICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnICYmXG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbidcbikge1xuICBjb25zb2xlLmxvZygnbG9jYWxob3N0IGRldGVjdGVkIScpXG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzICovXG5pbXBvcnQgeyBmb3JtYXQgfSBmcm9tICdkYXRlLWZucydcbmltcG9ydCBidWRnZXRDb250cm9sbGVyIGZyb20gJy4vYnVkZ2V0Y29udHJvbGxlcidcbmltcG9ydCBQYXN0QnVkZ2V0IGZyb20gJy4vcGFzdGJ1ZGdldCdcblxuY29uc3QgcGFzdGJ1ZGdldCA9IG5ldyBQYXN0QnVkZ2V0KClcblxuY29uc3QgZm9ybWF0TnVtYmVyID0gKG51bWJlciwgdHlwZSwgbW9uZXkgPSBmYWxzZSwgY2FsYyA9IHRydWUpID0+IHtcbiAgLyoqXG4gICAqICsgb3IgLSBiZWZvcmUgdGhlIG51bWJlclxuICAgKiBleGFjdGx5IDIgZGVjaW1hbCBwb2ludHNcbiAgICogY29tbWEgc2VwZXJhdGluZyB0aGUgdGhvdXNhbmRzXG4gICAqXG4gICAqIDIzMTAuNDU2NyA9ICsgMiwzMTAuNDZcbiAgICovXG4gIGxldCBudW0gPSBNYXRoLmFicyhudW1iZXIpXG4gIG51bSA9IG51bS50b0ZpeGVkKDIpXG5cbiAgY29uc3QgbnVtU3BsaXQgPSBudW0uc3BsaXQoJy4nKSAvLyBub3cgYSBzdHJpbmcgYW5kIHdpbGwgc3BsaXQgdGhlIC4gdG8gcmVwbGFjZSB3aXRoIGEgLFxuICBsZXQgaW50ID0gbnVtU3BsaXRbMF1cbiAgbGV0IGRlY2ltYWwgPSBudW1TcGxpdFsxXVxuICBkZWNpbWFsID0gTnVtYmVyKGRlY2ltYWwpID4gMCA/IGAuJHtkZWNpbWFsfWAgOiAnJ1xuXG4gIGlmIChpbnQubGVuZ3RoID4gMykge1xuICAgIC8vIHN1YnN0ciBhbGxvd3MgZm9yIG9ubHkgcGFydCBvZiB0aGUgc3RyaW5nIHRvIGJlIHRha2VuXG4gICAgaW50ID0gYCR7aW50LnN1YnN0cigwLCBpbnQubGVuZ3RoIC0gMyl9LCR7aW50LnN1YnN0cihpbnQubGVuZ3RoIC0gMywgMyl9YCAvLyBpbnB1dCAyMzEwLCBvdXRwdXQgMiwzMTBcbiAgfVxuXG4gIGxldCBzaWduXG4gIGlmIChjYWxjKSB7XG4gICAgc2lnbiA9XG4gICAgICB0eXBlID09PSAnZXhwJ1xuICAgICAgICA/ICc8c3BhbiBjbGFzcz1cInNpZ25cIj4mIzQ1Ozwvc3Bhbj4gJ1xuICAgICAgICA6ICc8c3BhbiBjbGFzcz1cInNpZ25cIj4mIzQzOzwvc3Bhbj4gJ1xuICB9IGVsc2Uge1xuICAgIHNpZ24gPSAnJ1xuICB9XG4gIGNvbnN0IGN1cnJlbmN5ID0gbW9uZXkgPyAnPHNwYW4gY2xhc3M9XCJjdXJyZW5jeVwiPiZwb3VuZDs8L3NwYW4+JyA6ICcnXG5cbiAgLy8gUmV0dXJuIHRoZSBmb3JtYXR0ZWQgc3RyaW5nXG4gIHJldHVybiBgJHtzaWdufSR7Y3VycmVuY3l9JHtpbnR9JHtkZWNpbWFsfWBcbn1cblxuLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLWRlc3RydWN0dXJpbmcgKi9cbmNsYXNzIFVJQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKGNvc3QsIGRlc2NyaXB0aW9uLCB2YWx1ZSkge1xuICAgIHRoaXMuaW5wdXRUeXBlID0gY29zdFxuICAgIHRoaXMuaW5wdXREZXNjID0gZGVzY3JpcHRpb25cbiAgICB0aGlzLmlucHV0VmFsID0gdmFsdWVcbiAgfVxuXG4gIGdldElucHV0KCkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiB0aGlzLmlucHV0VHlwZS52YWx1ZSwgLy8gV2lsbCBiZSBlaXRoZXIgaW5jIG9yIGV4cFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuaW5wdXREZXNjLnZhbHVlLFxuICAgICAgdmFsdWU6IE51bWJlcih0aGlzLmlucHV0VmFsLnZhbHVlKSxcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICByZW5kZXIob2JqLCB0eXBlKSB7XG4gICAgY29uc3QgaXRlbSA9XG4gICAgICB0eXBlID09PSAnZXhwJyA/ICdleHBlbnNlcycgOiB0eXBlID09PSAnc2F2JyA/ICdzYXZpbmdzJyA6ICdpbmNvbWUnXG4gICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2l0ZW19X19saXN0YClcbiAgICBsZXQgaHRtbFxuXG4gICAgLy8gQ3JlYXRlIEhUTUwgc3RyaW5nIHdpdGggcGxhY2Vob2xkZXJcbiAgICBodG1sID0gYFxuICAgIDxsaSBjbGFzcz0nJHtpdGVtfV9faXRlbScgaWQ9JyR7dHlwZX0tJHtvYmouaWR9Jz5cbiAgICAgIDxkaXYgY2xhc3M9J2l0ZW0tZGVzYyc+PHA+JHtvYmouZGVzY308L3A+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiaXRlbXNcIj5cbiAgICAgICAgPGRpdiBjbGFzcz0naXRlbXNfX3ZhbHVlJz48cD4ke2Zvcm1hdE51bWJlcihcbiAgICAgICAgICBvYmoudmFsLFxuICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICBmYWxzZVxuICAgICAgICApfTwvcD48L2Rpdj5cbiAgICBgXG5cbiAgICBpZiAodHlwZSA9PT0gJ2V4cCcgfHwgdHlwZSA9PT0gJ3NhdicpIHtcbiAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJpdGVtc19fcGVyY2VudFwiPjxwPjAmIzM3OzwvcD48L2Rpdj4nXG4gICAgfVxuXG4gICAgaHRtbCArPSBgXG4gICAgICAgIDxidXR0b24gY2xhc3M9J2J0biBidG4tLWNsZWFyIGl0ZW1zX19kZWwnPlxuICAgICAgICAgIDxzdmcgaWQ9XCJkZWxldGVcIiBjbGFzcz1cImljb25cIiB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjBcIiBhcmlhLWhpZGRlbj1cInRydWVcIj5cbiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj1cIi9hc3NldHMvaW1hZ2VzL2ljb25zLnN2ZyNpY29uLWRlbGV0ZVwiPjwvdXNlPlxuICAgICAgICAgIDwvc3ZnPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvbGk+XG4gICAgYFxuXG4gICAgLy8gSW5zZXJ0IEhUTUwgaW50byB0aGUgRE9NXG4gICAgbGlzdC5pbm5lckhUTUwgKz0gaHRtbFxuICB9XG5cbiAgZ2V0QnVkZ2V0KGRhdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYnVkZ2V0OiBkYXRhLmJ1ZGdldCxcbiAgICAgIHRvdGFsSW5jOiBkYXRhLnRvdGFscy5pbmMsXG4gICAgICB0b3RhbEV4cDogZGF0YS50b3RhbHMuZXhwLFxuICAgICAgdG90YWxTYXY6IGRhdGEudG90YWxzLnNhdixcbiAgICAgIHBlcmNlbnRFeHA6IGRhdGEucGVyY2VudC5leHAsXG4gICAgICBwZXJjZW50U2F2OiBkYXRhLnBlcmNlbnQuc2F2LFxuICAgIH1cbiAgfVxuXG4gIGRpc3BsYXlCdWRnZXQob2JqKSB7XG4gICAgY29uc3QgdHlwZSA9IG9iai5idWRnZXQgPiAwID8gJ2luYycgOiAnZXhwJ1xuICAgIGNvbnN0IHR5cGVzID0gdHlwZSA9PT0gJ2V4cCcgPyAnZXhwZW5zZXMnIDogJ2luY29tZSdcbiAgICBjb25zdCBidWRnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVkZ2V0X192YWx1ZScpXG4gICAgY29uc3QgaW5jID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmJ1ZGdldF9faW5jb21lIC5idWRnZXRfX2Ftb3VudGApXG4gICAgY29uc3QgZXhwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmJ1ZGdldF9fZXhwZW5zZXMgLmJ1ZGdldF9fYW1vdW50YClcbiAgICBjb25zdCBzYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuYnVkZ2V0X19zYXZpbmdzIC5idWRnZXRfX2Ftb3VudGApXG5cbiAgICBidWRnZXQuaW5uZXJIVE1MID0gZm9ybWF0TnVtYmVyKG9iai5idWRnZXQsIHR5cGUsIHRydWUpXG4gICAgaW5jLmlubmVySFRNTCA9IGZvcm1hdE51bWJlcihvYmoudG90YWxJbmMsICdpbmMnKVxuICAgIGV4cC5pbm5lckhUTUwgPSBmb3JtYXROdW1iZXIob2JqLnRvdGFsRXhwLCAnZXhwJylcbiAgICBzYXYuaW5uZXJIVE1MID0gZm9ybWF0TnVtYmVyKG9iai50b3RhbFNhdiwgJ2V4cCcpXG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgY29uc29sZS5sb2coYFRoZSAke3R5cGVzfSBpcy9hcmUgJHtvYmouYnVkZ2V0fWApXG4gICAgICBjb25zb2xlLmxvZyhpbmMsIGV4cClcbiAgICB9XG4gIH1cblxuICBkaXNwbGF5UGVyY2VudGFnZShwZXJjZW50YWdlLCB0eXBlKSB7XG4gICAgY29uc3QgdHlwZXMgPSB0eXBlID09PSAnZXhwJyA/ICdleHBlbnNlcycgOiAnc2F2aW5ncydcbiAgICBjb25zdCBwZXJjZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuYnVkZ2V0X18ke3R5cGVzfSAuYnVkZ2V0X19wZXJjZW50YWdlYFxuICAgIClcblxuICAgIGlmIChwZXJjZW50YWdlID4gMCkge1xuICAgICAgcGVyY2VudC5jbGFzc0xpc3QuYWRkKCdzaG93JylcbiAgICAgIHBlcmNlbnQuaW5uZXJIVE1MID0gYCR7cGVyY2VudGFnZX0mIzM3O2BcbiAgICB9IGVsc2Uge1xuICAgICAgcGVyY2VudC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93JylcbiAgICB9XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgY29uc29sZS5sb2cocGVyY2VudClcbiAgICB9XG4gIH1cblxuICB1cGRhdGVCdWRnZXQoKSB7XG4gICAgLy8gMS4gQ2hlY2sgbG9jYWxTdG9yYWdlIGZvciBzYXZlIGJ1ZGdldCBkYXRhLCBlbHNlIGdldCBuZXcgZGF0YVxuICAgIGNvbnN0IGdldERhdGEgPSBidWRnZXRDb250cm9sbGVyLmNhbGN1bGF0ZUJ1ZGdldCgpXG5cbiAgICAvLyAyLiBSZXR1cm4gdGhlIGJ1ZGdldFxuICAgIGNvbnN0IG5ld0J1ZGdldCA9IHRoaXMuZ2V0QnVkZ2V0KGdldERhdGEpXG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgY29uc29sZS5sb2cobmV3QnVkZ2V0KVxuICAgIH1cblxuICAgIC8vIDMuIERpc3BsYXkgdGhlIHVwZGF0ZWQgYnVkZ2V0XG4gICAgdGhpcy5kaXNwbGF5QnVkZ2V0KG5ld0J1ZGdldClcblxuICAgIC8vIDQuIERpc3BsYXkgdGhlIG5ldyBvdmVyYWxsIGJ1ZGdldCBwZXJjZW50YWdlXG4gICAgdGhpcy5kaXNwbGF5UGVyY2VudGFnZShuZXdCdWRnZXQucGVyY2VudEV4cCwgJ2V4cCcpXG4gICAgdGhpcy5kaXNwbGF5UGVyY2VudGFnZShuZXdCdWRnZXQucGVyY2VudFNhdiwgJ3NhdicpXG4gIH1cblxuICBkaXNwbGF5UGVyY2VudGFnZXMocGVyY2VudGFnZXMsIHR5cGUpIHtcbiAgICBjb25zdCB0eXBlcyA9IHR5cGUgPT09ICdleHAnID8gJ2V4cGVuc2VzJyA6ICdzYXZpbmdzJ1xuICAgIGNvbnN0IGZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke3R5cGVzfSAuaXRlbXNfX3BlcmNlbnRgKVxuICAgIGNvbnN0IG5vZGVMaXN0Rm9yRWFjaCA9IChsaXN0LCBjYikgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNiKGxpc3RbaV0sIGkpXG4gICAgICB9XG4gICAgfVxuICAgIG5vZGVMaXN0Rm9yRWFjaChmaWVsZHMsIChjdXJyZW50LCBpbmRleCkgPT4ge1xuICAgICAgaWYgKHBlcmNlbnRhZ2VzW2luZGV4XSA+IDApIHtcbiAgICAgICAgY3VycmVudC5jbGFzc0xpc3QuYWRkKCdzaG93JylcbiAgICAgICAgY3VycmVudC5pbm5lckhUTUwgPSBgJHtwZXJjZW50YWdlc1tpbmRleF19JiMzNztgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKVxuICAgICAgICBjdXJyZW50LmlubmVySFRNTCA9ICcwJiMzNzsnXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHVwZGF0ZVBlcmNlbnRhZ2VzKCkge1xuICAgIC8vIDEuIENhbHVsYXRlIHBlcmNlbnRhZ2VzXG4gICAgYnVkZ2V0Q29udHJvbGxlci5jYWxjdWxhdGVQZXJjZW50YWdlcyh0aGlzLmlucHV0VHlwZS52YWx1ZSlcblxuICAgIC8vIDIuIFJlYWQgcGVyY2VudGFnZXMgZnJvbSBidWRnZXQgY29udHJvbGxlclxuICAgIGNvbnN0IHBlcmNlbnRhZ2VzID0gYnVkZ2V0Q29udHJvbGxlci5nZXRQZXJjZW50YWdlcyh0aGlzLmlucHV0VHlwZS52YWx1ZSlcblxuICAgIC8vIDMuIFVwZGF0ZSBVSSB0byBzaG93IG5ldyBwZXJjZW50YWdlc1xuICAgIHRoaXMuZGlzcGxheVBlcmNlbnRhZ2VzKHBlcmNlbnRhZ2VzLCB0aGlzLmlucHV0VHlwZS52YWx1ZSlcbiAgfVxuXG4gIGRpc3BsYXlEYXRlKCkge1xuICAgIGNvbnN0IGJ1ZGdldERhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVkZ2V0X19kYXRlJylcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKVxuICAgIGNvbnN0IG1vbnRocyA9IFtcbiAgICAgICdKYW51YXJ5JyxcbiAgICAgICdGZWJydWFyeScsXG4gICAgICAnTWFyY2gnLFxuICAgICAgJ0FwcmlsJyxcbiAgICAgICdNYXknLFxuICAgICAgJ0p1bmUnLFxuICAgICAgJ0p1bHknLFxuICAgICAgJ0F1Z3VzdCcsXG4gICAgICAnU2VwZXRlbWJlcicsXG4gICAgICAnT2N0b2JlcicsXG4gICAgICAnTm92ZW1iZXInLFxuICAgICAgJ0RlY2VtYmVyJyxcbiAgICBdXG4gICAgYnVkZ2V0RGF0ZS50ZXh0Q29udGVudCA9IGAke21vbnRoc1tkYXRlLmdldE1vbnRoKCldfSAke2RhdGUuZ2V0RnVsbFllYXIoKX1gXG4gIH1cblxuICBjaGFuZ2VUeXBlKCkge1xuICAgIGNvbnN0IHR5cGUgPSB0aGlzLmlucHV0VHlwZVxuICAgIGNvbnN0IGNoZWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NoZWNrJylcblxuICAgIC8vIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgLy8gICBjb25zb2xlLmxvZyhmaWVsZHMpXG4gICAgLy8gfVxuXG4gICAgdHlwZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IEFycmF5LmZyb20odHlwZS5vcHRpb25zKVxuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICB0eXBlLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgdHlwZS5vcHRpb25zLFxuICAgICAgICAgIHR5cGUub3B0aW9ucy5zZWxlY3RlZEluZGV4LFxuICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgb3B0aW9uc1sxXVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMuZm9yRWFjaCgob3B0aW9uKSA9PiB7XG4gICAgICAgIGlmIChvcHRpb24uc2VsZWN0ZWQpIHtcbiAgICAgICAgICBvcHRpb24uc2V0QXR0cmlidXRlKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpXG4gICAgICAgICAgY2hlY2suY2xhc3NMaXN0LnJlbW92ZSgnZXhwJywgJ3NhdicpXG4gICAgICAgICAgaWYgKG9wdGlvbi52YWx1ZSA9PT0gJ2V4cCcpIHtcbiAgICAgICAgICAgIGNoZWNrLmNsYXNzTGlzdC5hZGQoJ2V4cCcpXG4gICAgICAgICAgfSBlbHNlIGlmIChvcHRpb24udmFsdWUgPT09ICdzYXYnKSB7XG4gICAgICAgICAgICBjaGVjay5jbGFzc0xpc3QuYWRkKCdzYXYnKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcHRpb24ucmVtb3ZlQXR0cmlidXRlKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgVmFsdWUgJHtvcHRpb24udmFsdWV9YClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgZGVsZXRlSXRlbSgpIHtcbiAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmluY29tZS1leHBlbnNlcycpXG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQuaWQgPT09ICdkZWxldGUnKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5pdGVtcycpLnBhcmVudEVsZW1lbnRcbiAgICAgICAgY29uc3Qgc3BsaXRJRCA9IHRhcmdldC5pZC5zcGxpdCgnLScpXG4gICAgICAgIGNvbnN0IHR5cGUgPSBzcGxpdElEWzBdXG4gICAgICAgIGNvbnN0IElEID0gTnVtYmVyKHNwbGl0SURbMV0pXG5cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlLnRhcmdldCwgdGFyZ2V0LCBzcGxpdElELCB0eXBlLCBJRClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDEuIERlbGV0ZSB0aGUgaXRlbSBmcm9tIHRoZSBkYXRhIHN0cnVjdHVyZVxuICAgICAgICBidWRnZXRDb250cm9sbGVyLnJlbW92ZUl0ZW0odHlwZSwgSUQpXG5cbiAgICAgICAgLy8gMi4gRGVsZXRlIHRoZSBpdGVtIGZyb20gdGhlIFVJXG4gICAgICAgIHRhcmdldC5yZW1vdmUoKVxuXG4gICAgICAgIC8vIDMuIFVwZGF0ZSBhbmQgc2hvdyB0aGUgbmV3IGJ1ZGdldFxuICAgICAgICB0aGlzLnVwZGF0ZUJ1ZGdldCgpXG5cbiAgICAgICAgLy8gNC4gVXBkYXRlIGFuZCBzaG93IHRoZSBuZXcgcGVyY2VudGFnZXNcbiAgICAgICAgdGhpcy51cGRhdGVQZXJjZW50YWdlcygpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHNhdmluZygpIHtcbiAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2F2ZScpXG4gICAgY29uc3QgZGF0YSA9IGJ1ZGdldENvbnRyb2xsZXIuZ2V0RGF0YSgpXG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgLy8gY29uc3QgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXRlLWxpc3QnKVxuICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hvc2VuLUlEJylcbiAgICAgIGNvbnN0IElEID0gaW5wdXQudmFsdWUgfHwgbnVsbFxuICAgICAgbGV0IHNlbGVjdGVkID0gZmFsc2VcblxuICAgICAgLy8gQXJyYXkuZnJvbShsaXN0LmNoaWxkcmVuKS5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgLy8gICBpZiAoY2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAvLyAgICAgLy8gSUQgPSBjaGlsZC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKVxuICAgICAgLy8gICAgIHNlbGVjdGVkID0gdHJ1ZVxuICAgICAgLy8gICB9XG4gICAgICAvLyB9KVxuXG4gICAgICBpZiAoaW5wdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaG9zZW4nKSkge1xuICAgICAgICBzZWxlY3RlZCA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSwgZGF0YS5hbGxJdGVtcy5pbmMsIElEKVxuICAgICAgfVxuXG4gICAgICBpZiAoc2VsZWN0ZWQgJiYgSUQpIHtcbiAgICAgICAgcGFzdGJ1ZGdldFxuICAgICAgICAgIC51cGRhdGVCdWRnZXQoZGF0YSwgSUQpXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3VwZGF0ZWQnKVxuICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1VwZGF0ZWQnXG4gICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYnRuLS1naG9zdCcpXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1NhdmUnXG4gICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4tLWdob3N0JylcbiAgICAgICAgICAgIH0sIDIwMDApXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhc3RidWRnZXRcbiAgICAgICAgICAuc2F2ZUJ1ZGdldChkYXRhKVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzYXZlZCcpXG4gICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnU2F2ZWQnXG4gICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYnRuLS1naG9zdCcpXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1NhdmUnXG4gICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4tLWdob3N0JylcbiAgICAgICAgICAgIH0sIDIwMDApXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLy8gc2F2aW5nKCkge1xuICAvLyAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzYXZlJylcbiAgLy8gICBjb25zdCBkYXRhID0gYnVkZ2V0Q29udHJvbGxlci5nZXREYXRhKClcbiAgLy8gICBjb25zdCBub3cgPSBmb3JtYXQobmV3IERhdGUoKSwgJ2RkL01NL3l5eXknKVxuICAvLyAgIGNvbnN0IGl0ZW1zID0gW11cbiAgLy8gICBsZXQgZm91bmQgPSBmYWxzZVxuXG4gIC8vICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAvLyAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXRlLWxpc3QgPiBsaScpXG4gIC8vICAgICBjb25zdCBsaXN0SXRlbXMgPSBBcnJheS5mcm9tKGxpc3QpXG4gIC8vICAgICBsaXN0SXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAvLyAgICAgICBpdGVtcy5wdXNoKHsgZGF0ZTogaXRlbS50ZXh0Q29udGVudCwgaWQ6IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgfSlcbiAgLy8gICAgIH0pXG4gIC8vICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAvLyAgICAgICBjb25zb2xlLmxvZyhkYXRhLCBkYXRhLmFsbEl0ZW1zLmluYywgaXRlbXMpXG4gIC8vICAgICB9XG4gIC8vICAgICAvLyBDaGVjayBpZiBpdGVtcyBhcnJheSBoYXMgdGhlIGN1cnJlbnQgZGF0ZVxuICAvLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAvLyAgICAgICBpZiAoaXRlbXNbaV0uZGF0ZSA9PT0gbm93KSB7XG4gIC8vICAgICAgICAgZm91bmQgPSB0cnVlXG4gIC8vICAgICAgICAgYnJlYWtcbiAgLy8gICAgICAgfVxuICAvLyAgICAgfVxuXG4gIC8vICAgICAvLyBVcGRhdGUgYnVkZ2V0IGlmIGl0IGFscmVhZHkgZXhpc3RzIG9yIHNhdmUgYSBuZXcgYnVkZ2V0XG4gIC8vICAgICBpZiAoZm91bmQpIHtcbiAgLy8gICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAvLyAgICAgICAgIGlmIChpdGVtLmRhdGUgPT09IG5vdykge1xuICAvLyAgICAgICAgICAgcGFzdGJ1ZGdldFxuICAvLyAgICAgICAgICAgICAudXBkYXRlQnVkZ2V0KGRhdGEsIGl0ZW0uaWQpXG4gIC8vICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgLy8gICAgICAgICAgICAgICBjb25zb2xlLmxvZygndXBkYXRlZCcpXG4gIC8vICAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1VwZGF0ZWQnXG4gIC8vICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi0tZ2hvc3QnKVxuICAvLyAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAvLyAgICAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1NhdmUnXG4gIC8vICAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuLS1naG9zdCcpXG4gIC8vICAgICAgICAgICAgICAgfSwgNDAwMClcbiAgLy8gICAgICAgICAgICAgfSlcbiAgLy8gICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgLy8gICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgLy8gICAgICAgICAgICAgfSlcbiAgLy8gICAgICAgICB9XG4gIC8vICAgICAgIH0pXG4gIC8vICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIC8vICAgICAgICAgY29uc29sZS5sb2coJ2hhcyB0b2RheXMgZGF0ZScpXG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH0gZWxzZSB7XG4gIC8vICAgICAgIHBhc3RidWRnZXRcbiAgLy8gICAgICAgICAuc2F2ZUJ1ZGdldChkYXRhKVxuICAvLyAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgLy8gICAgICAgICAgIGNvbnNvbGUubG9nKCdzYXZlZCcpXG4gIC8vICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnU2F2ZWQnXG4gIC8vICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYnRuLS1naG9zdCcpXG4gIC8vICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgLy8gICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1NhdmUnXG4gIC8vICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4tLWdob3N0JylcbiAgLy8gICAgICAgICAgIH0sIDQwMDApXG4gIC8vICAgICAgICAgfSlcbiAgLy8gICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAvLyAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gIC8vICAgICAgICAgfSlcbiAgLy8gICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgLy8gICAgICAgICBjb25zb2xlLmxvZygnZG9lcyBub3QgaGF2ZSB0b2RheXMgZGF0ZScpXG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH1cbiAgLy8gICB9KVxuICAvLyB9XG5cbiAgc3R5bGVkRHJvcGRvd24oKSB7XG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hvc2VuLWRhdGUnKVxuICAgIGNvbnN0IGlucHV0SUQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hvc2VuLUlEJylcbiAgICBjb25zdCBkcm9wZG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXRlLWxpc3QnKVxuXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoKSA9PiB7XG4gICAgICBpbnB1dC5wbGFjZWhvbGRlciA9ICdUeXBlIHRvIGZpbHRlcidcbiAgICAgIGRyb3Bkb3duLmNsYXNzTGlzdC5hZGQoJ29wZW4nKVxuICAgIH0pXG5cbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4ge1xuICAgICAgZHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpXG4gICAgICBpbnB1dC5wbGFjZWhvbGRlciA9ICdDaG9vc2UgYSBkYXRlJ1xuICAgIH0pXG5cbiAgICBkcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgY29uc29sZS5sb2coZSwgZS50YXJnZXQpXG4gICAgICBpbnB1dElELmNsYXNzTGlzdC5hZGQoJ2Nob3NlbicpXG4gICAgICBBcnJheS5mcm9tKGRyb3Bkb3duLmNoaWxkcmVuKS5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICBjaGlsZC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpXG4gICAgICB9KVxuICAgICAgaWYgKGUudGFyZ2V0LnRhZ05hbWUgPT09ICdMSScpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0VHh0ID0gZS50YXJnZXQudGV4dENvbnRlbnRcbiAgICAgICAgY29uc3QgdGFyZ2V0SUQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKVxuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgdGFyZ2V0VHh0KVxuICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHRhcmdldFR4dFxuICAgICAgICBpbnB1dElELnNldEF0dHJpYnV0ZSgndmFsdWUnLCB0YXJnZXRJRClcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBsb2FkaW5nKCkge1xuICAgIGNvbnN0IGRyb3Bkb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGUtbGlzdCcpXG4gICAgY29uc3QgZHJvcGRvd25MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGUtbGlzdCBsaScpXG5cbiAgICBwYXN0YnVkZ2V0LmdldEJ1ZGdldCgoYnVkZ2V0cywgaWQpID0+IHtcbiAgICAgIGNvbnN0IGRhdGUgPSBidWRnZXRzLmNyZWF0ZWRfYXQudG9EYXRlKClcbiAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgIGNvbnN0IHdoZW4gPSBmb3JtYXQobmV3IERhdGUoZGF0ZSksICdkZC9NTS95eXl5JylcbiAgICAgICAgY29uc3QgbGlzdCA9IGA8bGkgY2xhc3M9XCJkYXRlLWxpc3RfX2l0ZW1cIiBkYXRhLWlkPVwiJHtpZH1cIj4ke3doZW59PC9saT5gXG4gICAgICAgIGlmIChkcm9wZG93bkxpc3QudGV4dENvbnRlbnQgPT09ICdObyBzYXZlZCBkYXRlcycpIGRyb3Bkb3duTGlzdC5yZW1vdmUoKVxuICAgICAgICBkcm9wZG93bi5pbm5lckhUTUwgKz0gbGlzdFxuICAgICAgfVxuICAgIH0pXG5cbiAgICB0aGlzLnN0eWxlZERyb3Bkb3duKClcbiAgICAvLyB0b2RvOiBOZWVkIHRvIGFkZCBzZWxlY3QgaW50ZXJhY3Rpb24gYW5kIGFwcGx5IGNsYXNzIGFuZCBpbnB1dCB2YWx1ZSB0byBsb2FkIGRhdGEgb24gcGFnZVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVJQ29udHJvbGxlclxuIiwibW9kdWxlLmV4cG9ydHMgPSBicmVha3BvaW50czsiLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG5cbi8vIEV4dGVybmFsXG5pbXBvcnQgJ2FpcmJuYi1icm93c2VyLXNoaW1zJ1xuXG4vLyBJbnRlcm5hbFxuaW1wb3J0ICcuL21vZHVsZXMvaGVscGVycydcbmltcG9ydCBidWRnZXRDb250cm9sbGVyIGZyb20gJy4vbW9kdWxlcy9idWRnZXRjb250cm9sbGVyJ1xuaW1wb3J0IFVJQ29udHJvbGxlciBmcm9tICcuL21vZHVsZXMvdWljb250cm9sbGVyJ1xuaW1wb3J0IFBhc3RCdWRnZXQgZnJvbSAnLi9tb2R1bGVzL3Bhc3RidWRnZXQnXG5cbi8vIFJlbW92ZSBsb2FkaW5nIGNsYXNzIGZyb20gYm9keSBvbiB3aW5kb3cgbG9hZC5cbmNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jylcblxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcbiAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaXMtbG9hZGluZycpXG4gIH0sIDEwMClcbn1cblxuLy8gQ3JlYXRlIHRoZSBtYWluIGNvbnRyb2xsZXIgZm9yIHRoZSBhcHBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuY29uc3QgY29udHJvbGxlciA9ICgoYnVkZ2V0Q3RybCkgPT4ge1xuICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZF9fZm9ybScpXG4gIGNvbnN0IHR5cGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkX190eXBlJylcbiAgY29uc3QgZGVzYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGRfX2Rlc2NyaXB0aW9uJylcbiAgY29uc3QgdmFsdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkX192YWx1ZScpXG5cbiAgY29uc3QgVUlDdHJsID0gbmV3IFVJQ29udHJvbGxlcih0eXBlLCBkZXNjLCB2YWx1ZSlcbiAgY29uc3QgcGFzdGJ1ZGdldCA9IG5ldyBQYXN0QnVkZ2V0KClcblxuICAvLyBTaG9lIHRoZSBsYXRlc3QgZGF0ZVxuICBVSUN0cmwuZGlzcGxheURhdGUoKVxuXG4gIC8vIFRvZ2dsZSB0aGUgc3VibWl0IG5ldyBjb3N0IGZyb20gZWl0aGVyIGluY29tZSBvciBleHBlbnNlLlxuICBVSUN0cmwuY2hhbmdlVHlwZSgpXG5cbiAgLy8gTG9hZCBidWRnZXRzIGZyb20gRmlyZWJhc2VcbiAgVUlDdHJsLmxvYWRpbmcoKVxuXG4gIC8vIFNhdmUgYnVkZ2V0cyB0byBGaXJlYmFzZVxuICBVSUN0cmwuc2F2aW5nKClcblxuICBjb25zdCB0ZXN0ID0gYnVkZ2V0Q3RybC5nZXREYXRhKClcbiAgY29uc3QgeyBpbmMgfSA9IHRlc3QuYWxsSXRlbXNcblxuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAvLyBHZXQgZmlsZWQgaW5wdXQgZGF0YVxuICAgIGNvbnN0IGlucHV0ID0gVUlDdHJsLmdldElucHV0KClcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgY29uc29sZS5sb2coaW5wdXQpXG4gICAgICBjb25zb2xlLmxvZyh0eXBlb2YgaW5wdXQudmFsdWUpXG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgdGhlIGZvcm0gZmllbGRzXG4gICAgZm9ybS5yZXNldCgpXG5cbiAgICAvLyBPbmx5IHJ1biBjYWxjdWxhdGlvbnMgaWYgdmFsaWQgaW5wdXRzIGFyZSBlbnRlcmVkXG4gICAgaWYgKGlucHV0LmRlc2MgIT09ICcnICYmICFpc05hTihpbnB1dC52YWx1ZSkgJiYgaW5wdXQudmFsdWUgPiAwKSB7XG4gICAgICAvLyBBZGQgdGhlIGl0ZW0gdG8gdGhlIGJ1ZGdldFxuICAgICAgY29uc3QgbmV3SXRlbSA9IGJ1ZGdldEN0cmwuYWRkSXRlbShcbiAgICAgICAgaW5wdXQudHlwZSxcbiAgICAgICAgaW5wdXQuZGVzY3JpcHRpb24sXG4gICAgICAgIGlucHV0LnZhbHVlXG4gICAgICApXG5cbiAgICAgIC8vIENhbGN1bGFlIHRoZSBidWRnZXQgYW5kIHVwZGF0ZSB0aGUgVUlcbiAgICAgIFVJQ3RybC5yZW5kZXIobmV3SXRlbSwgaW5wdXQudHlwZSkgLy8gQWRkIGl0ZW1zIHRvIGluY29tZSBvciBleHBlbnNlcyBsaXN0XG4gICAgICBVSUN0cmwudXBkYXRlQnVkZ2V0KCkgLy8gT3V0cHV0IHRoZSBuZXcgYnVkZ2V0XG4gICAgICBVSUN0cmwudXBkYXRlUGVyY2VudGFnZXMoKSAvLyBPdXRwdXQgdGhlIG5ldyBwZXJjZW50YWdlc1xuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBjb25zb2xlLmxvZygnZm9ybSBzdWJtaXR0ZWQhJylcbiAgICAgICAgY29uc29sZS5sb2cobmV3SXRlbSlcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coaW5jKVxuICB9KVxuICAvLyBEZWxldGUgYW4gYWRkZWQgaW5jb21lIG9yIGV4cGVuc2VcbiAgVUlDdHJsLmRlbGV0ZUl0ZW0oKVxuXG4gIHBhc3RidWRnZXQuZ2V0QnVkZ2V0KChkYXRhLCBpZCkgPT4ge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhLCBpZClcbiAgICB9XG4gIH0pXG59KShidWRnZXRDb250cm9sbGVyKVxuIiwibW9kdWxlLmV4cG9ydHMgPSBicm93c2VyOyIsImNvbnN0IGJ1ZGdldENvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICBjbGFzcyBCdWRnZXQge1xuICAgIGNvbnN0cnVjdG9yKGlkLCBkZXNjcmlwdGlvbiwgdmFsdWUpIHtcbiAgICAgIHRoaXMuaWQgPSBpZFxuICAgICAgdGhpcy5kZXNjID0gZGVzY3JpcHRpb25cbiAgICAgIHRoaXMudmFsID0gdmFsdWVcbiAgICAgIHRoaXMucGVyY2VudGFnZSA9IC0xXG4gICAgfVxuXG4gICAgY2FsY1BlcmNlbnRhZ2UodG90YWxJbmNvbWUpIHtcbiAgICAgIGlmICh0b3RhbEluY29tZSA+IDApIHtcbiAgICAgICAgdGhpcy5wZXJjZW50YWdlID0gTWF0aC5yb3VuZCgodGhpcy52YWwgLyB0b3RhbEluY29tZSkgKiAxMDApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSAtMVxuICAgICAgfVxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYHRoaXMgdmFsdWUgaXMgJHt0eXBlb2YgdGhpcy52YWx9YCxcbiAgICAgICAgICBgdGhlIHRvdGFsSW5jb21lICR7dHlwZW9mIHRvdGFsSW5jb21lfWBcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIGdldFBlcmNlbnRhZ2UoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wZXJjZW50YWdlXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZGF0YSA9IHtcbiAgICBhbGxJdGVtczoge1xuICAgICAgZXhwOiBbXSxcbiAgICAgIGluYzogW10sXG4gICAgICBzYXY6IFtdLFxuICAgIH0sXG4gICAgdG90YWxzOiB7XG4gICAgICBleHA6IDAsXG4gICAgICBpbmM6IDAsXG4gICAgICBzYXY6IDAsXG4gICAgfSxcbiAgICBwZXJjZW50OiB7XG4gICAgICBleHA6IC0xLFxuICAgICAgc2F2OiAtMSxcbiAgICB9LFxuICAgIGJ1ZGdldDogMCxcbiAgfVxuXG4gIGNvbnN0IGNhbGN1bGF0ZVRvdGFscyA9ICh0eXBlKSA9PiB7XG4gICAgbGV0IHN1bSA9IDBcbiAgICBkYXRhLmFsbEl0ZW1zW3R5cGVdLmZvckVhY2goKGN1cikgPT4ge1xuICAgICAgc3VtICs9IGN1ci52YWxcbiAgICB9KVxuICAgIGRhdGEudG90YWxzW3R5cGVdID0gc3VtXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFkZEl0ZW06ICh0eXBlLCBkZXNjLCB2YWwpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBuZXcgSURcbiAgICAgIGNvbnN0IElEID1cbiAgICAgICAgZGF0YS5hbGxJdGVtc1t0eXBlXS5sZW5ndGggPiAwXG4gICAgICAgICAgPyBkYXRhLmFsbEl0ZW1zW3R5cGVdW2RhdGEuYWxsSXRlbXNbdHlwZV0ubGVuZ3RoIC0gMV0uaWQgKyAxXG4gICAgICAgICAgOiAwXG5cbiAgICAgIC8vIFNldCBuZXcgaXRlbSB0byB1c2Ugb2JqZWN0XG4gICAgICBjb25zdCBuZXdJdGVtID0gbmV3IEJ1ZGdldChJRCwgZGVzYywgdmFsKVxuXG4gICAgICAvLyBQdXNoIGl0IGludG8gZGF0YSBzdHJ1Y3R1cmVcbiAgICAgIGRhdGEuYWxsSXRlbXNbdHlwZV0ucHVzaChuZXdJdGVtKVxuXG4gICAgICAvLyBjcmVhdGUgbmV3IGl0ZW1cbiAgICAgIHJldHVybiBuZXdJdGVtXG4gICAgfSxcbiAgICBjYWxjdWxhdGVCdWRnZXQ6ICgpID0+IHtcbiAgICAgIC8vIDEuIENhbGN1bGF0ZSB0aGUgYnVkZ2V0XG4gICAgICBjYWxjdWxhdGVUb3RhbHMoJ2V4cCcpXG4gICAgICBjYWxjdWxhdGVUb3RhbHMoJ2luYycpXG4gICAgICBjYWxjdWxhdGVUb3RhbHMoJ3NhdicpXG5cbiAgICAgIC8vIDIuIENhbGN1bGF0ZSB0aGUgYnVkZ2V0OiBpbmNvbWUgLSBleHBlbnNlc1xuICAgICAgZGF0YS5idWRnZXQgPSBkYXRhLnRvdGFscy5pbmMgLSAoZGF0YS50b3RhbHMuZXhwICsgZGF0YS50b3RhbHMuc2F2KVxuXG4gICAgICAvLyAzLiBDYWxjdWxhdGUgdGhlIHBlcmNlbnRhZ2Ugb2YgaW5jb21lIHRoYXQgd2Ugc3BlbnRcbiAgICAgIGlmIChkYXRhLnRvdGFscy5pbmMgPiAwKSB7XG4gICAgICAgIGRhdGEucGVyY2VudC5leHAgPSBNYXRoLnJvdW5kKChkYXRhLnRvdGFscy5leHAgLyBkYXRhLnRvdGFscy5pbmMpICogMTAwKVxuICAgICAgICBkYXRhLnBlcmNlbnQuc2F2ID0gTWF0aC5yb3VuZCgoZGF0YS50b3RhbHMuc2F2IC8gZGF0YS50b3RhbHMuaW5jKSAqIDEwMClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEucGVyY2VudC5leHAgPSAtMVxuICAgICAgICBkYXRhLnBlcmNlbnQuc2F2ID0gLTFcbiAgICAgIH1cblxuICAgICAgLy8gMy4gUmV0dXJuIHRoZSBidWRnZXRcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEudG90YWxzLmV4cCwgZGF0YS50b3RhbHMuaW5jKVxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmJ1ZGdldCwgZGF0YS5wZXJjZW50LmV4cCwgZGF0YS5wZXJjZW50LnNhdilcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9LFxuICAgIGNhbGN1bGF0ZVBlcmNlbnRhZ2VzOiAodHlwZSkgPT4ge1xuICAgICAgZGF0YS5hbGxJdGVtc1t0eXBlXS5mb3JFYWNoKChjdXIpID0+IHtcbiAgICAgICAgY3VyLmNhbGNQZXJjZW50YWdlKGRhdGEudG90YWxzLmluYylcbiAgICAgIH0pXG4gICAgfSxcbiAgICBnZXRQZXJjZW50YWdlczogKHR5cGUpID0+IHtcbiAgICAgIGNvbnN0IGFsbFBlcmMgPSBkYXRhLmFsbEl0ZW1zW3R5cGVdLm1hcCgoY3VyKSA9PiB7XG4gICAgICAgIHJldHVybiBjdXIuZ2V0UGVyY2VudGFnZSgpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGFsbFBlcmNcbiAgICB9LFxuICAgIHJlbW92ZUl0ZW06ICh0eXBlLCBpZCkgPT4ge1xuICAgICAgY29uc3QgaWRzID0gZGF0YS5hbGxJdGVtc1t0eXBlXS5tYXAoKGN1cnJlbnQpID0+IHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnQuaWRcbiAgICAgIH0pXG4gICAgICBjb25zdCBpbmRleCA9IGlkcy5pbmRleE9mKGlkKVxuXG4gICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgIGRhdGEuYWxsSXRlbXNbdHlwZV0uc3BsaWNlKGluZGV4LCAxKVxuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0RGF0YTogKCkgPT4ge1xuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9LFxuICB9XG59KSgpXG5cbmV4cG9ydCBkZWZhdWx0IGJ1ZGdldENvbnRyb2xsZXJcbiJdLCJzb3VyY2VSb290IjoiIn0=