(window.webpackJsonp=window.webpackJsonp||[]).push([["app"],{"+4zn":function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),o=n.n(a),s=n("yXPU"),c=n.n(s),i=n("lwsE"),l=n.n(i),r=n("W8MJ"),u=n.n(r),d=function(e){return e.map((function(e){return Object.assign({},e)}))},p=function(){function e(){l()(this,e),this.budgets=db.collection("budgets")}var t,n;return u()(e,[{key:"saveBudget",value:(n=c()(o.a.mark((function e(t){var n,a,s,c,i,l,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date,a=t.allItems,s=t.budget,c=t.percent,i=t.totals,l={budget:s,totalInc:i.inc,totalExp:i.exp,totalSav:i.sav,percentExp:c.exp,percentSav:c.sav,allItems:{inc:d(a.inc),exp:d(a.exp),sav:d(a.sav)},created_at:firebase.firestore.Timestamp.fromDate(n)},e.next=5,this.budgets.add(l);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"updateBudget",value:(t=c()(o.a.mark((function e(t,n){var a,s,c,i,l,r,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Date,s=t.allItems,c=t.budget,i=t.percent,l=t.totals,r={budget:c,totalInc:l.inc,totalExp:l.exp,totalSav:l.sav,percentExp:i.exp,percentSav:i.sav,allItems:{inc:d(s.inc),exp:d(s.exp),sav:d(s.sav)},created_at:firebase.firestore.Timestamp.fromDate(a)},e.next=5,this.budgets.doc(n).update(r);case 5:return u=e.sent,e.abrupt("return",u);case 7:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"getBudget",value:function(e){this.budgets.orderBy("created_at").onSnapshot((function(t){t.docChanges().forEach((function(t){"added"===t.type&&e(t.doc.data(),t.doc.id)}))}))}}]),e}();t.default=p},0:function(e,t,n){e.exports=n("kFay")},1:function(e,t){},E4hX:function(e,t,n){(function(e,t){for(var n,a=function(){},o=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],s=o.length,c=window.console=window.console||{};s--;)c[n=o[s]]||(c[n]=a);window.addEventListener("keydown",(function e(t){9===t.keyCode&&(document.body.classList.add("user-is-tabbing"),window.removeEventListener("keydown",e))})),document.querySelector("html").setAttribute("data-browser",e.name);var i=document.querySelector("body");t({xlarge:["1281px","1680px"],large:["981px","1280px"],medium:["737px","980px"],small:["481px","736px"],xsmall:[null,"480px"]}),e.mobile?i.classList.add("is-mobile"):(t.on(">medium",(function(){i.classList.remove("is-mobile"),i.classList.add("is-desktop")})),t.on("<=medium",(function(){i.classList.remove("is-desktop"),i.classList.add("is-mobile")}))),"localhost"===window.location.hostname&&console.log("localhost detected!")}).call(this,n("txRt"),n("a6Qp"))},SEKM:function(e,t,n){"use strict";n.r(t);var a=n("lwsE"),o=n.n(a),s=n("W8MJ"),c=n.n(s),i=n("b/SL"),l=n("xVb/"),r=new(n("+4zn").default),u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=Math.abs(e),s=(o=o.toFixed(2)).split("."),c=s[0],i=s[1];i=Number(i)>0?".".concat(i):"",c.length>3&&(c="".concat(c.substr(0,c.length-3),",").concat(c.substr(c.length-3,3)));var l=n?'<span class="currency">&pound;</span>':"";return"".concat(a?"exp"===t?'<span class="sign">&#45;</span> ':'<span class="sign">&#43;</span> ':"").concat(l).concat(c).concat(i)},d=function(){function e(t,n,a){o()(this,e),this.inputType=t,this.inputDesc=n,this.inputVal=a}return c()(e,[{key:"getInput",value:function(){return{type:this.inputType.value,description:this.inputDesc.value,value:Number(this.inputVal.value)}}},{key:"render",value:function(e,t){var n,a="exp"===t?"expenses":"sav"===t?"savings":"income",o=document.querySelector(".".concat(a,"__list"));n="\n    <li class='".concat(a,"__item' id='").concat(t,"-").concat(e.id,"'>\n      <div class='item-desc'><p>").concat(e.desc,"</p></div>\n      <div class=\"items\">\n        <div class='items__value'><p>").concat(u(e.val,t,!0,!1),"</p></div>\n    "),"exp"!==t&&"sav"!==t||(n+='<div class="items__percent"><p>0&#37;</p></div>'),n+='\n        <button class=\'btn btn--clear items__del\'>\n          <svg id="delete" class="icon" width="20" height="20" aria-hidden="true">\n            <use xlink:href="/assets/images/icons.svg#icon-delete"></use>\n          </svg>\n        </button>\n      </div>\n    </li>\n    ',o.innerHTML+=n}},{key:"getBudget",value:function(e){return{budget:e.budget,totalInc:e.totals.inc,totalExp:e.totals.exp,totalSav:e.totals.sav,percentExp:e.percent.exp,percentSav:e.percent.sav}}},{key:"displayBudget",value:function(e){var t=e.budget>0?"inc":"exp",n="exp"===t?"expenses":"income",a=document.querySelector(".budget__value"),o=document.querySelector(".budget__income .budget__amount"),s=document.querySelector(".budget__expenses .budget__amount"),c=document.querySelector(".budget__savings .budget__amount");a.innerHTML=u(e.budget,t,!0),o.innerHTML=u(e.totalInc,"inc"),s.innerHTML=u(e.totalExp,"exp"),c.innerHTML=u(e.totalSav,"exp"),console.log("The ".concat(n," is/are ").concat(e.budget)),console.log(o,s)}},{key:"displayPercentage",value:function(e,t){var n="exp"===t?"expenses":"savings",a=document.querySelector(".budget__".concat(n," .budget__percentage"));e>0?(a.classList.add("show"),a.innerHTML="".concat(e,"&#37;")):a.classList.remove("show"),console.log(a)}},{key:"updateBudget",value:function(){var e=l.default.calculateBudget(),t=this.getBudget(e);console.log(t),this.displayBudget(t),this.displayPercentage(t.percentExp,"exp"),this.displayPercentage(t.percentSav,"sav")}},{key:"displayPercentages",value:function(e,t){var n="exp"===t?"expenses":"savings";!function(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}(document.querySelectorAll(".".concat(n," .items__percent")),(function(t,n){e[n]>0?(t.classList.add("show"),t.innerHTML="".concat(e[n],"&#37;")):(t.classList.remove("show"),t.innerHTML="0&#37;")}))}},{key:"updatePercentages",value:function(){l.default.calculatePercentages(this.inputType.value);var e=l.default.getPercentages(this.inputType.value);this.displayPercentages(e,this.inputType.value)}},{key:"displayDate",value:function(){var e=document.querySelector(".budget__date"),t=new Date;e.textContent="".concat(["January","February","March","April","May","June","July","August","Sepetember","October","November","December"][t.getMonth()]," ").concat(t.getFullYear())}},{key:"changeType",value:function(){var e=this.inputType,t=document.querySelector("#check");e.addEventListener("change",(function(n){var a=Array.from(e.options);console.log(n),console.log(e.attributes,e.options,e.options.selectedIndex,a,a[1]),a.forEach((function(e){e.selected?(e.setAttribute("selected","selected"),t.classList.remove("exp","sav"),"exp"===e.value?t.classList.add("exp"):"sav"===e.value&&t.classList.add("sav")):e.removeAttribute("selected","selected"),console.log("Value ".concat(e.value))}))}))}},{key:"deleteItem",value:function(){var e=this;document.querySelector(".income-expenses").addEventListener("click",(function(t){if("delete"===t.target.id){var n=t.target.closest(".items").parentElement,a=n.id.split("-"),o=a[0],s=Number(a[1]);console.log(t.target,n,a,o,s),l.default.removeItem(o,s),n.remove(),e.updateBudget(),e.updatePercentages()}}))}},{key:"saving",value:function(){var e=document.querySelector("#save"),t=l.default.getData(),n=Object(i.format)(new Date,"dd/MM/yyyy"),a=[],o=!1;e.addEventListener("click",(function(){var s=document.querySelectorAll(".date-list > li");Array.from(s).forEach((function(e){a.push({date:e.textContent,id:e.getAttribute("data-id")})})),console.log(t,t.allItems.inc,a);for(var c=0;c<a.length;c++)if(a[c].date===n){o=!0;break}o?(a.forEach((function(a){a.date===n&&r.updateBudget(t,a.id).then((function(){console.log("updated"),e.textContent="Updated",e.classList.remove("btn--ghost"),setTimeout((function(){e.textContent="Save",e.classList.add("btn--ghost")}),4e3)})).catch((function(e){console.error(e)}))})),console.log("has todays date")):(r.saveBudget(t).then((function(){console.log("saved"),e.textContent="Saved",e.classList.remove("btn--ghost"),setTimeout((function(){e.textContent="Save",e.classList.add("btn--ghost")}),4e3)})).catch((function(e){console.error(e)})),console.log("does not have todays date"))}))}},{key:"loading",value:function(){var e=document.querySelector(".date-list");r.getBudget((function(t,n){var a=t.created_at.toDate();if(a){var o=Object(i.format)(new Date(a),"dd/MM/yyyy"),s='<li class="date-list__item" data-date="'.concat(o,'" data-id="').concat(n,'">').concat(o,"</li>");e.innerHTML+=s}}))}}]),e}();t.default=d},a6Qp:function(e,t){e.exports=breakpoints},kFay:function(e,t,n){"use strict";n.r(t);var a=n("cDf5"),o=n.n(a),s=(n("OuUZ"),n("E4hX"),n("xVb/")),c=n("SEKM"),i=n("+4zn"),l=document.querySelector("body");window.onload=function(){window.setTimeout((function(){l.classList.remove("is-loading")}),100)};!function(e){var t=document.querySelector(".add__form"),n=document.querySelector(".add__type"),a=document.querySelector(".add__description"),s=document.querySelector(".add__value"),l=new c.default(n,a,s),r=new i.default;l.displayDate(),l.changeType(),l.loading(),l.saving();var u=e.getData().allItems.inc;t.addEventListener("submit",(function(n){n.preventDefault();var a=l.getInput();if(console.log(a),console.log(o()(a.value)),t.reset(),""!==a.desc&&!isNaN(a.value)&&a.value>0){var s=e.addItem(a.type,a.description,a.value);l.render(s,a.type),l.updateBudget(),l.updatePercentages(),console.log("form submitted!"),console.log(s)}console.log(u)})),l.deleteItem(),r.getBudget((function(e,t){console.log(e,t)}))}(s.default)},txRt:function(e,t){e.exports=browser},"xVb/":function(e,t,n){"use strict";n.r(t);var a,o,s,c=n("cDf5"),i=n.n(c),l=n("lwsE"),r=n.n(l),u=n("W8MJ"),d=n.n(u),p=(a=function(){function e(t,n,a){r()(this,e),this.id=t,this.desc=n,this.val=a,this.percentage=-1}return d()(e,[{key:"calcPercentage",value:function(e){this.percentage=e>0?Math.round(this.val/e*100):-1,console.log("this value is ".concat(i()(this.val)),"the totalIncome ".concat(i()(e)))}},{key:"getPercentage",value:function(){return this.percentage}}]),e}(),o={allItems:{exp:[],inc:[],sav:[]},totals:{exp:0,inc:0,sav:0},percent:{exp:-1,sav:-1},budget:0},s=function(e){var t=0;o.allItems[e].forEach((function(e){t+=e.val})),o.totals[e]=t},{addItem:function(e,t,n){var s=o.allItems[e].length>0?o.allItems[e][o.allItems[e].length-1].id+1:0,c=new a(s,t,n);return o.allItems[e].push(c),c},calculateBudget:function(){return s("exp"),s("inc"),s("sav"),o.budget=o.totals.inc-(o.totals.exp+o.totals.sav),o.totals.inc>0?(o.percent.exp=Math.round(o.totals.exp/o.totals.inc*100),o.percent.sav=Math.round(o.totals.sav/o.totals.inc*100)):(o.percent.exp=-1,o.percent.sav=-1),console.log(o.totals.exp,o.totals.inc),console.log(o.budget,o.percent.exp,o.percent.sav),o},calculatePercentages:function(e){o.allItems[e].forEach((function(e){e.calcPercentage(o.totals.inc)}))},getPercentages:function(e){return o.allItems[e].map((function(e){return e.getPercentage()}))},removeItem:function(e,t){var n=o.allItems[e].map((function(e){return e.id})).indexOf(t);-1!==n&&o.allItems[e].splice(n,1)},getData:function(){return o}});t.default=p}},[[0,"runtime","vendors"]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWJzaXRlL3NyYy9qcy9tb2R1bGVzL3Bhc3RidWRnZXQuanMiLCJ3ZWJwYWNrOi8vLy4vd2Vic2l0ZS9zcmMvanMvbW9kdWxlcy9oZWxwZXJzLmpzIiwid2VicGFjazovLy8uL3dlYnNpdGUvc3JjL2pzL21vZHVsZXMvdWljb250cm9sbGVyLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcImJyZWFrcG9pbnRzXCIiLCJ3ZWJwYWNrOi8vLy4vd2Vic2l0ZS9zcmMvanMvYXBwLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcImJyb3dzZXJcIiIsIndlYnBhY2s6Ly8vLi93ZWJzaXRlL3NyYy9qcy9tb2R1bGVzL2J1ZGdldGNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiYXJyYXlSZWFzc2lnbiIsImFyIiwibWFwIiwib2JqIiwiT2JqZWN0IiwiYXNzaWduIiwiUGFzdEJ1ZGdldCIsInRoaXMiLCJidWRnZXRzIiwiZGIiLCJjb2xsZWN0aW9uIiwibm93IiwiRGF0ZSIsImFsbEl0ZW1zIiwiYnVkZ2V0IiwicGVyY2VudCIsInRvdGFscyIsImJ1ZGdldERhdGEiLCJ0b3RhbEluYyIsImluYyIsInRvdGFsRXhwIiwiZXhwIiwidG90YWxTYXYiLCJzYXYiLCJwZXJjZW50RXhwIiwicGVyY2VudFNhdiIsImNyZWF0ZWRfYXQiLCJmaXJlYmFzZSIsImZpcmVzdG9yZSIsIlRpbWVzdGFtcCIsImZyb21EYXRlIiwiYWRkIiwicmVzcG9uc2UiLCJpZCIsImRvYyIsInVwZGF0ZSIsImNiIiwib3JkZXJCeSIsIm9uU25hcHNob3QiLCJzbmFwc2hvdCIsImRvY0NoYW5nZXMiLCJmb3JFYWNoIiwiY2hhbmdlIiwidHlwZSIsImRhdGEiLCJtZXRob2QiLCJub29wIiwibWV0aG9kcyIsImxlbmd0aCIsImNvbnNvbGUiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlRmlyc3RUYWIiLCJlIiwia2V5Q29kZSIsImRvY3VtZW50IiwiYm9keSIsImNsYXNzTGlzdCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJxdWVyeVNlbGVjdG9yIiwic2V0QXR0cmlidXRlIiwiYnJvd3NlciIsIm5hbWUiLCJicmVha3BvaW50cyIsInhsYXJnZSIsImxhcmdlIiwibWVkaXVtIiwic21hbGwiLCJ4c21hbGwiLCJtb2JpbGUiLCJvbiIsInJlbW92ZSIsImxvY2F0aW9uIiwiaG9zdG5hbWUiLCJsb2ciLCJwYXN0YnVkZ2V0IiwiZm9ybWF0TnVtYmVyIiwibnVtYmVyIiwibW9uZXkiLCJjYWxjIiwibnVtIiwiTWF0aCIsImFicyIsIm51bVNwbGl0IiwidG9GaXhlZCIsInNwbGl0IiwiaW50IiwiZGVjaW1hbCIsIk51bWJlciIsInN1YnN0ciIsImN1cnJlbmN5IiwiVUlDb250cm9sbGVyIiwiY29zdCIsImRlc2NyaXB0aW9uIiwidmFsdWUiLCJpbnB1dFR5cGUiLCJpbnB1dERlc2MiLCJpbnB1dFZhbCIsImh0bWwiLCJpdGVtIiwibGlzdCIsImRlc2MiLCJ2YWwiLCJpbm5lckhUTUwiLCJ0eXBlcyIsInBlcmNlbnRhZ2UiLCJnZXREYXRhIiwiYnVkZ2V0Q29udHJvbGxlciIsImNhbGN1bGF0ZUJ1ZGdldCIsIm5ld0J1ZGdldCIsImdldEJ1ZGdldCIsImRpc3BsYXlCdWRnZXQiLCJkaXNwbGF5UGVyY2VudGFnZSIsInBlcmNlbnRhZ2VzIiwiaSIsIm5vZGVMaXN0Rm9yRWFjaCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjdXJyZW50IiwiaW5kZXgiLCJjYWxjdWxhdGVQZXJjZW50YWdlcyIsImdldFBlcmNlbnRhZ2VzIiwiZGlzcGxheVBlcmNlbnRhZ2VzIiwiYnVkZ2V0RGF0ZSIsImRhdGUiLCJ0ZXh0Q29udGVudCIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJjaGVjayIsIm9wdGlvbnMiLCJBcnJheSIsImZyb20iLCJhdHRyaWJ1dGVzIiwic2VsZWN0ZWRJbmRleCIsIm9wdGlvbiIsInNlbGVjdGVkIiwicmVtb3ZlQXR0cmlidXRlIiwidGFyZ2V0IiwiY2xvc2VzdCIsInBhcmVudEVsZW1lbnQiLCJzcGxpdElEIiwiSUQiLCJyZW1vdmVJdGVtIiwidXBkYXRlQnVkZ2V0IiwidXBkYXRlUGVyY2VudGFnZXMiLCJidXR0b24iLCJmb3JtYXQiLCJpdGVtcyIsImZvdW5kIiwicHVzaCIsImdldEF0dHJpYnV0ZSIsInRoZW4iLCJzZXRUaW1lb3V0IiwiZXJyIiwiZXJyb3IiLCJzYXZlQnVkZ2V0IiwiZHJvcGRvd24iLCJ0b0RhdGUiLCJ3aGVuIiwibW9kdWxlIiwiZXhwb3J0cyIsIm9ubG9hZCIsImJ1ZGdldEN0cmwiLCJmb3JtIiwiVUlDdHJsIiwiZGlzcGxheURhdGUiLCJjaGFuZ2VUeXBlIiwibG9hZGluZyIsInNhdmluZyIsInByZXZlbnREZWZhdWx0IiwiaW5wdXQiLCJnZXRJbnB1dCIsInJlc2V0IiwiaXNOYU4iLCJuZXdJdGVtIiwiYWRkSXRlbSIsInJlbmRlciIsImRlbGV0ZUl0ZW0iLCJCdWRnZXQiLCJjYWxjdWxhdGVUb3RhbHMiLCJ0b3RhbEluY29tZSIsInJvdW5kIiwic3VtIiwiY3VyIiwiY2FsY1BlcmNlbnRhZ2UiLCJnZXRQZXJjZW50YWdlIiwiaW5kZXhPZiIsInNwbGljZSJdLCJtYXBwaW5ncyI6ImdNQUtNQSxFQUFnQixTQUFDQyxHQUNyQixPQUFPQSxFQUFHQyxLQUFJLFNBQUNDLEdBQ2IsT0FBT0MsT0FBT0MsT0FBTyxHQUFJRixPQUl2QkcsRSxXQUNKLGFBQWMsWUFDWkMsS0FBS0MsUUFBVUMsR0FBR0MsV0FBVyxXLDBFQUdkUCxHLDBGQUNUUSxFQUFNLElBQUlDLEtBQ1JDLEVBQXNDVixFQUF0Q1UsU0FBVUMsRUFBNEJYLEVBQTVCVyxPQUFRQyxFQUFvQlosRUFBcEJZLFFBQVNDLEVBQVdiLEVBQVhhLE9BQzdCQyxFQUFhLENBQ2pCSCxTQUNBSSxTQUFVRixFQUFPRyxJQUNqQkMsU0FBVUosRUFBT0ssSUFDakJDLFNBQVVOLEVBQU9PLElBQ2pCQyxXQUFZVCxFQUFRTSxJQUNwQkksV0FBWVYsRUFBUVEsSUFDcEJWLFNBQVUsQ0FDUk0sSUFBS25C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RXlCLEVBQUs3QixRQUFRUSxJQUFNMEQsS0FBS21HLE1BQU94SSxFQUFLNUIsT0FBT08sSUFBTXFCLEVBQUs1QixPQUFPRyxJQUFPLE9BRXBFeUIsRUFBSzdCLFFBQVFNLEtBQU8sRUFDcEJ1QixFQUFLN0IsUUFBUVEsS0FBTyxHQUtwQjBCLFFBQVF5QixJQUFJOUIsRUFBSzVCLE9BQU9LLElBQUt1QixFQUFLNUIsT0FBT0csS0FDekM4QixRQUFReUIsSUFBSTlCLEVBQUs5QixPQUFROEIsRUFBSzdCLFFBQVFNLElBQUt1QixFQUFLN0IsUUFBUVEsS0FHbkRxQixHQUVUMkUscUJBQXNCLFNBQUM1RSxHQUNyQkMsRUFBSy9CLFNBQVM4QixHQUFNRixTQUFRLFNBQUM2SSxHQUMzQkEsRUFBSUMsZUFBZTNJLEVBQUs1QixPQUFPRyxTQUduQ3FHLGVBQWdCLFNBQUM3RSxHQUlmLE9BSGdCQyxFQUFLL0IsU0FBUzhCLEdBQU16QyxLQUFJLFNBQUNvTCxHQUN2QyxPQUFPQSxFQUFJRSxvQkFJZjNDLFdBQVksU0FBQ2xHLEVBQU1WLEdBQ2pCLElBR01xRixFQUhNMUUsRUFBSy9CLFNBQVM4QixHQUFNekMsS0FBSSxTQUFDbUgsR0FDbkMsT0FBT0EsRUFBUXBGLE1BRUN3SixRQUFReEosSUFFWCxJQUFYcUYsR0FDRjFFLEVBQUsvQixTQUFTOEIsR0FBTStJLE9BQU9wRSxFQUFPLElBR3RDWixRQUFTLFdBQ1AsT0FBTzlELEtBS0UrRCxjIiwiZmlsZSI6ImFwcC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBwcmVmZXItb2JqZWN0LXNwcmVhZCAqL1xuLy8gdG9kbzogc2F2ZSBidWRnZXQgZGF0YSB0byBmaXJlYmFzZVxuLy8gdG9kbzogZ2V0IGFsbEl0ZW1zIGRhdGEgdG8gc2F2ZSBzbyB0aGV5IGNhbiBiZSByZXBvcHVsYXRlZCB3aGVuIGxvYWRlZC5cbi8vIHRvZG86IGdldCB0aGUgZGF0YSBmcm9tIGZpcmViYXNlIHdoZW4gYSBkYXRlIGhhcyBiZWVuIGNob3NlbiBmcm9tIHRoZSBzZWxlY3Qgb3B0aW9ucyBhbmQgdXBkYXRlIHRoZSBVSVxuXG5jb25zdCBhcnJheVJlYXNzaWduID0gKGFyKSA9PiB7XG4gIHJldHVybiBhci5tYXAoKG9iaikgPT4ge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBvYmopXG4gIH0pXG59XG5cbmNsYXNzIFBhc3RCdWRnZXQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmJ1ZGdldHMgPSBkYi5jb2xsZWN0aW9uKCdidWRnZXRzJylcbiAgfVxuXG4gIGFzeW5jIHNhdmVCdWRnZXQob2JqKSB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxuICAgIGNvbnN0IHsgYWxsSXRlbXMsIGJ1ZGdldCwgcGVyY2VudCwgdG90YWxzIH0gPSBvYmpcbiAgICBjb25zdCBidWRnZXREYXRhID0ge1xuICAgICAgYnVkZ2V0LFxuICAgICAgdG90YWxJbmM6IHRvdGFscy5pbmMsXG4gICAgICB0b3RhbEV4cDogdG90YWxzLmV4cCxcbiAgICAgIHRvdGFsU2F2OiB0b3RhbHMuc2F2LFxuICAgICAgcGVyY2VudEV4cDogcGVyY2VudC5leHAsXG4gICAgICBwZXJjZW50U2F2OiBwZXJjZW50LnNhdixcbiAgICAgIGFsbEl0ZW1zOiB7XG4gICAgICAgIGluYzogYXJyYXlSZWFzc2lnbihhbGxJdGVtcy5pbmMpLFxuICAgICAgICBleHA6IGFycmF5UmVhc3NpZ24oYWxsSXRlbXMuZXhwKSxcbiAgICAgICAgc2F2OiBhcnJheVJlYXNzaWduKGFsbEl0ZW1zLnNhdiksXG4gICAgICB9LFxuICAgICAgY3JlYXRlZF9hdDogZmlyZWJhc2UuZmlyZXN0b3JlLlRpbWVzdGFtcC5mcm9tRGF0ZShub3cpLFxuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYnVkZ2V0cy5hZGQoYnVkZ2V0RGF0YSlcbiAgICByZXR1cm4gcmVzcG9uc2VcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUJ1ZGdldChvYmosIGlkKSB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxuICAgIGNvbnN0IHsgYWxsSXRlbXMsIGJ1ZGdldCwgcGVyY2VudCwgdG90YWxzIH0gPSBvYmpcbiAgICBjb25zdCBidWRnZXREYXRhID0ge1xuICAgICAgYnVkZ2V0LFxuICAgICAgdG90YWxJbmM6IHRvdGFscy5pbmMsXG4gICAgICB0b3RhbEV4cDogdG90YWxzLmV4cCxcbiAgICAgIHRvdGFsU2F2OiB0b3RhbHMuc2F2LFxuICAgICAgcGVyY2VudEV4cDogcGVyY2VudC5leHAsXG4gICAgICBwZXJjZW50U2F2OiBwZXJjZW50LnNhdixcbiAgICAgIGFsbEl0ZW1zOiB7XG4gICAgICAgIGluYzogYXJyYXlSZWFzc2lnbihhbGxJdGVtcy5pbmMpLFxuICAgICAgICBleHA6IGFycmF5UmVhc3NpZ24oYWxsSXRlbXMuZXhwKSxcbiAgICAgICAgc2F2OiBhcnJheVJlYXNzaWduKGFsbEl0ZW1zLnNhdiksXG4gICAgICB9LFxuICAgICAgY3JlYXRlZF9hdDogZmlyZWJhc2UuZmlyZXN0b3JlLlRpbWVzdGFtcC5mcm9tRGF0ZShub3cpLFxuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYnVkZ2V0cy5kb2MoaWQpLnVwZGF0ZShidWRnZXREYXRhKVxuICAgIHJldHVybiByZXNwb25zZVxuICB9XG5cbiAgZ2V0QnVkZ2V0KGNiKSB7XG4gICAgdGhpcy5idWRnZXRzLm9yZGVyQnkoJ2NyZWF0ZWRfYXQnKS5vblNuYXBzaG90KChzbmFwc2hvdCkgPT4ge1xuICAgICAgc25hcHNob3QuZG9jQ2hhbmdlcygpLmZvckVhY2goKGNoYW5nZSkgPT4ge1xuICAgICAgICBpZiAoY2hhbmdlLnR5cGUgPT09ICdhZGRlZCcpIHtcbiAgICAgICAgICBjYihjaGFuZ2UuZG9jLmRhdGEoKSwgY2hhbmdlLmRvYy5pZClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBhc3RCdWRnZXRcbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wbHVzcGx1cyAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tbXVsdGktYXNzaWduICovXG5cbi8vIEF2b2lkIGBjb25zb2xlYCBlcnJvcnMgaW4gYnJvd3NlcnMgdGhhdCBsYWNrIGEgY29uc29sZS5cbntcbiAgbGV0IG1ldGhvZFxuICBjb25zdCBub29wID0gKCkgPT4ge31cbiAgY29uc3QgbWV0aG9kcyA9IFtcbiAgICAnYXNzZXJ0JyxcbiAgICAnY2xlYXInLFxuICAgICdjb3VudCcsXG4gICAgJ2RlYnVnJyxcbiAgICAnZGlyJyxcbiAgICAnZGlyeG1sJyxcbiAgICAnZXJyb3InLFxuICAgICdleGNlcHRpb24nLFxuICAgICdncm91cCcsXG4gICAgJ2dyb3VwQ29sbGFwc2VkJyxcbiAgICAnZ3JvdXBFbmQnLFxuICAgICdpbmZvJyxcbiAgICAnbG9nJyxcbiAgICAnbWFya1RpbWVsaW5lJyxcbiAgICAncHJvZmlsZScsXG4gICAgJ3Byb2ZpbGVFbmQnLFxuICAgICd0YWJsZScsXG4gICAgJ3RpbWUnLFxuICAgICd0aW1lRW5kJyxcbiAgICAndGltZWxpbmUnLFxuICAgICd0aW1lbGluZUVuZCcsXG4gICAgJ3RpbWVTdGFtcCcsXG4gICAgJ3RyYWNlJyxcbiAgICAnd2FybicsXG4gIF1cbiAgbGV0IHsgbGVuZ3RoIH0gPSBtZXRob2RzXG4gIGNvbnN0IGNvbnNvbGUgPSAod2luZG93LmNvbnNvbGUgPSB3aW5kb3cuY29uc29sZSB8fCB7fSlcblxuICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICBtZXRob2QgPSBtZXRob2RzW2xlbmd0aF1cblxuICAgIC8vIE9ubHkgc3R1YiB1bmRlZmluZWQgbWV0aG9kcy5cbiAgICBpZiAoIWNvbnNvbGVbbWV0aG9kXSkge1xuICAgICAgY29uc29sZVttZXRob2RdID0gbm9vcFxuICAgIH1cbiAgfVxufVxuXG4vLyBBZGQgdGFiYmluZyBpbmRpY2F0b3IgdG8gd2luZG93XG5jb25zdCBoYW5kbGVGaXJzdFRhYiA9IChlKSA9PiB7XG4gIGlmIChlLmtleUNvZGUgPT09IDkpIHtcbiAgICAvLyB0aGUgXCJJIGFtIGEga2V5Ym9hcmQgdXNlclwiIGtleVxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgndXNlci1pcy10YWJiaW5nJylcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUZpcnN0VGFiKVxuICB9XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlRmlyc3RUYWIpXG5cbi8vIEFkZCBhIGJyb3dlciBpbmRpY2F0b3IgdG8gdGhlIEhUTUwgZWxlbWVudC5cbmNvbnN0IGh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJylcbmh0bWwuc2V0QXR0cmlidXRlKCdkYXRhLWJyb3dzZXInLCBicm93c2VyLm5hbWUpXG5cbi8vIERldGVjdCBpZiBtb2JpbGUgb3IgZGVza3RvcC5cbmNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JylcblxuYnJlYWtwb2ludHMoe1xuICB4bGFyZ2U6IFsnMTI4MXB4JywgJzE2ODBweCddLFxuICBsYXJnZTogWyc5ODFweCcsICcxMjgwcHgnXSxcbiAgbWVkaXVtOiBbJzczN3B4JywgJzk4MHB4J10sXG4gIHNtYWxsOiBbJzQ4MXB4JywgJzczNnB4J10sXG4gIHhzbWFsbDogW251bGwsICc0ODBweCddLFxufSlcblxuaWYgKGJyb3dzZXIubW9iaWxlKSB7XG4gIGJvZHkuY2xhc3NMaXN0LmFkZCgnaXMtbW9iaWxlJylcbn0gZWxzZSB7XG4gIGJyZWFrcG9pbnRzLm9uKCc+bWVkaXVtJywgKCkgPT4ge1xuICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaXMtbW9iaWxlJylcbiAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ2lzLWRlc2t0b3AnKVxuICB9KVxuICBicmVha3BvaW50cy5vbignPD1tZWRpdW0nLCAoKSA9PiB7XG4gICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1kZXNrdG9wJylcbiAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ2lzLW1vYmlsZScpXG4gIH0pXG59XG5cbi8vIExvZyBpZiBydW5uaW5nIGluIGxvY2FsaG9zdCB3aGVuIGluIGRldmVsb3BtZW50IG1vZGUuXG5pZiAoXG4gIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PT0gJ2xvY2FsaG9zdCcgJiZcbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJ1xuKSB7XG4gIGNvbnNvbGUubG9nKCdsb2NhbGhvc3QgZGV0ZWN0ZWQhJylcbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXMgKi9cbmltcG9ydCB7IGZvcm1hdCB9IGZyb20gJ2RhdGUtZm5zJ1xuaW1wb3J0IGJ1ZGdldENvbnRyb2xsZXIgZnJvbSAnLi9idWRnZXRjb250cm9sbGVyJ1xuaW1wb3J0IFBhc3RCdWRnZXQgZnJvbSAnLi9wYXN0YnVkZ2V0J1xuXG5jb25zdCBwYXN0YnVkZ2V0ID0gbmV3IFBhc3RCdWRnZXQoKVxuXG5jb25zdCBmb3JtYXROdW1iZXIgPSAobnVtYmVyLCB0eXBlLCBtb25leSA9IGZhbHNlLCBjYWxjID0gdHJ1ZSkgPT4ge1xuICAvKipcbiAgICogKyBvciAtIGJlZm9yZSB0aGUgbnVtYmVyXG4gICAqIGV4YWN0bHkgMiBkZWNpbWFsIHBvaW50c1xuICAgKiBjb21tYSBzZXBlcmF0aW5nIHRoZSB0aG91c2FuZHNcbiAgICpcbiAgICogMjMxMC40NTY3ID0gKyAyLDMxMC40NlxuICAgKi9cbiAgbGV0IG51bSA9IE1hdGguYWJzKG51bWJlcilcbiAgbnVtID0gbnVtLnRvRml4ZWQoMilcblxuICBjb25zdCBudW1TcGxpdCA9IG51bS5zcGxpdCgnLicpIC8vIG5vdyBhIHN0cmluZyBhbmQgd2lsbCBzcGxpdCB0aGUgLiB0byByZXBsYWNlIHdpdGggYSAsXG4gIGxldCBpbnQgPSBudW1TcGxpdFswXVxuICBsZXQgZGVjaW1hbCA9IG51bVNwbGl0WzFdXG4gIGRlY2ltYWwgPSBOdW1iZXIoZGVjaW1hbCkgPiAwID8gYC4ke2RlY2ltYWx9YCA6ICcnXG5cbiAgaWYgKGludC5sZW5ndGggPiAzKSB7XG4gICAgLy8gc3Vic3RyIGFsbG93cyBmb3Igb25seSBwYXJ0IG9mIHRoZSBzdHJpbmcgdG8gYmUgdGFrZW5cbiAgICBpbnQgPSBgJHtpbnQuc3Vic3RyKDAsIGludC5sZW5ndGggLSAzKX0sJHtpbnQuc3Vic3RyKGludC5sZW5ndGggLSAzLCAzKX1gIC8vIGlucHV0IDIzMTAsIG91dHB1dCAyLDMxMFxuICB9XG5cbiAgbGV0IHNpZ25cbiAgaWYgKGNhbGMpIHtcbiAgICBzaWduID1cbiAgICAgIHR5cGUgPT09ICdleHAnXG4gICAgICAgID8gJzxzcGFuIGNsYXNzPVwic2lnblwiPiYjNDU7PC9zcGFuPiAnXG4gICAgICAgIDogJzxzcGFuIGNsYXNzPVwic2lnblwiPiYjNDM7PC9zcGFuPiAnXG4gIH0gZWxzZSB7XG4gICAgc2lnbiA9ICcnXG4gIH1cbiAgY29uc3QgY3VycmVuY3kgPSBtb25leSA/ICc8c3BhbiBjbGFzcz1cImN1cnJlbmN5XCI+JnBvdW5kOzwvc3Bhbj4nIDogJydcblxuICAvLyBSZXR1cm4gdGhlIGZvcm1hdHRlZCBzdHJpbmdcbiAgcmV0dXJuIGAke3NpZ259JHtjdXJyZW5jeX0ke2ludH0ke2RlY2ltYWx9YFxufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSBwcmVmZXItZGVzdHJ1Y3R1cmluZyAqL1xuY2xhc3MgVUlDb250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IoY29zdCwgZGVzY3JpcHRpb24sIHZhbHVlKSB7XG4gICAgdGhpcy5pbnB1dFR5cGUgPSBjb3N0XG4gICAgdGhpcy5pbnB1dERlc2MgPSBkZXNjcmlwdGlvblxuICAgIHRoaXMuaW5wdXRWYWwgPSB2YWx1ZVxuICB9XG5cbiAgZ2V0SW5wdXQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IHRoaXMuaW5wdXRUeXBlLnZhbHVlLCAvLyBXaWxsIGJlIGVpdGhlciBpbmMgb3IgZXhwXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5pbnB1dERlc2MudmFsdWUsXG4gICAgICB2YWx1ZTogTnVtYmVyKHRoaXMuaW5wdXRWYWwudmFsdWUpLFxuICAgIH1cbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXG4gIHJlbmRlcihvYmosIHR5cGUpIHtcbiAgICBjb25zdCBpdGVtID1cbiAgICAgIHR5cGUgPT09ICdleHAnID8gJ2V4cGVuc2VzJyA6IHR5cGUgPT09ICdzYXYnID8gJ3NhdmluZ3MnIDogJ2luY29tZSdcbiAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aXRlbX1fX2xpc3RgKVxuICAgIGxldCBodG1sXG5cbiAgICAvLyBDcmVhdGUgSFRNTCBzdHJpbmcgd2l0aCBwbGFjZWhvbGRlclxuICAgIGh0bWwgPSBgXG4gICAgPGxpIGNsYXNzPScke2l0ZW19X19pdGVtJyBpZD0nJHt0eXBlfS0ke29iai5pZH0nPlxuICAgICAgPGRpdiBjbGFzcz0naXRlbS1kZXNjJz48cD4ke29iai5kZXNjfTwvcD48L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJpdGVtc1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPSdpdGVtc19fdmFsdWUnPjxwPiR7Zm9ybWF0TnVtYmVyKFxuICAgICAgICAgIG9iai52YWwsXG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIGZhbHNlXG4gICAgICAgICl9PC9wPjwvZGl2PlxuICAgIGBcblxuICAgIGlmICh0eXBlID09PSAnZXhwJyB8fCB0eXBlID09PSAnc2F2Jykge1xuICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cIml0ZW1zX19wZXJjZW50XCI+PHA+MCYjMzc7PC9wPjwvZGl2PidcbiAgICB9XG5cbiAgICBodG1sICs9IGBcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz0nYnRuIGJ0bi0tY2xlYXIgaXRlbXNfX2RlbCc+XG4gICAgICAgICAgPHN2ZyBpZD1cImRlbGV0ZVwiIGNsYXNzPVwiaWNvblwiIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxuICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPVwiL2Fzc2V0cy9pbWFnZXMvaWNvbnMuc3ZnI2ljb24tZGVsZXRlXCI+PC91c2U+XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9saT5cbiAgICBgXG5cbiAgICAvLyBJbnNlcnQgSFRNTCBpbnRvIHRoZSBET01cbiAgICBsaXN0LmlubmVySFRNTCArPSBodG1sXG4gIH1cblxuICBnZXRCdWRnZXQoZGF0YSkge1xuICAgIHJldHVybiB7XG4gICAgICBidWRnZXQ6IGRhdGEuYnVkZ2V0LFxuICAgICAgdG90YWxJbmM6IGRhdGEudG90YWxzLmluYyxcbiAgICAgIHRvdGFsRXhwOiBkYXRhLnRvdGFscy5leHAsXG4gICAgICB0b3RhbFNhdjogZGF0YS50b3RhbHMuc2F2LFxuICAgICAgcGVyY2VudEV4cDogZGF0YS5wZXJjZW50LmV4cCxcbiAgICAgIHBlcmNlbnRTYXY6IGRhdGEucGVyY2VudC5zYXYsXG4gICAgfVxuICB9XG5cbiAgZGlzcGxheUJ1ZGdldChvYmopIHtcbiAgICBjb25zdCB0eXBlID0gb2JqLmJ1ZGdldCA+IDAgPyAnaW5jJyA6ICdleHAnXG4gICAgY29uc3QgdHlwZXMgPSB0eXBlID09PSAnZXhwJyA/ICdleHBlbnNlcycgOiAnaW5jb21lJ1xuICAgIGNvbnN0IGJ1ZGdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idWRnZXRfX3ZhbHVlJylcbiAgICBjb25zdCBpbmMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuYnVkZ2V0X19pbmNvbWUgLmJ1ZGdldF9fYW1vdW50YClcbiAgICBjb25zdCBleHAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuYnVkZ2V0X19leHBlbnNlcyAuYnVkZ2V0X19hbW91bnRgKVxuICAgIGNvbnN0IHNhdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5idWRnZXRfX3NhdmluZ3MgLmJ1ZGdldF9fYW1vdW50YClcblxuICAgIGJ1ZGdldC5pbm5lckhUTUwgPSBmb3JtYXROdW1iZXIob2JqLmJ1ZGdldCwgdHlwZSwgdHJ1ZSlcbiAgICBpbmMuaW5uZXJIVE1MID0gZm9ybWF0TnVtYmVyKG9iai50b3RhbEluYywgJ2luYycpXG4gICAgZXhwLmlubmVySFRNTCA9IGZvcm1hdE51bWJlcihvYmoudG90YWxFeHAsICdleHAnKVxuICAgIHNhdi5pbm5lckhUTUwgPSBmb3JtYXROdW1iZXIob2JqLnRvdGFsU2F2LCAnZXhwJylcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmxvZyhgVGhlICR7dHlwZXN9IGlzL2FyZSAke29iai5idWRnZXR9YClcbiAgICAgIGNvbnNvbGUubG9nKGluYywgZXhwKVxuICAgIH1cbiAgfVxuXG4gIGRpc3BsYXlQZXJjZW50YWdlKHBlcmNlbnRhZ2UsIHR5cGUpIHtcbiAgICBjb25zdCB0eXBlcyA9IHR5cGUgPT09ICdleHAnID8gJ2V4cGVuc2VzJyA6ICdzYXZpbmdzJ1xuICAgIGNvbnN0IHBlcmNlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC5idWRnZXRfXyR7dHlwZXN9IC5idWRnZXRfX3BlcmNlbnRhZ2VgXG4gICAgKVxuXG4gICAgaWYgKHBlcmNlbnRhZ2UgPiAwKSB7XG4gICAgICBwZXJjZW50LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKVxuICAgICAgcGVyY2VudC5pbm5lckhUTUwgPSBgJHtwZXJjZW50YWdlfSYjMzc7YFxuICAgIH0gZWxzZSB7XG4gICAgICBwZXJjZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKVxuICAgIH1cblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmxvZyhwZXJjZW50KVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZUJ1ZGdldCgpIHtcbiAgICAvLyAxLiBDaGVjayBsb2NhbFN0b3JhZ2UgZm9yIHNhdmUgYnVkZ2V0IGRhdGEsIGVsc2UgZ2V0IG5ldyBkYXRhXG4gICAgY29uc3QgZ2V0RGF0YSA9IGJ1ZGdldENvbnRyb2xsZXIuY2FsY3VsYXRlQnVkZ2V0KClcblxuICAgIC8vIDIuIFJldHVybiB0aGUgYnVkZ2V0XG4gICAgY29uc3QgbmV3QnVkZ2V0ID0gdGhpcy5nZXRCdWRnZXQoZ2V0RGF0YSlcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmxvZyhuZXdCdWRnZXQpXG4gICAgfVxuXG4gICAgLy8gMy4gRGlzcGxheSB0aGUgdXBkYXRlZCBidWRnZXRcbiAgICB0aGlzLmRpc3BsYXlCdWRnZXQobmV3QnVkZ2V0KVxuXG4gICAgLy8gNC4gRGlzcGxheSB0aGUgbmV3IG92ZXJhbGwgYnVkZ2V0IHBlcmNlbnRhZ2VcbiAgICB0aGlzLmRpc3BsYXlQZXJjZW50YWdlKG5ld0J1ZGdldC5wZXJjZW50RXhwLCAnZXhwJylcbiAgICB0aGlzLmRpc3BsYXlQZXJjZW50YWdlKG5ld0J1ZGdldC5wZXJjZW50U2F2LCAnc2F2JylcbiAgfVxuXG4gIGRpc3BsYXlQZXJjZW50YWdlcyhwZXJjZW50YWdlcywgdHlwZSkge1xuICAgIGNvbnN0IHR5cGVzID0gdHlwZSA9PT0gJ2V4cCcgPyAnZXhwZW5zZXMnIDogJ3NhdmluZ3MnXG4gICAgY29uc3QgZmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7dHlwZXN9IC5pdGVtc19fcGVyY2VudGApXG4gICAgY29uc3Qgbm9kZUxpc3RGb3JFYWNoID0gKGxpc3QsIGNiKSA9PiB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2IobGlzdFtpXSwgaSlcbiAgICAgIH1cbiAgICB9XG4gICAgbm9kZUxpc3RGb3JFYWNoKGZpZWxkcywgKGN1cnJlbnQsIGluZGV4KSA9PiB7XG4gICAgICBpZiAocGVyY2VudGFnZXNbaW5kZXhdID4gMCkge1xuICAgICAgICBjdXJyZW50LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKVxuICAgICAgICBjdXJyZW50LmlubmVySFRNTCA9IGAke3BlcmNlbnRhZ2VzW2luZGV4XX0mIzM3O2BcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpXG4gICAgICAgIGN1cnJlbnQuaW5uZXJIVE1MID0gJzAmIzM3OydcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgdXBkYXRlUGVyY2VudGFnZXMoKSB7XG4gICAgLy8gMS4gQ2FsdWxhdGUgcGVyY2VudGFnZXNcbiAgICBidWRnZXRDb250cm9sbGVyLmNhbGN1bGF0ZVBlcmNlbnRhZ2VzKHRoaXMuaW5wdXRUeXBlLnZhbHVlKVxuXG4gICAgLy8gMi4gUmVhZCBwZXJjZW50YWdlcyBmcm9tIGJ1ZGdldCBjb250cm9sbGVyXG4gICAgY29uc3QgcGVyY2VudGFnZXMgPSBidWRnZXRDb250cm9sbGVyLmdldFBlcmNlbnRhZ2VzKHRoaXMuaW5wdXRUeXBlLnZhbHVlKVxuXG4gICAgLy8gMy4gVXBkYXRlIFVJIHRvIHNob3cgbmV3IHBlcmNlbnRhZ2VzXG4gICAgdGhpcy5kaXNwbGF5UGVyY2VudGFnZXMocGVyY2VudGFnZXMsIHRoaXMuaW5wdXRUeXBlLnZhbHVlKVxuICB9XG5cbiAgZGlzcGxheURhdGUoKSB7XG4gICAgY29uc3QgYnVkZ2V0RGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idWRnZXRfX2RhdGUnKVxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpXG4gICAgY29uc3QgbW9udGhzID0gW1xuICAgICAgJ0phbnVhcnknLFxuICAgICAgJ0ZlYnJ1YXJ5JyxcbiAgICAgICdNYXJjaCcsXG4gICAgICAnQXByaWwnLFxuICAgICAgJ01heScsXG4gICAgICAnSnVuZScsXG4gICAgICAnSnVseScsXG4gICAgICAnQXVndXN0JyxcbiAgICAgICdTZXBldGVtYmVyJyxcbiAgICAgICdPY3RvYmVyJyxcbiAgICAgICdOb3ZlbWJlcicsXG4gICAgICAnRGVjZW1iZXInLFxuICAgIF1cbiAgICBidWRnZXREYXRlLnRleHRDb250ZW50ID0gYCR7bW9udGhzW2RhdGUuZ2V0TW9udGgoKV19ICR7ZGF0ZS5nZXRGdWxsWWVhcigpfWBcbiAgfVxuXG4gIGNoYW5nZVR5cGUoKSB7XG4gICAgY29uc3QgdHlwZSA9IHRoaXMuaW5wdXRUeXBlXG4gICAgY29uc3QgY2hlY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hlY2snKVxuXG4gICAgLy8gaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAvLyAgIGNvbnNvbGUubG9nKGZpZWxkcylcbiAgICAvLyB9XG5cbiAgICB0eXBlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICBjb25zdCBvcHRpb25zID0gQXJyYXkuZnJvbSh0eXBlLm9wdGlvbnMpXG5cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIHR5cGUuYXR0cmlidXRlcyxcbiAgICAgICAgICB0eXBlLm9wdGlvbnMsXG4gICAgICAgICAgdHlwZS5vcHRpb25zLnNlbGVjdGVkSW5kZXgsXG4gICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICBvcHRpb25zWzFdXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucy5mb3JFYWNoKChvcHRpb24pID0+IHtcbiAgICAgICAgaWYgKG9wdGlvbi5zZWxlY3RlZCkge1xuICAgICAgICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ3NlbGVjdGVkJywgJ3NlbGVjdGVkJylcbiAgICAgICAgICBjaGVjay5jbGFzc0xpc3QucmVtb3ZlKCdleHAnLCAnc2F2JylcbiAgICAgICAgICBpZiAob3B0aW9uLnZhbHVlID09PSAnZXhwJykge1xuICAgICAgICAgICAgY2hlY2suY2xhc3NMaXN0LmFkZCgnZXhwJylcbiAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbi52YWx1ZSA9PT0gJ3NhdicpIHtcbiAgICAgICAgICAgIGNoZWNrLmNsYXNzTGlzdC5hZGQoJ3NhdicpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9wdGlvbi5yZW1vdmVBdHRyaWJ1dGUoJ3NlbGVjdGVkJywgJ3NlbGVjdGVkJylcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBWYWx1ZSAke29wdGlvbi52YWx1ZX1gKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBkZWxldGVJdGVtKCkge1xuICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5jb21lLWV4cGVuc2VzJylcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGlmIChlLnRhcmdldC5pZCA9PT0gJ2RlbGV0ZScpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQuY2xvc2VzdCgnLml0ZW1zJykucGFyZW50RWxlbWVudFxuICAgICAgICBjb25zdCBzcGxpdElEID0gdGFyZ2V0LmlkLnNwbGl0KCctJylcbiAgICAgICAgY29uc3QgdHlwZSA9IHNwbGl0SURbMF1cbiAgICAgICAgY29uc3QgSUQgPSBOdW1iZXIoc3BsaXRJRFsxXSlcblxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0LCB0YXJnZXQsIHNwbGl0SUQsIHR5cGUsIElEKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gMS4gRGVsZXRlIHRoZSBpdGVtIGZyb20gdGhlIGRhdGEgc3RydWN0dXJlXG4gICAgICAgIGJ1ZGdldENvbnRyb2xsZXIucmVtb3ZlSXRlbSh0eXBlLCBJRClcblxuICAgICAgICAvLyAyLiBEZWxldGUgdGhlIGl0ZW0gZnJvbSB0aGUgVUlcbiAgICAgICAgdGFyZ2V0LnJlbW92ZSgpXG5cbiAgICAgICAgLy8gMy4gVXBkYXRlIGFuZCBzaG93IHRoZSBuZXcgYnVkZ2V0XG4gICAgICAgIHRoaXMudXBkYXRlQnVkZ2V0KClcblxuICAgICAgICAvLyA0LiBVcGRhdGUgYW5kIHNob3cgdGhlIG5ldyBwZXJjZW50YWdlc1xuICAgICAgICB0aGlzLnVwZGF0ZVBlcmNlbnRhZ2VzKClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgc2F2aW5nKCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzYXZlJylcbiAgICBjb25zdCBkYXRhID0gYnVkZ2V0Q29udHJvbGxlci5nZXREYXRhKClcbiAgICBjb25zdCBub3cgPSBmb3JtYXQobmV3IERhdGUoKSwgJ2RkL01NL3l5eXknKVxuICAgIGNvbnN0IGl0ZW1zID0gW11cbiAgICBsZXQgZm91bmQgPSBmYWxzZVxuXG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXRlLWxpc3QgPiBsaScpXG4gICAgICBjb25zdCBsaXN0SXRlbXMgPSBBcnJheS5mcm9tKGxpc3QpXG4gICAgICBsaXN0SXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBpdGVtcy5wdXNoKHsgZGF0ZTogaXRlbS50ZXh0Q29udGVudCwgaWQ6IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgfSlcbiAgICAgIH0pXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBjb25zb2xlLmxvZyhkYXRhLCBkYXRhLmFsbEl0ZW1zLmluYywgaXRlbXMpXG4gICAgICB9XG4gICAgICAvLyBDaGVjayBpZiBpdGVtcyBhcnJheSBoYXMgdGhlIGN1cnJlbnQgZGF0ZVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaXRlbXNbaV0uZGF0ZSA9PT0gbm93KSB7XG4gICAgICAgICAgZm91bmQgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgYnVkZ2V0IGlmIGl0IGFscmVhZHkgZXhpc3RzIG9yIHNhdmUgYSBuZXcgYnVkZ2V0XG4gICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgIGlmIChpdGVtLmRhdGUgPT09IG5vdykge1xuICAgICAgICAgICAgcGFzdGJ1ZGdldFxuICAgICAgICAgICAgICAudXBkYXRlQnVkZ2V0KGRhdGEsIGl0ZW0uaWQpXG4gICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndXBkYXRlZCcpXG4gICAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1VwZGF0ZWQnXG4gICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi0tZ2hvc3QnKVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1NhdmUnXG4gICAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuLS1naG9zdCcpXG4gICAgICAgICAgICAgICAgfSwgNDAwMClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2hhcyB0b2RheXMgZGF0ZScpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhc3RidWRnZXRcbiAgICAgICAgICAuc2F2ZUJ1ZGdldChkYXRhKVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzYXZlZCcpXG4gICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnU2F2ZWQnXG4gICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYnRuLS1naG9zdCcpXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1NhdmUnXG4gICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4tLWdob3N0JylcbiAgICAgICAgICAgIH0sIDQwMDApXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgICAgICAgfSlcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZG9lcyBub3QgaGF2ZSB0b2RheXMgZGF0ZScpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgbG9hZGluZygpIHtcbiAgICBjb25zdCBkcm9wZG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXRlLWxpc3QnKVxuXG4gICAgcGFzdGJ1ZGdldC5nZXRCdWRnZXQoKGJ1ZGdldHMsIGlkKSA9PiB7XG4gICAgICBjb25zdCBkYXRlID0gYnVkZ2V0cy5jcmVhdGVkX2F0LnRvRGF0ZSgpXG4gICAgICBpZiAoZGF0ZSkge1xuICAgICAgICBjb25zdCB3aGVuID0gZm9ybWF0KG5ldyBEYXRlKGRhdGUpLCAnZGQvTU0veXl5eScpXG4gICAgICAgIGNvbnN0IGxpc3QgPSBgPGxpIGNsYXNzPVwiZGF0ZS1saXN0X19pdGVtXCIgZGF0YS1kYXRlPVwiJHt3aGVufVwiIGRhdGEtaWQ9XCIke2lkfVwiPiR7d2hlbn08L2xpPmBcbiAgICAgICAgZHJvcGRvd24uaW5uZXJIVE1MICs9IGxpc3RcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVJQ29udHJvbGxlclxuIiwibW9kdWxlLmV4cG9ydHMgPSBicmVha3BvaW50czsiLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG5cbi8vIEV4dGVybmFsXG5pbXBvcnQgJ2FpcmJuYi1icm93c2VyLXNoaW1zJ1xuXG4vLyBJbnRlcm5hbFxuaW1wb3J0ICcuL21vZHVsZXMvaGVscGVycydcbmltcG9ydCBidWRnZXRDb250cm9sbGVyIGZyb20gJy4vbW9kdWxlcy9idWRnZXRjb250cm9sbGVyJ1xuaW1wb3J0IFVJQ29udHJvbGxlciBmcm9tICcuL21vZHVsZXMvdWljb250cm9sbGVyJ1xuaW1wb3J0IFBhc3RCdWRnZXQgZnJvbSAnLi9tb2R1bGVzL3Bhc3RidWRnZXQnXG5cbi8vIFJlbW92ZSBsb2FkaW5nIGNsYXNzIGZyb20gYm9keSBvbiB3aW5kb3cgbG9hZC5cbmNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jylcblxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcbiAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaXMtbG9hZGluZycpXG4gIH0sIDEwMClcbn1cblxuLy8gQ3JlYXRlIHRoZSBtYWluIGNvbnRyb2xsZXIgZm9yIHRoZSBhcHBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuY29uc3QgY29udHJvbGxlciA9ICgoYnVkZ2V0Q3RybCkgPT4ge1xuICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZF9fZm9ybScpXG4gIGNvbnN0IHR5cGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkX190eXBlJylcbiAgY29uc3QgZGVzYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGRfX2Rlc2NyaXB0aW9uJylcbiAgY29uc3QgdmFsdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkX192YWx1ZScpXG5cbiAgY29uc3QgVUlDdHJsID0gbmV3IFVJQ29udHJvbGxlcih0eXBlLCBkZXNjLCB2YWx1ZSlcbiAgY29uc3QgcGFzdGJ1ZGdldCA9IG5ldyBQYXN0QnVkZ2V0KClcblxuICAvLyBTaG9lIHRoZSBsYXRlc3QgZGF0ZVxuICBVSUN0cmwuZGlzcGxheURhdGUoKVxuXG4gIC8vIFRvZ2dsZSB0aGUgc3VibWl0IG5ldyBjb3N0IGZyb20gZWl0aGVyIGluY29tZSBvciBleHBlbnNlLlxuICBVSUN0cmwuY2hhbmdlVHlwZSgpXG5cbiAgLy8gTG9hZCBidWRnZXRzIGZyb20gRmlyZWJhc2VcbiAgVUlDdHJsLmxvYWRpbmcoKVxuXG4gIC8vIFNhdmUgYnVkZ2V0cyB0byBGaXJlYmFzZVxuICBVSUN0cmwuc2F2aW5nKClcblxuICBjb25zdCB0ZXN0ID0gYnVkZ2V0Q3RybC5nZXREYXRhKClcbiAgY29uc3QgeyBpbmMgfSA9IHRlc3QuYWxsSXRlbXNcblxuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAvLyBHZXQgZmlsZWQgaW5wdXQgZGF0YVxuICAgIGNvbnN0IGlucHV0ID0gVUlDdHJsLmdldElucHV0KClcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgY29uc29sZS5sb2coaW5wdXQpXG4gICAgICBjb25zb2xlLmxvZyh0eXBlb2YgaW5wdXQudmFsdWUpXG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgdGhlIGZvcm0gZmllbGRzXG4gICAgZm9ybS5yZXNldCgpXG5cbiAgICAvLyBPbmx5IHJ1biBjYWxjdWxhdGlvbnMgaWYgdmFsaWQgaW5wdXRzIGFyZSBlbnRlcmVkXG4gICAgaWYgKGlucHV0LmRlc2MgIT09ICcnICYmICFpc05hTihpbnB1dC52YWx1ZSkgJiYgaW5wdXQudmFsdWUgPiAwKSB7XG4gICAgICAvLyBBZGQgdGhlIGl0ZW0gdG8gdGhlIGJ1ZGdldFxuICAgICAgY29uc3QgbmV3SXRlbSA9IGJ1ZGdldEN0cmwuYWRkSXRlbShcbiAgICAgICAgaW5wdXQudHlwZSxcbiAgICAgICAgaW5wdXQuZGVzY3JpcHRpb24sXG4gICAgICAgIGlucHV0LnZhbHVlXG4gICAgICApXG5cbiAgICAgIC8vIENhbGN1bGFlIHRoZSBidWRnZXQgYW5kIHVwZGF0ZSB0aGUgVUlcbiAgICAgIFVJQ3RybC5yZW5kZXIobmV3SXRlbSwgaW5wdXQudHlwZSkgLy8gQWRkIGl0ZW1zIHRvIGluY29tZSBvciBleHBlbnNlcyBsaXN0XG4gICAgICBVSUN0cmwudXBkYXRlQnVkZ2V0KCkgLy8gT3V0cHV0IHRoZSBuZXcgYnVkZ2V0XG4gICAgICBVSUN0cmwudXBkYXRlUGVyY2VudGFnZXMoKSAvLyBPdXRwdXQgdGhlIG5ldyBwZXJjZW50YWdlc1xuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBjb25zb2xlLmxvZygnZm9ybSBzdWJtaXR0ZWQhJylcbiAgICAgICAgY29uc29sZS5sb2cobmV3SXRlbSlcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coaW5jKVxuICB9KVxuICAvLyBEZWxldGUgYW4gYWRkZWQgaW5jb21lIG9yIGV4cGVuc2VcbiAgVUlDdHJsLmRlbGV0ZUl0ZW0oKVxuXG4gIHBhc3RidWRnZXQuZ2V0QnVkZ2V0KChkYXRhLCBpZCkgPT4ge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhLCBpZClcbiAgICB9XG4gIH0pXG59KShidWRnZXRDb250cm9sbGVyKVxuIiwibW9kdWxlLmV4cG9ydHMgPSBicm93c2VyOyIsImNvbnN0IGJ1ZGdldENvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICBjbGFzcyBCdWRnZXQge1xuICAgIGNvbnN0cnVjdG9yKGlkLCBkZXNjcmlwdGlvbiwgdmFsdWUpIHtcbiAgICAgIHRoaXMuaWQgPSBpZFxuICAgICAgdGhpcy5kZXNjID0gZGVzY3JpcHRpb25cbiAgICAgIHRoaXMudmFsID0gdmFsdWVcbiAgICAgIHRoaXMucGVyY2VudGFnZSA9IC0xXG4gICAgfVxuXG4gICAgY2FsY1BlcmNlbnRhZ2UodG90YWxJbmNvbWUpIHtcbiAgICAgIGlmICh0b3RhbEluY29tZSA+IDApIHtcbiAgICAgICAgdGhpcy5wZXJjZW50YWdlID0gTWF0aC5yb3VuZCgodGhpcy52YWwgLyB0b3RhbEluY29tZSkgKiAxMDApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSAtMVxuICAgICAgfVxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYHRoaXMgdmFsdWUgaXMgJHt0eXBlb2YgdGhpcy52YWx9YCxcbiAgICAgICAgICBgdGhlIHRvdGFsSW5jb21lICR7dHlwZW9mIHRvdGFsSW5jb21lfWBcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIGdldFBlcmNlbnRhZ2UoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wZXJjZW50YWdlXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZGF0YSA9IHtcbiAgICBhbGxJdGVtczoge1xuICAgICAgZXhwOiBbXSxcbiAgICAgIGluYzogW10sXG4gICAgICBzYXY6IFtdLFxuICAgIH0sXG4gICAgdG90YWxzOiB7XG4gICAgICBleHA6IDAsXG4gICAgICBpbmM6IDAsXG4gICAgICBzYXY6IDAsXG4gICAgfSxcbiAgICBwZXJjZW50OiB7XG4gICAgICBleHA6IC0xLFxuICAgICAgc2F2OiAtMSxcbiAgICB9LFxuICAgIGJ1ZGdldDogMCxcbiAgfVxuXG4gIGNvbnN0IGNhbGN1bGF0ZVRvdGFscyA9ICh0eXBlKSA9PiB7XG4gICAgbGV0IHN1bSA9IDBcbiAgICBkYXRhLmFsbEl0ZW1zW3R5cGVdLmZvckVhY2goKGN1cikgPT4ge1xuICAgICAgc3VtICs9IGN1ci52YWxcbiAgICB9KVxuICAgIGRhdGEudG90YWxzW3R5cGVdID0gc3VtXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFkZEl0ZW06ICh0eXBlLCBkZXNjLCB2YWwpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBuZXcgSURcbiAgICAgIGNvbnN0IElEID1cbiAgICAgICAgZGF0YS5hbGxJdGVtc1t0eXBlXS5sZW5ndGggPiAwXG4gICAgICAgICAgPyBkYXRhLmFsbEl0ZW1zW3R5cGVdW2RhdGEuYWxsSXRlbXNbdHlwZV0ubGVuZ3RoIC0gMV0uaWQgKyAxXG4gICAgICAgICAgOiAwXG5cbiAgICAgIC8vIFNldCBuZXcgaXRlbSB0byB1c2Ugb2JqZWN0XG4gICAgICBjb25zdCBuZXdJdGVtID0gbmV3IEJ1ZGdldChJRCwgZGVzYywgdmFsKVxuXG4gICAgICAvLyBQdXNoIGl0IGludG8gZGF0YSBzdHJ1Y3R1cmVcbiAgICAgIGRhdGEuYWxsSXRlbXNbdHlwZV0ucHVzaChuZXdJdGVtKVxuXG4gICAgICAvLyBjcmVhdGUgbmV3IGl0ZW1cbiAgICAgIHJldHVybiBuZXdJdGVtXG4gICAgfSxcbiAgICBjYWxjdWxhdGVCdWRnZXQ6ICgpID0+IHtcbiAgICAgIC8vIDEuIENhbGN1bGF0ZSB0aGUgYnVkZ2V0XG4gICAgICBjYWxjdWxhdGVUb3RhbHMoJ2V4cCcpXG4gICAgICBjYWxjdWxhdGVUb3RhbHMoJ2luYycpXG4gICAgICBjYWxjdWxhdGVUb3RhbHMoJ3NhdicpXG5cbiAgICAgIC8vIDIuIENhbGN1bGF0ZSB0aGUgYnVkZ2V0OiBpbmNvbWUgLSBleHBlbnNlc1xuICAgICAgZGF0YS5idWRnZXQgPSBkYXRhLnRvdGFscy5pbmMgLSAoZGF0YS50b3RhbHMuZXhwICsgZGF0YS50b3RhbHMuc2F2KVxuXG4gICAgICAvLyAzLiBDYWxjdWxhdGUgdGhlIHBlcmNlbnRhZ2Ugb2YgaW5jb21lIHRoYXQgd2Ugc3BlbnRcbiAgICAgIGlmIChkYXRhLnRvdGFscy5pbmMgPiAwKSB7XG4gICAgICAgIGRhdGEucGVyY2VudC5leHAgPSBNYXRoLnJvdW5kKChkYXRhLnRvdGFscy5leHAgLyBkYXRhLnRvdGFscy5pbmMpICogMTAwKVxuICAgICAgICBkYXRhLnBlcmNlbnQuc2F2ID0gTWF0aC5yb3VuZCgoZGF0YS50b3RhbHMuc2F2IC8gZGF0YS50b3RhbHMuaW5jKSAqIDEwMClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEucGVyY2VudC5leHAgPSAtMVxuICAgICAgICBkYXRhLnBlcmNlbnQuc2F2ID0gLTFcbiAgICAgIH1cblxuICAgICAgLy8gMy4gUmV0dXJuIHRoZSBidWRnZXRcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEudG90YWxzLmV4cCwgZGF0YS50b3RhbHMuaW5jKVxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmJ1ZGdldCwgZGF0YS5wZXJjZW50LmV4cCwgZGF0YS5wZXJjZW50LnNhdilcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9LFxuICAgIGNhbGN1bGF0ZVBlcmNlbnRhZ2VzOiAodHlwZSkgPT4ge1xuICAgICAgZGF0YS5hbGxJdGVtc1t0eXBlXS5mb3JFYWNoKChjdXIpID0+IHtcbiAgICAgICAgY3VyLmNhbGNQZXJjZW50YWdlKGRhdGEudG90YWxzLmluYylcbiAgICAgIH0pXG4gICAgfSxcbiAgICBnZXRQZXJjZW50YWdlczogKHR5cGUpID0+IHtcbiAgICAgIGNvbnN0IGFsbFBlcmMgPSBkYXRhLmFsbEl0ZW1zW3R5cGVdLm1hcCgoY3VyKSA9PiB7XG4gICAgICAgIHJldHVybiBjdXIuZ2V0UGVyY2VudGFnZSgpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGFsbFBlcmNcbiAgICB9LFxuICAgIHJlbW92ZUl0ZW06ICh0eXBlLCBpZCkgPT4ge1xuICAgICAgY29uc3QgaWRzID0gZGF0YS5hbGxJdGVtc1t0eXBlXS5tYXAoKGN1cnJlbnQpID0+IHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnQuaWRcbiAgICAgIH0pXG4gICAgICBjb25zdCBpbmRleCA9IGlkcy5pbmRleE9mKGlkKVxuXG4gICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgIGRhdGEuYWxsSXRlbXNbdHlwZV0uc3BsaWNlKGluZGV4LCAxKVxuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0RGF0YTogKCkgPT4ge1xuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9LFxuICB9XG59KSgpXG5cbmV4cG9ydCBkZWZhdWx0IGJ1ZGdldENvbnRyb2xsZXJcbiJdLCJzb3VyY2VSb290IjoiIn0=