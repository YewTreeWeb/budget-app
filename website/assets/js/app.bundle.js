(window.webpackJsonp=window.webpackJsonp||[]).push([["app"],{0:function(e,t,n){e.exports=n("kFay")},1:function(e,t){},E4hX:function(e,t,n){(function(e,t){for(var n,o=function(){},s=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],i=s.length,l=window.console=window.console||{};i--;)l[n=s[i]]||(l[n]=o);window.addEventListener("keydown",(function e(t){9===t.keyCode&&(document.body.classList.add("user-is-tabbing"),window.removeEventListener("keydown",e))})),document.querySelector("html").setAttribute("data-browser",e.name);var c=document.querySelector("body");t({xlarge:["1281px","1680px"],large:["981px","1280px"],medium:["737px","980px"],small:["481px","736px"],xsmall:[null,"480px"]}),e.mobile?c.classList.add("is-mobile"):(t.on(">medium",(function(){c.classList.remove("is-mobile"),c.classList.add("is-desktop")})),t.on("<=medium",(function(){c.classList.remove("is-desktop"),c.classList.add("is-mobile")}))),"localhost"===window.location.hostname&&console.log("localhost detected!")}).call(this,n("txRt"),n("a6Qp"))},SEKM:function(e,t,n){"use strict";n.r(t);var o=n("lwsE"),s=n.n(o),i=n("W8MJ"),l=n.n(i),c=n("xVb/"),a=function(){function e(t,n,o){s()(this,e),this.inputType=t,this.inputDesc=n,this.inputVal=o}return l()(e,[{key:"getInput",value:function(){return{type:this.inputType.value,description:this.inputDesc.value,value:Number(this.inputVal.value)}}},{key:"render",value:function(e,t){var n,o="exp"===t?"expenses":"income",s=document.querySelector(".".concat(o,"__list"));n="\n    <li class='".concat(o,"__item' id='").concat(t,"-").concat(e.id,"'>\n      <div class='item-desc'><p>").concat(e.desc,"</p></div>\n      <div class=\"items\">\n        <div class='items__value'><p><span>&pound;</span>").concat(e.val,"</p></div>\n    "),"exp"===t&&(n+='<div class="item-percent"><p>0&#37;</p></div>'),n+='\n        <button class=\'btn btn--clear items__del\'>\n          <svg id="delete" class="icon" width="20" height="20" aria-hidden="true">\n            <use xlink:href="/assets/images/icons.svg#icon-delete"></use>\n          </svg>\n        </button>\n      </div>\n    </li>\n    ',s.innerHTML+=n}},{key:"getBudget",value:function(e){return{budget:e.budget,totalInc:e.totals.inc,totalExp:e.totals.exp,percent:e.percent}}},{key:"updateBudget",value:function(e,t){var n="exp"===e?"expenses":"income",o=document.querySelector(".budget__value .budget"),s=document.querySelector(".budget__percentage"),i=document.querySelector(".budget__".concat(n," .budget__amount .amount")),l=this.getBudget(t);o.textContent=l.budget,i.innerHTML="exp"===e?"- ".concat(l.totalExp):"+ ".concat(l.totalInc),l.percent>0?(s.classList.add("show"),s.innerHTML="".concat(l.percent,"&#37;")):s.classList.remove("show"),console.log("The ".concat(n," is/are ").concat(l.budget)),console.log(i,s)}},{key:"deleteItem",value:function(){document.querySelector(".income-expenses").addEventListener("click",(function(e){if("BUTTON"===e.target.parentElement.tagName&&"delete"===e.target.id){var t=e.target.closest(".items").parentElement.id,n=t.split("-"),o=n[0],s=n[1];console.log(t,n,o,s),c.default.removeItem(o,s)}}))}}]),e}();t.default=a},a6Qp:function(e,t){e.exports=breakpoints},kFay:function(e,t,n){"use strict";n.r(t);var o=n("cDf5"),s=n.n(o),i=(n("OuUZ"),n("E4hX"),n("xVb/")),l=n("SEKM"),c=document.querySelector("body");window.onload=function(){window.setTimeout((function(){c.classList.remove("is-loading")}),100)};var a,u,d,r,p,m,v;a=i.default,u=document.querySelector(".add__form"),d=document.querySelector(".add__type"),r=document.querySelector(".add__description"),p=document.querySelector(".add__value"),m=document.querySelector("#check"),v=new l.default(d,r,p),d.addEventListener("change",(function(e){console.log(e);var t=Array.from(d.options);console.log(t),"exp"===d.value?m.classList.add(d.value):m.classList.remove("exp")})),u.addEventListener("submit",(function(e){e.preventDefault();var t=v.getInput();if(console.log(t),console.log(s()(t.value)),u.reset(),""!==t.desc&&!isNaN(t.value)&&t.value>0){var n=a.addItem(t.type,t.description,t.value),o=a.calculateBudget(t.type);v.render(n,t.type),v.updateBudget(t.type,o),v.deleteItem(),console.log("form submitted!"),console.log(n),console.log(o)}}))},txRt:function(e,t){e.exports=browser},"xVb/":function(e,t,n){"use strict";n.r(t);var o,s,i=n("lwsE"),l=n.n(i),c=(o=function e(t,n,o){l()(this,e),this.id=t,this.desc=n,this.val=o},s={allItems:{exp:[],inc:[]},totals:{exp:0,inc:0},budget:0},{addItem:function(e,t,n){var i=s.allItems[e].length>0?s.allItems[e][s.allItems[e].length-1].id+1:0,l=new o(i,t,n);return s.allItems[e].push(l),l},calculateBudget:function(e){var t=0;return s.allItems[e].forEach((function(e){t+=e.val})),s.totals[e]=t,s.budget=s.totals.inc-s.totals.exp,s.totals.inc>0?s.percent=Math.round(s.totals.exp/s.totals.inc*100):s.percent=-1,console.log(s.totals.exp,s.totals.inc),console.log(s.budget,s.percent),s},removeItem:function(e,t){var n=s.allItems[e].map((function(e){return e.id})).indexOf(t);-1!==n&&s.allItems[e].splice(n,1)}});t.default=c}},[[0,"runtime","vendors"]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWJzaXRlL3NyYy9qcy9tb2R1bGVzL2hlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vd2Vic2l0ZS9zcmMvanMvbW9kdWxlcy91aWNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiYnJlYWtwb2ludHNcIiIsIndlYnBhY2s6Ly8vLi93ZWJzaXRlL3NyYy9qcy9hcHAuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiYnJvd3NlclwiIiwid2VicGFjazovLy8uL3dlYnNpdGUvc3JjL2pzL21vZHVsZXMvYnVkZ2V0Y29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJtZXRob2QiLCJub29wIiwibWV0aG9kcyIsImxlbmd0aCIsImNvbnNvbGUiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlRmlyc3RUYWIiLCJlIiwia2V5Q29kZSIsImRvY3VtZW50IiwiYm9keSIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJxdWVyeVNlbGVjdG9yIiwic2V0QXR0cmlidXRlIiwiYnJvd3NlciIsIm5hbWUiLCJicmVha3BvaW50cyIsInhsYXJnZSIsImxhcmdlIiwibWVkaXVtIiwic21hbGwiLCJ4c21hbGwiLCJtb2JpbGUiLCJvbiIsInJlbW92ZSIsImxvY2F0aW9uIiwiaG9zdG5hbWUiLCJsb2ciLCJVSUNvbnRyb2xsZXIiLCJjb3N0IiwiZGVzY3JpcHRpb24iLCJ2YWx1ZSIsInRoaXMiLCJpbnB1dFR5cGUiLCJpbnB1dERlc2MiLCJpbnB1dFZhbCIsInR5cGUiLCJOdW1iZXIiLCJvYmoiLCJodG1sIiwiaXRlbSIsImxpc3QiLCJpZCIsImRlc2MiLCJ2YWwiLCJpbm5lckhUTUwiLCJkYXRhIiwiYnVkZ2V0IiwidG90YWxJbmMiLCJ0b3RhbHMiLCJpbmMiLCJ0b3RhbEV4cCIsImV4cCIsInBlcmNlbnQiLCJ0eXBlcyIsImFtb3VudCIsIm5ld0J1ZGdldCIsImdldEJ1ZGdldCIsInRleHRDb250ZW50IiwidGFyZ2V0IiwicGFyZW50RWxlbWVudCIsInRhZ05hbWUiLCJjbG9zZXN0Iiwic3BsaXRJRCIsInNwbGl0IiwiSUQiLCJidWRnZXRDb250cm9sbGVyIiwicmVtb3ZlSXRlbSIsIm1vZHVsZSIsImV4cG9ydHMiLCJvbmxvYWQiLCJzZXRUaW1lb3V0IiwiYnVkZ2V0Q3RybCIsImZvcm0iLCJjaGVjayIsIlVJQ3RybCIsIm9wdGlvbnMiLCJBcnJheSIsImZyb20iLCJwcmV2ZW50RGVmYXVsdCIsImlucHV0IiwiZ2V0SW5wdXQiLCJyZXNldCIsImlzTmFOIiwibmV3SXRlbSIsImFkZEl0ZW0iLCJjYWxjdWxhdGVCdWRnZXQiLCJyZW5kZXIiLCJ1cGRhdGVCdWRnZXQiLCJkZWxldGVJdGVtIiwiQnVkZ2V0IiwiYWxsSXRlbXMiLCJwdXNoIiwic3VtIiwiZm9yRWFjaCIsImN1ciIsIk1hdGgiLCJyb3VuZCIsImluZGV4IiwibWFwIiwiY3VycmVudCIsImluZGV4T2YiLCJzcGxpY2UiXSwibWFwcGluZ3MiOiI0SUFBQSxjQXFDRSxJQS9CQSxJQUFJQSxFQUNFQyxFQUFPLGFBQ1BDLEVBQVUsQ0FDZCxTQUNBLFFBQ0EsUUFDQSxRQUNBLE1BQ0EsU0FDQSxRQUNBLFlBQ0EsUUFDQSxpQkFDQSxXQUNBLE9BQ0EsTUFDQSxlQUNBLFVBQ0EsYUFDQSxRQUNBLE9BQ0EsVUFDQSxXQUNBLGNBQ0EsWUFDQSxRQUNBLFFBRUlDLEVBQVdELEVBQVhDLE9BQ0FDLEVBQVdDLE9BQU9ELFFBQVVDLE9BQU9ELFNBQVcsR0FFN0NELEtBSUFDLEVBSExKLEVBQVNFLEVBQVFDLE1BSWZDLEVBQVFKLEdBQVVDLEdBY3hCSSxPQUFPQyxpQkFBaUIsV0FSRCxTQUFqQkMsRUFBa0JDLEdBQ0osSUFBZEEsRUFBRUMsVUFFSkMsU0FBU0MsS0FBS0MsVUFBVUMsSUFBSSxtQkFDNUJSLE9BQU9TLG9CQUFvQixVQUFXUCxPQU83QkcsU0FBU0ssY0FBYyxRQUMvQkMsYUFBYSxlQUFnQkMsRUFBUUMsTUFHMUMsSUFBTVAsRUFBT0QsU0FBU0ssY0FBYyxRQUVwQ0ksRUFBWSxDQUNWQyxPQUFRLENBQUMsU0FBVSxVQUNuQkMsTUFBTyxDQUFDLFFBQVMsVUFDakJDLE9BQVEsQ0FBQyxRQUFTLFNBQ2xCQyxNQUFPLENBQUMsUUFBUyxTQUNqQkMsT0FBUSxDQUFDLEtBQU0sV0FHYlAsRUFBUVEsT0FDVmQsRUFBS0MsVUFBVUMsSUFBSSxjQUVuQk0sRUFBWU8sR0FBRyxXQUFXLFdBQ3hCZixFQUFLQyxVQUFVZSxPQUFPLGFBQ3RCaEIsRUFBS0MsVUFBVUMsSUFBSSxpQkFFckJNLEVBQVlPLEdBQUcsWUFBWSxXQUN6QmYsRUFBS0MsVUFBVWUsT0FBTyxjQUN0QmhCLEVBQUtDLFVBQVVDLElBQUksaUJBTVEsY0FBN0JSLE9BQU91QixTQUFTQyxVQUdoQnpCLFFBQVEwQixJQUFJLHlCLG1JQ3RGUkMsRSxXQUNKLFdBQVlDLEVBQU1DLEVBQWFDLEdBQU8sWUFDcENDLEtBQUtDLFVBQVlKLEVBQ2pCRyxLQUFLRSxVQUFZSixFQUNqQkUsS0FBS0csU0FBV0osRSwrQ0FJaEIsTUFBTyxDQUNMSyxLQUFNSixLQUFLQyxVQUFVRixNQUNyQkQsWUFBYUUsS0FBS0UsVUFBVUgsTUFDNUJBLE1BQU9NLE9BQU9MLEtBQUtHLFNBQVNKLFUsNkJBS3pCTyxFQUFLRixHQUNWLElBRUlHLEVBRkVDLEVBQWdCLFFBQVRKLEVBQWlCLFdBQWEsU0FDckNLLEVBQU9sQyxTQUFTSyxjQUFULFdBQTJCNEIsRUFBM0IsV0FJYkQsRUFBTyxvQkFBSCxPQUNTQyxFQURULHVCQUM0QkosRUFENUIsWUFDb0NFLEVBQUlJLEdBRHhDLCtDQUUwQkosRUFBSUssS0FGOUIsNkdBSW1ETCxFQUFJTSxJQUp2RCxvQkFPUyxRQUFUUixJQUNGRyxHQUFRLGlEQUdWQSxHQUFRLDRSQVdSRSxFQUFLSSxXQUFhTixJLGdDQUdWTyxHQUNSLE1BQU8sQ0FDTEMsT0FBUUQsRUFBS0MsT0FDYkMsU0FBVUYsRUFBS0csT0FBT0MsSUFDdEJDLFNBQVVMLEVBQUtHLE9BQU9HLElBQ3RCQyxRQUFTUCxFQUFLTyxXLG1DQUlMakIsRUFBTVUsR0FDakIsSUFBTVEsRUFBaUIsUUFBVGxCLEVBQWlCLFdBQWEsU0FDdENXLEVBQVN4QyxTQUFTSyxjQUFjLDBCQUNoQ3lDLEVBQVU5QyxTQUFTSyxjQUFjLHVCQUNqQzJDLEVBQVNoRCxTQUFTSyxjQUFULG1CQUNEMEMsRUFEQyw2QkFJVEUsRUFBWXhCLEtBQUt5QixVQUFVWCxHQUVqQ0MsRUFBT1csWUFBY0YsRUFBVVQsT0FDL0JRLEVBQU9WLFVBQ0ksUUFBVFQsRUFBQSxZQUFzQm9CLEVBQVVMLFVBQWhDLFlBQWtESyxFQUFVUixVQUUxRFEsRUFBVUgsUUFBVSxHQUN0QkEsRUFBUTVDLFVBQVVDLElBQUksUUFDdEIyQyxFQUFRUixVQUFSLFVBQXVCVyxFQUFVSCxRQUFqQyxVQUVBQSxFQUFRNUMsVUFBVWUsT0FBTyxRQUl6QnZCLFFBQVEwQixJQUFSLGNBQW1CMkIsRUFBbkIsbUJBQW1DRSxFQUFVVCxTQUM3QzlDLFFBQVEwQixJQUFJNEIsRUFBUUYsSyxtQ0FLVDlDLFNBQVNLLGNBQWMsb0JBQy9CVCxpQkFBaUIsU0FBUyxTQUFDRSxHQUM5QixHQUNxQyxXQUFuQ0EsRUFBRXNELE9BQU9DLGNBQWNDLFNBQ1AsV0FBaEJ4RCxFQUFFc0QsT0FBT2pCLEdBQ1QsQ0FDQSxJQUFNaUIsRUFBU3RELEVBQUVzRCxPQUFPRyxRQUFRLFVBQVVGLGNBQWNsQixHQUNsRHFCLEVBQVVKLEVBQU9LLE1BQU0sS0FDdkI1QixFQUFPMkIsRUFBUSxHQUNmRSxFQUFLRixFQUFRLEdBRW5COUQsUUFBUTBCLElBQUlnQyxFQUFRSSxFQUFTM0IsRUFBTTZCLEdBR25DQyxVQUFpQkMsV0FBVy9CLEVBQU02QixXLEtBUzNCckMsYSxtQkNoSGZ3QyxFQUFPQyxRQUFVckQsYSxnSENZWFIsRUFBT0QsU0FBU0ssY0FBYyxRQUVwQ1YsT0FBT29FLE9BQVMsV0FDZHBFLE9BQU9xRSxZQUFXLFdBQ2hCL0QsRUFBS0MsVUFBVWUsT0FBTyxnQkFDckIsTUFLTCxJQUFxQmdELEVBQ2JDLEVBQ0FyQyxFQUNBTyxFQUNBWixFQUNBMkMsRUFFQUMsRUFQYUgsRUE4RGxCTixVQTdES08sRUFBT2xFLFNBQVNLLGNBQWMsY0FDOUJ3QixFQUFPN0IsU0FBU0ssY0FBYyxjQUM5QitCLEVBQU9wQyxTQUFTSyxjQUFjLHFCQUM5Qm1CLEVBQVF4QixTQUFTSyxjQUFjLGVBQy9COEQsRUFBUW5FLFNBQVNLLGNBQWMsVUFFL0IrRCxFQUFTLElBQUkvQyxVQUFhUSxFQUFNTyxFQUFNWixHQUc1Q0ssRUFBS2pDLGlCQUFpQixVQUFVLFNBQUNFLEdBQy9CSixRQUFRMEIsSUFBSXRCLEdBQ1osSUFBTXVFLEVBQVVDLE1BQU1DLEtBQUsxQyxFQUFLd0MsU0FDaEMzRSxRQUFRMEIsSUFBSWlELEdBQ08sUUFBZnhDLEVBQUtMLE1BQ1AyQyxFQUFNakUsVUFBVUMsSUFBSTBCLEVBQUtMLE9BTXpCMkMsRUFBTWpFLFVBQVVlLE9BQU8sVUFJM0JpRCxFQUFLdEUsaUJBQWlCLFVBQVUsU0FBQ0UsR0FDL0JBLEVBQUUwRSxpQkFHRixJQUFNQyxFQUFRTCxFQUFPTSxXQVVyQixHQVJFaEYsUUFBUTBCLElBQUlxRCxHQUNaL0UsUUFBUTBCLElBQVIsSUFBbUJxRCxFQUFNakQsUUFJM0IwQyxFQUFLUyxRQUdjLEtBQWZGLEVBQU1yQyxPQUFnQndDLE1BQU1ILEVBQU1qRCxRQUFVaUQsRUFBTWpELE1BQVEsRUFBRyxDQUUvRCxJQUFNcUQsRUFBVVosRUFBV2EsUUFDekJMLEVBQU01QyxLQUNONEMsRUFBTWxELFlBQ05rRCxFQUFNakQsT0FJRmdCLEVBQVN5QixFQUFXYyxnQkFBZ0JOLEVBQU01QyxNQUdoRHVDLEVBQU9ZLE9BQU9ILEVBQVNKLEVBQU01QyxNQUM3QnVDLEVBQU9hLGFBQWFSLEVBQU01QyxLQUFNVyxHQUNoQzRCLEVBQU9jLGFBR0x4RixRQUFRMEIsSUFBSSxtQkFDWjFCLFFBQVEwQixJQUFJeUQsR0FDWm5GLFFBQVEwQixJQUFJb0IsUSxtQkNoRnBCcUIsRUFBT0MsUUFBVXZELFMsK0NDQ1Q0RSxFQVFBNUMsRSxxQkFURm9CLEdBQ0V3QixFQUNKLFdBQVloRCxFQUFJWixFQUFhQyxHQUFPLFlBQ2xDQyxLQUFLVSxHQUFLQSxFQUNWVixLQUFLVyxLQUFPYixFQUNaRSxLQUFLWSxJQUFNYixHQUlUZSxFQUFPLENBQ1g2QyxTQUFVLENBQ1J2QyxJQUFLLEdBQ0xGLElBQUssSUFFUEQsT0FBUSxDQUNORyxJQUFLLEVBQ0xGLElBQUssR0FFUEgsT0FBUSxHQUdILENBQ0xzQyxRQUFTLFNBQUNqRCxFQUFNTyxFQUFNQyxHQUVwQixJQUFNcUIsRUFDSm5CLEVBQUs2QyxTQUFTdkQsR0FBTXBDLE9BQVMsRUFDekI4QyxFQUFLNkMsU0FBU3ZELEdBQU1VLEVBQUs2QyxTQUFTdkQsR0FBTXBDLE9BQVMsR0FBRzBDLEdBQUssRUFDekQsRUFHQTBDLEVBQVUsSUFBSU0sRUFBT3pCLEVBQUl0QixFQUFNQyxHQU1yQyxPQUhBRSxFQUFLNkMsU0FBU3ZELEdBQU13RCxLQUFLUixHQUdsQkEsR0FFVEUsZ0JBQWlCLFNBQUNsRCxHQUVoQixJQUFJeUQsRUFBTSxFQXFCVixPQXBCQS9DLEVBQUs2QyxTQUFTdkQsR0FBTTBELFNBQVEsU0FBQ0MsR0FDM0JGLEdBQU9FLEVBQUluRCxPQUViRSxFQUFLRyxPQUFPYixHQUFReUQsRUFHcEIvQyxFQUFLQyxPQUFTRCxFQUFLRyxPQUFPQyxJQUFNSixFQUFLRyxPQUFPRyxJQUd4Q04sRUFBS0csT0FBT0MsSUFBTSxFQUNwQkosRUFBS08sUUFBVTJDLEtBQUtDLE1BQU9uRCxFQUFLRyxPQUFPRyxJQUFNTixFQUFLRyxPQUFPQyxJQUFPLEtBRWhFSixFQUFLTyxTQUFXLEVBS2hCcEQsUUFBUTBCLElBQUltQixFQUFLRyxPQUFPRyxJQUFLTixFQUFLRyxPQUFPQyxLQUN6Q2pELFFBQVEwQixJQUFJbUIsRUFBS0MsT0FBUUQsRUFBS08sU0FFekJQLEdBRVRxQixXQUFZLFNBQUMvQixFQUFNTSxHQUNqQixJQUdNd0QsRUFITXBELEVBQUs2QyxTQUFTdkQsR0FBTStELEtBQUksU0FBQ0MsR0FDbkMsT0FBT0EsRUFBUTFELE1BRUMyRCxRQUFRM0QsSUFFWCxJQUFYd0QsR0FDRnBELEVBQUs2QyxTQUFTdkQsR0FBTWtFLE9BQU9KLEVBQU8sTUFNM0JoQyxjIiwiZmlsZSI6ImFwcC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcGx1c3BsdXMgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLW11bHRpLWFzc2lnbiAqL1xuXG4vLyBBdm9pZCBgY29uc29sZWAgZXJyb3JzIGluIGJyb3dzZXJzIHRoYXQgbGFjayBhIGNvbnNvbGUuXG57XG4gIGxldCBtZXRob2RcbiAgY29uc3Qgbm9vcCA9ICgpID0+IHt9XG4gIGNvbnN0IG1ldGhvZHMgPSBbXG4gICAgJ2Fzc2VydCcsXG4gICAgJ2NsZWFyJyxcbiAgICAnY291bnQnLFxuICAgICdkZWJ1ZycsXG4gICAgJ2RpcicsXG4gICAgJ2RpcnhtbCcsXG4gICAgJ2Vycm9yJyxcbiAgICAnZXhjZXB0aW9uJyxcbiAgICAnZ3JvdXAnLFxuICAgICdncm91cENvbGxhcHNlZCcsXG4gICAgJ2dyb3VwRW5kJyxcbiAgICAnaW5mbycsXG4gICAgJ2xvZycsXG4gICAgJ21hcmtUaW1lbGluZScsXG4gICAgJ3Byb2ZpbGUnLFxuICAgICdwcm9maWxlRW5kJyxcbiAgICAndGFibGUnLFxuICAgICd0aW1lJyxcbiAgICAndGltZUVuZCcsXG4gICAgJ3RpbWVsaW5lJyxcbiAgICAndGltZWxpbmVFbmQnLFxuICAgICd0aW1lU3RhbXAnLFxuICAgICd0cmFjZScsXG4gICAgJ3dhcm4nLFxuICBdXG4gIGxldCB7IGxlbmd0aCB9ID0gbWV0aG9kc1xuICBjb25zdCBjb25zb2xlID0gKHdpbmRvdy5jb25zb2xlID0gd2luZG93LmNvbnNvbGUgfHwge30pXG5cbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgbWV0aG9kID0gbWV0aG9kc1tsZW5ndGhdXG5cbiAgICAvLyBPbmx5IHN0dWIgdW5kZWZpbmVkIG1ldGhvZHMuXG4gICAgaWYgKCFjb25zb2xlW21ldGhvZF0pIHtcbiAgICAgIGNvbnNvbGVbbWV0aG9kXSA9IG5vb3BcbiAgICB9XG4gIH1cbn1cblxuLy8gQWRkIHRhYmJpbmcgaW5kaWNhdG9yIHRvIHdpbmRvd1xuY29uc3QgaGFuZGxlRmlyc3RUYWIgPSAoZSkgPT4ge1xuICBpZiAoZS5rZXlDb2RlID09PSA5KSB7XG4gICAgLy8gdGhlIFwiSSBhbSBhIGtleWJvYXJkIHVzZXJcIiBrZXlcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3VzZXItaXMtdGFiYmluZycpXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVGaXJzdFRhYilcbiAgfVxufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUZpcnN0VGFiKVxuXG4vLyBBZGQgYSBicm93ZXIgaW5kaWNhdG9yIHRvIHRoZSBIVE1MIGVsZW1lbnQuXG5jb25zdCBodG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpXG5odG1sLnNldEF0dHJpYnV0ZSgnZGF0YS1icm93c2VyJywgYnJvd3Nlci5uYW1lKVxuXG4vLyBEZXRlY3QgaWYgbW9iaWxlIG9yIGRlc2t0b3AuXG5jb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpXG5cbmJyZWFrcG9pbnRzKHtcbiAgeGxhcmdlOiBbJzEyODFweCcsICcxNjgwcHgnXSxcbiAgbGFyZ2U6IFsnOTgxcHgnLCAnMTI4MHB4J10sXG4gIG1lZGl1bTogWyc3MzdweCcsICc5ODBweCddLFxuICBzbWFsbDogWyc0ODFweCcsICc3MzZweCddLFxuICB4c21hbGw6IFtudWxsLCAnNDgwcHgnXSxcbn0pXG5cbmlmIChicm93c2VyLm1vYmlsZSkge1xuICBib2R5LmNsYXNzTGlzdC5hZGQoJ2lzLW1vYmlsZScpXG59IGVsc2Uge1xuICBicmVha3BvaW50cy5vbignPm1lZGl1bScsICgpID0+IHtcbiAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLW1vYmlsZScpXG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKCdpcy1kZXNrdG9wJylcbiAgfSlcbiAgYnJlYWtwb2ludHMub24oJzw9bWVkaXVtJywgKCkgPT4ge1xuICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZGVza3RvcCcpXG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKCdpcy1tb2JpbGUnKVxuICB9KVxufVxuXG4vLyBMb2cgaWYgcnVubmluZyBpbiBsb2NhbGhvc3Qgd2hlbiBpbiBkZXZlbG9wbWVudCBtb2RlLlxuaWYgKFxuICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnICYmXG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbidcbikge1xuICBjb25zb2xlLmxvZygnbG9jYWxob3N0IGRldGVjdGVkIScpXG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzICovXG5cbmltcG9ydCBidWRnZXRDb250cm9sbGVyIGZyb20gJy4vYnVkZ2V0Y29udHJvbGxlcidcblxuLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLWRlc3RydWN0dXJpbmcgKi9cbmNsYXNzIFVJQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKGNvc3QsIGRlc2NyaXB0aW9uLCB2YWx1ZSkge1xuICAgIHRoaXMuaW5wdXRUeXBlID0gY29zdFxuICAgIHRoaXMuaW5wdXREZXNjID0gZGVzY3JpcHRpb25cbiAgICB0aGlzLmlucHV0VmFsID0gdmFsdWVcbiAgfVxuXG4gIGdldElucHV0KCkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiB0aGlzLmlucHV0VHlwZS52YWx1ZSwgLy8gV2lsbCBiZSBlaXRoZXIgaW5jIG9yIGV4cFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuaW5wdXREZXNjLnZhbHVlLFxuICAgICAgdmFsdWU6IE51bWJlcih0aGlzLmlucHV0VmFsLnZhbHVlKSxcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICByZW5kZXIob2JqLCB0eXBlKSB7XG4gICAgY29uc3QgaXRlbSA9IHR5cGUgPT09ICdleHAnID8gJ2V4cGVuc2VzJyA6ICdpbmNvbWUnXG4gICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2l0ZW19X19saXN0YClcbiAgICBsZXQgaHRtbFxuXG4gICAgLy8gQ3JlYXRlIEhUTUwgc3RyaW5nIHdpdGggcGxhY2Vob2xkZXJcbiAgICBodG1sID0gYFxuICAgIDxsaSBjbGFzcz0nJHtpdGVtfV9faXRlbScgaWQ9JyR7dHlwZX0tJHtvYmouaWR9Jz5cbiAgICAgIDxkaXYgY2xhc3M9J2l0ZW0tZGVzYyc+PHA+JHtvYmouZGVzY308L3A+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiaXRlbXNcIj5cbiAgICAgICAgPGRpdiBjbGFzcz0naXRlbXNfX3ZhbHVlJz48cD48c3Bhbj4mcG91bmQ7PC9zcGFuPiR7b2JqLnZhbH08L3A+PC9kaXY+XG4gICAgYFxuXG4gICAgaWYgKHR5cGUgPT09ICdleHAnKSB7XG4gICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwiaXRlbS1wZXJjZW50XCI+PHA+MCYjMzc7PC9wPjwvZGl2PidcbiAgICB9XG5cbiAgICBodG1sICs9IGBcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz0nYnRuIGJ0bi0tY2xlYXIgaXRlbXNfX2RlbCc+XG4gICAgICAgICAgPHN2ZyBpZD1cImRlbGV0ZVwiIGNsYXNzPVwiaWNvblwiIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxuICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPVwiL2Fzc2V0cy9pbWFnZXMvaWNvbnMuc3ZnI2ljb24tZGVsZXRlXCI+PC91c2U+XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9saT5cbiAgICBgXG5cbiAgICAvLyBJbnNlcnQgSFRNTCBpbnRvIHRoZSBET01cbiAgICBsaXN0LmlubmVySFRNTCArPSBodG1sXG4gIH1cblxuICBnZXRCdWRnZXQoZGF0YSkge1xuICAgIHJldHVybiB7XG4gICAgICBidWRnZXQ6IGRhdGEuYnVkZ2V0LFxuICAgICAgdG90YWxJbmM6IGRhdGEudG90YWxzLmluYyxcbiAgICAgIHRvdGFsRXhwOiBkYXRhLnRvdGFscy5leHAsXG4gICAgICBwZXJjZW50OiBkYXRhLnBlcmNlbnQsXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlQnVkZ2V0KHR5cGUsIGRhdGEpIHtcbiAgICBjb25zdCB0eXBlcyA9IHR5cGUgPT09ICdleHAnID8gJ2V4cGVuc2VzJyA6ICdpbmNvbWUnXG4gICAgY29uc3QgYnVkZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1ZGdldF9fdmFsdWUgLmJ1ZGdldCcpXG4gICAgY29uc3QgcGVyY2VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idWRnZXRfX3BlcmNlbnRhZ2UnKVxuICAgIGNvbnN0IGFtb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLmJ1ZGdldF9fJHt0eXBlc30gLmJ1ZGdldF9fYW1vdW50IC5hbW91bnRgXG4gICAgKVxuXG4gICAgY29uc3QgbmV3QnVkZ2V0ID0gdGhpcy5nZXRCdWRnZXQoZGF0YSlcblxuICAgIGJ1ZGdldC50ZXh0Q29udGVudCA9IG5ld0J1ZGdldC5idWRnZXRcbiAgICBhbW91bnQuaW5uZXJIVE1MID1cbiAgICAgIHR5cGUgPT09ICdleHAnID8gYC0gJHtuZXdCdWRnZXQudG90YWxFeHB9YCA6IGArICR7bmV3QnVkZ2V0LnRvdGFsSW5jfWBcblxuICAgIGlmIChuZXdCdWRnZXQucGVyY2VudCA+IDApIHtcbiAgICAgIHBlcmNlbnQuY2xhc3NMaXN0LmFkZCgnc2hvdycpXG4gICAgICBwZXJjZW50LmlubmVySFRNTCA9IGAke25ld0J1ZGdldC5wZXJjZW50fSYjMzc7YFxuICAgIH0gZWxzZSB7XG4gICAgICBwZXJjZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKVxuICAgIH1cblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmxvZyhgVGhlICR7dHlwZXN9IGlzL2FyZSAke25ld0J1ZGdldC5idWRnZXR9YClcbiAgICAgIGNvbnNvbGUubG9nKGFtb3VudCwgcGVyY2VudClcbiAgICB9XG4gIH1cblxuICBkZWxldGVJdGVtKCkge1xuICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5jb21lLWV4cGVuc2VzJylcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZS50YXJnZXQucGFyZW50RWxlbWVudC50YWdOYW1lID09PSAnQlVUVE9OJyAmJlxuICAgICAgICBlLnRhcmdldC5pZCA9PT0gJ2RlbGV0ZSdcbiAgICAgICkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldC5jbG9zZXN0KCcuaXRlbXMnKS5wYXJlbnRFbGVtZW50LmlkXG4gICAgICAgIGNvbnN0IHNwbGl0SUQgPSB0YXJnZXQuc3BsaXQoJy0nKVxuICAgICAgICBjb25zdCB0eXBlID0gc3BsaXRJRFswXVxuICAgICAgICBjb25zdCBJRCA9IHNwbGl0SURbMV1cblxuICAgICAgICBjb25zb2xlLmxvZyh0YXJnZXQsIHNwbGl0SUQsIHR5cGUsIElEKVxuXG4gICAgICAgIC8vIDEuIERlbGV0ZSB0aGUgaXRlbSBmcm9tIHRoZSBkYXRhIHN0cnVjdHVyZVxuICAgICAgICBidWRnZXRDb250cm9sbGVyLnJlbW92ZUl0ZW0odHlwZSwgSUQpXG4gICAgICAgIC8vIDIuIERlbGV0ZSB0aGUgaXRlbSBmcm9tIHRoZSBVSVxuXG4gICAgICAgIC8vIDMuIFVwZGF0ZSBhbmQgc2hvdyB0aGUgbmV3IGJ1ZGdldFxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVUlDb250cm9sbGVyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IGJyZWFrcG9pbnRzOyIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cblxuLy8gRXh0ZXJuYWxcbmltcG9ydCAnYWlyYm5iLWJyb3dzZXItc2hpbXMnXG5cbi8vIEludGVybmFsXG5pbXBvcnQgJy4vbW9kdWxlcy9oZWxwZXJzJ1xuaW1wb3J0IGJ1ZGdldENvbnRyb2xsZXIgZnJvbSAnLi9tb2R1bGVzL2J1ZGdldGNvbnRyb2xsZXInXG5pbXBvcnQgVUlDb250cm9sbGVyIGZyb20gJy4vbW9kdWxlcy91aWNvbnRyb2xsZXInXG5cbi8vIFJlbW92ZSBsb2FkaW5nIGNsYXNzIGZyb20gYm9keSBvbiB3aW5kb3cgbG9hZC5cbmNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jylcblxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcbiAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaXMtbG9hZGluZycpXG4gIH0sIDEwMClcbn1cblxuLy8gQ3JlYXRlIHRoZSBtYWluIGNvbnRyb2xsZXIgZm9yIHRoZSBhcHBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuY29uc3QgY29udHJvbGxlciA9ICgoYnVkZ2V0Q3RybCkgPT4ge1xuICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZF9fZm9ybScpXG4gIGNvbnN0IHR5cGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkX190eXBlJylcbiAgY29uc3QgZGVzYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGRfX2Rlc2NyaXB0aW9uJylcbiAgY29uc3QgdmFsdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkX192YWx1ZScpXG4gIGNvbnN0IGNoZWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NoZWNrJylcblxuICBjb25zdCBVSUN0cmwgPSBuZXcgVUlDb250cm9sbGVyKHR5cGUsIGRlc2MsIHZhbHVlKVxuXG4gIC8vIFRvZ2dsZSB0aGUgc3VibWl0IG5ldyBjb3N0IGZyb20gZWl0aGVyIGluY29tZSBvciBleHBlbnNlLlxuICB0eXBlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgY29uc29sZS5sb2coZSlcbiAgICBjb25zdCBvcHRpb25zID0gQXJyYXkuZnJvbSh0eXBlLm9wdGlvbnMpXG4gICAgY29uc29sZS5sb2cob3B0aW9ucylcbiAgICBpZiAodHlwZS52YWx1ZSA9PT0gJ2V4cCcpIHtcbiAgICAgIGNoZWNrLmNsYXNzTGlzdC5hZGQodHlwZS52YWx1ZSlcbiAgICAgIC8vIHR5cGUub3B0aW9uc1swXS5yZW1vdmVBdHRyaWJ1dGUoJ3NlbGVjdGVkJylcbiAgICAgIC8vIHR5cGUub3B0aW9ucy5zZWxlY3RlZEluZGV4LnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBvcHRpb25zWzFdLnJlbW92ZUF0dHJpYnV0ZSgnc2VsZWN0ZWQnKVxuICAgICAgLy8gb3B0aW9uc1swXS5zZXRBdHRyaWJ1dGUoJ3NlbGVjdGVkJylcbiAgICAgIGNoZWNrLmNsYXNzTGlzdC5yZW1vdmUoJ2V4cCcpXG4gICAgfVxuICB9KVxuXG4gIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcblxuICAgIC8vIEdldCBmaWxlZCBpbnB1dCBkYXRhXG4gICAgY29uc3QgaW5wdXQgPSBVSUN0cmwuZ2V0SW5wdXQoKVxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmxvZyhpbnB1dClcbiAgICAgIGNvbnNvbGUubG9nKHR5cGVvZiBpbnB1dC52YWx1ZSlcbiAgICB9XG5cbiAgICAvLyBDbGVhciB0aGUgZm9ybSBmaWVsZHNcbiAgICBmb3JtLnJlc2V0KClcblxuICAgIC8vIE9ubHkgcnVuIGNhbGN1bGF0aW9ucyBpZiB2YWxpZCBpbnB1dHMgYXJlIGVudGVyZWRcbiAgICBpZiAoaW5wdXQuZGVzYyAhPT0gJycgJiYgIWlzTmFOKGlucHV0LnZhbHVlKSAmJiBpbnB1dC52YWx1ZSA+IDApIHtcbiAgICAgIC8vIEFkZCB0aGUgaXRlbSB0byB0aGUgYnVkZ2V0XG4gICAgICBjb25zdCBuZXdJdGVtID0gYnVkZ2V0Q3RybC5hZGRJdGVtKFxuICAgICAgICBpbnB1dC50eXBlLFxuICAgICAgICBpbnB1dC5kZXNjcmlwdGlvbixcbiAgICAgICAgaW5wdXQudmFsdWVcbiAgICAgIClcblxuICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBidWRnZXRcbiAgICAgIGNvbnN0IGJ1ZGdldCA9IGJ1ZGdldEN0cmwuY2FsY3VsYXRlQnVkZ2V0KGlucHV0LnR5cGUpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgVUlcbiAgICAgIFVJQ3RybC5yZW5kZXIobmV3SXRlbSwgaW5wdXQudHlwZSkgLy8gQWRkIGl0ZW1zIHRvIGluY29tZSBvciBleHBlbnNlcyBsaXN0XG4gICAgICBVSUN0cmwudXBkYXRlQnVkZ2V0KGlucHV0LnR5cGUsIGJ1ZGdldCkgLy8gT3V0cHV0IHRoZSBuZXcgYnVkZ2V0XG4gICAgICBVSUN0cmwuZGVsZXRlSXRlbSgpIC8vIERlbGV0ZSBhbiBhZGRlZCBpbmNvbWUgb3IgZXhwZW5zZVxuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBjb25zb2xlLmxvZygnZm9ybSBzdWJtaXR0ZWQhJylcbiAgICAgICAgY29uc29sZS5sb2cobmV3SXRlbSlcbiAgICAgICAgY29uc29sZS5sb2coYnVkZ2V0KVxuICAgICAgfVxuICAgIH1cbiAgfSlcbn0pKGJ1ZGdldENvbnRyb2xsZXIpXG4iLCJtb2R1bGUuZXhwb3J0cyA9IGJyb3dzZXI7IiwiY29uc3QgYnVkZ2V0Q29udHJvbGxlciA9ICgoKSA9PiB7XG4gIGNsYXNzIEJ1ZGdldCB7XG4gICAgY29uc3RydWN0b3IoaWQsIGRlc2NyaXB0aW9uLCB2YWx1ZSkge1xuICAgICAgdGhpcy5pZCA9IGlkXG4gICAgICB0aGlzLmRlc2MgPSBkZXNjcmlwdGlvblxuICAgICAgdGhpcy52YWwgPSB2YWx1ZVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGRhdGEgPSB7XG4gICAgYWxsSXRlbXM6IHtcbiAgICAgIGV4cDogW10sXG4gICAgICBpbmM6IFtdLFxuICAgIH0sXG4gICAgdG90YWxzOiB7XG4gICAgICBleHA6IDAsXG4gICAgICBpbmM6IDAsXG4gICAgfSxcbiAgICBidWRnZXQ6IDAsXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFkZEl0ZW06ICh0eXBlLCBkZXNjLCB2YWwpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBuZXcgSURcbiAgICAgIGNvbnN0IElEID1cbiAgICAgICAgZGF0YS5hbGxJdGVtc1t0eXBlXS5sZW5ndGggPiAwXG4gICAgICAgICAgPyBkYXRhLmFsbEl0ZW1zW3R5cGVdW2RhdGEuYWxsSXRlbXNbdHlwZV0ubGVuZ3RoIC0gMV0uaWQgKyAxXG4gICAgICAgICAgOiAwXG5cbiAgICAgIC8vIFNldCBuZXcgaXRlbSB0byB1c2Ugb2JqZWN0XG4gICAgICBjb25zdCBuZXdJdGVtID0gbmV3IEJ1ZGdldChJRCwgZGVzYywgdmFsKVxuXG4gICAgICAvLyBQdXNoIGl0IGludG8gZGF0YSBzdHJ1Y3R1cmVcbiAgICAgIGRhdGEuYWxsSXRlbXNbdHlwZV0ucHVzaChuZXdJdGVtKVxuXG4gICAgICAvLyBjcmVhdGUgbmV3IGl0ZW1cbiAgICAgIHJldHVybiBuZXdJdGVtXG4gICAgfSxcbiAgICBjYWxjdWxhdGVCdWRnZXQ6ICh0eXBlKSA9PiB7XG4gICAgICAvLyAxLiBDYWxjdWxhdGUgdGhlIGJ1ZGdldFxuICAgICAgbGV0IHN1bSA9IDBcbiAgICAgIGRhdGEuYWxsSXRlbXNbdHlwZV0uZm9yRWFjaCgoY3VyKSA9PiB7XG4gICAgICAgIHN1bSArPSBjdXIudmFsXG4gICAgICB9KVxuICAgICAgZGF0YS50b3RhbHNbdHlwZV0gPSBzdW1cblxuICAgICAgLy8gMi4gQ2FsY3VsYXRlIHRoZSBidWRnZXQ6IGluY29tZSAtIGV4cGVuc2VzXG4gICAgICBkYXRhLmJ1ZGdldCA9IGRhdGEudG90YWxzLmluYyAtIGRhdGEudG90YWxzLmV4cFxuXG4gICAgICAvLyAzLiBDYWxjdWxhdGUgdGhlIHBlcmNlbnRhZ2Ugb2YgaW5jb21lIHRoYXQgd2Ugc3BlbnRcbiAgICAgIGlmIChkYXRhLnRvdGFscy5pbmMgPiAwKSB7XG4gICAgICAgIGRhdGEucGVyY2VudCA9IE1hdGgucm91bmQoKGRhdGEudG90YWxzLmV4cCAvIGRhdGEudG90YWxzLmluYykgKiAxMDApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhLnBlcmNlbnQgPSAtMVxuICAgICAgfVxuXG4gICAgICAvLyAzLiBSZXR1cm4gdGhlIGJ1ZGdldFxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YS50b3RhbHMuZXhwLCBkYXRhLnRvdGFscy5pbmMpXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEuYnVkZ2V0LCBkYXRhLnBlcmNlbnQpXG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0YVxuICAgIH0sXG4gICAgcmVtb3ZlSXRlbTogKHR5cGUsIGlkKSA9PiB7XG4gICAgICBjb25zdCBpZHMgPSBkYXRhLmFsbEl0ZW1zW3R5cGVdLm1hcCgoY3VycmVudCkgPT4ge1xuICAgICAgICByZXR1cm4gY3VycmVudC5pZFxuICAgICAgfSlcbiAgICAgIGNvbnN0IGluZGV4ID0gaWRzLmluZGV4T2YoaWQpXG5cbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgZGF0YS5hbGxJdGVtc1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICB9XG4gICAgfSxcbiAgfVxufSkoKVxuXG5leHBvcnQgZGVmYXVsdCBidWRnZXRDb250cm9sbGVyXG4iXSwic291cmNlUm9vdCI6IiJ9